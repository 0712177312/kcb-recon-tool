"use strict";(self.webpackChunkng_matero=self.webpackChunkng_matero||[]).push([[225],{225:(vt,I,g)=>{g.r(I),g.d(I,{ConfigurationsManagementModule:()=>yt});var _=g(19132),v=g(31232),T=g(1999),q=g(58731),Z=g(77613),e=g(94650),C=g(13081),h=g(36895),c=g(24006),y=g(3238),b=g(4859),f=g(73546),m=g(59549),S=g(97392),w=g(284),N=g(28255),D=g(84385),F=g(71195),p=g(1576),L=g(55829);const z=["actionTemplate"],j=["statusTemplate"];function B(o,s){if(1&o&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function K(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",19)(1,"mat-icon"),e._uU(2,"more_horiz"),e.qZA()(),e.TgZ(3,"mat-menu",null,20)(5,"button",21),e.NdJ("click",function(){const r=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.viewDetailedRecord(r))}),e.TgZ(6,"mat-icon"),e._uU(7,"edit"),e.qZA(),e._uU(8),e.ALo(9,"translate"),e.qZA()()}if(2&o){const t=e.MAs(4);e.Q6J("matMenuTriggerFor",t),e.xp6(8),e.hij(" ",e.lcZ(9,2,"configurations.edit")," ")}}function G(o,s){if(1&o&&(e.TgZ(0,"span",22),e._uU(1),e.qZA()),2&o){const t=s.$implicit,a=e.oxw();e.Q6J("ngStyle",a.getStatusColor(t.status)),e.xp6(1),e.hij(" ",t.status," ")}}const $=function(){return[5,10,20,50,100]};let O=(()=>{class o{constructor(t,a,n,r,i,u,l){this.remoteSrv=t,this.cdr=a,this.encryptionservice=n,this.router=r,this.translate=i,this.thirdPartyService=u,this.localService=l,this.columns=[],this.filters=[],this.selectedFilter="",this.list=[],this.total=0,this.isLoading=!0,this.query={q:"",sort:"",order:"",page:0,per_page:10}}ngAfterViewInit(){this.columns=[{header:this.translate.stream("configurations.country_name"),field:"companyName",width:"auto",resizable:!0},{header:this.translate.stream("configurations.country_code"),field:"companyCode",width:"auto",resizable:!0},{header:"Status",field:"companyStatus",width:"auto",resizable:!0},{header:this.translate.stream("configurations.created_date"),field:"createdOn",width:"auto",resizable:!0},{header:this.translate.stream("configurations.created_by"),field:"createdBy",width:"auto",resizable:!0},{header:this.translate.stream("table_kitchen_sink.actions"),field:"actions",cellTemplate:this.actionTemplate}]}getStatusColor(t){switch(t){case"Active":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Inactive":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}get params(){const t=Object.assign({},this.query);return t.page+=1,t}ngOnInit(){this.getCountries()}getCountries(){console.log("inside get countries");const t=this.localService.get("user-entity");console.log(t);const a={userCode:t.username,operationName:"getCompanyCode",transactionType:"1005"},[n]="";this.thirdPartyService.sendPayload(a,n).subscribe(r=>{const i=JSON.parse(r.data);if(console.log("Response from service:",i),"0"!==i?.statusCode)return console.error(`Error: ${i?.statusCodeDesc}`),void(this.isLoading=!1);i?.companys&&i.companys.length>0?(this.list=i.companys,console.log("List assigned:",this.list),this.isLoading=!1,this.cdr.detectChanges()):console.warn("No company data found in response."),this.isLoading=!1},r=>{console.error("Error fetching country details:",r),this.isLoading=!1})}delete(t){this.diag1.alert(`You have deleted ${t.position}!`)}viewDetailedRecord(t){var a=t?.id;a&&this.router.navigate(["/Configurations/manage-country",a])}create(){this.router.navigateByUrl("/Configurations/create-country")}getNextPage(t){this.query.page=t.pageIndex,this.query.per_page=t.pageSize,this.getCountries()}search(){this.query.page=0,this.getCountries()}onFilterChange(t){this.selectedFilter=t.value,this.getCountries()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.K),e.Y36(e.sBO),e.Y36(T.w),e.Y36(_.F0),e.Y36(C.sK),e.Y36(q.q),e.Y36(Z.n2))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-countries-list"]],viewQuery:function(t,a){if(1&t&&(e.Gf(z,7),e.Gf(j,7)),2&t){let n;e.iGM(n=e.CRH())&&(a.actionTemplate=n.first),e.iGM(n=e.CRH())&&(a.statusTemplate=n.first)}},features:[e._Bn([v.K])],decls:30,vars:19,consts:[[2,"border","1px solid #ccc","padding","16px"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"col"],[2,"margin","0"],[1,"d-flex","flex-wrap","align-items-center"],["mat-raised-button","",2,"background-color","#74C84D","color","white",3,"click"],[1,"d-flex","justify-content-between","w-100","flex-wrap"],["fxFlex","33.33%","fxFlex.lt-sm","100%",1,"px-2"],["appearance","outline",2,"width","100%"],["name","selectedFilter",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","39.34%","fxFlex.lt-sm","100%",1,"d-flex","justify-content-between","align-items-center","px-2"],["fxFlex","27.33%","fxFlex.lt-sm","100%",1,"px-2"],["matPrefix",""],["matInput","","name","q","placeholder","Search",3,"ngModel","ngModelChange"],[3,"data","columns","length","loading","rowStriped","pageOnFront","pageIndex","pageSize","pageSizeOptions","rowClick","page"],["actionTemplate",""],["statusTemplate",""],[3,"value"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[3,"ngStyle"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div",4)(7,"button",5),e.NdJ("click",function(){return a.create()}),e.TgZ(8,"mat-icon"),e._uU(9,"add_circle"),e.qZA(),e._uU(10),e.ALo(11,"translate"),e.qZA()()()(),e.TgZ(12,"div",6)(13,"div",7)(14,"mat-form-field",8)(15,"mat-label"),e._uU(16,"Select Filter"),e.qZA(),e.TgZ(17,"mat-select",9),e.NdJ("ngModelChange",function(r){return a.selectedFilter=r})("selectionChange",function(r){return a.onFilterChange(r)}),e.YNc(18,B,2,2,"mat-option",10),e.qZA()()(),e._UZ(19,"div",11),e.TgZ(20,"div",12)(21,"mat-form-field",8)(22,"mat-icon",13),e._uU(23,"search"),e.qZA(),e.TgZ(24,"input",14),e.NdJ("ngModelChange",function(r){return a.query.q=r}),e.qZA()()()(),e.TgZ(25,"mtx-grid",15),e.NdJ("rowClick",function(r){return a.viewDetailedRecord(r)})("page",function(r){return a.getNextPage(r)}),e.qZA(),e.YNc(26,K,10,4,"ng-template",null,16,e.W1O),e.YNc(28,G,2,2,"ng-template",null,17,e.W1O)),2&t&&(e.xp6(4),e.Oqu(e.lcZ(5,14,"configurations.contries_tittle")),e.xp6(6),e.hij(" ",e.lcZ(11,16,"configurations.add_country")," "),e.xp6(7),e.Q6J("ngModel",a.selectedFilter),e.xp6(1),e.Q6J("ngForOf",a.filters),e.xp6(6),e.Q6J("ngModel",a.query.q),e.xp6(1),e.Q6J("data",a.list)("columns",a.columns)("length",a.total)("loading",a.isLoading)("rowStriped",!0)("pageOnFront",!1)("pageIndex",a.query.page)("pageSize",a.query.per_page)("pageSizeOptions",e.DdM(18,$)))},dependencies:[h.sg,h.PC,c.Fj,c.JJ,c.On,y.ey,b.lW,f.a8,m.KE,m.hX,m.qo,S.Hw,w.Nt,N.VK,N.OP,N.p6,D.gD,F.CM,p.yH,L.Zl,C.X$],styles:["[_nghost-%COMP%]     .mtx-grid{height:500px}.mtx-grid[_ngcontent-%COMP%]{box-shadow:0 4px 12px #902f2766;border-radius:8px;padding:16px}.mtx-grid[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-collapse:collapse}.mtx-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#902f271a}.mtx-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}.mtx-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:2px solid rgba(144,47,39,.3)}.mtx-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.status-true[_ngcontent-%COMP%]{color:red;font-weight:700}.status-false[_ngcontent-%COMP%]{color:green;font-weight:700}"]}),o})();var U=g(69140);function R(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function H(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}let Q=(()=>{class o{constructor(t,a,n,r,i,u,l,d,x,P){this.service=t,this.encryptionService=a,this.route=n,this.fb=r,this.dateAdapter=i,this.translate=u,this.router=l,this.toaster=d,this.localService=x,this.thirdPartyService=P,this.isLoading=!0,this.form=this.fb.nonNullable.group({companyCodeName:["",[c.kI.required,c.kI.maxLength(50)]],companyCode:["",[c.kI.required,c.kI.maxLength(100)]],userName:[""]})}ngOnDestroy(){this.translateSubscription.unsubscribe()}ngOnInit(){this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)})}return(){this.router.navigateByUrl("/Configurations/countries")}create(){if(this.form.invalid)return this.form.markAllAsTouched(),void this.toaster.showError("Please fill out all required fields");const t=this.localService.get("user-entity");t?.username&&(this.form.value.userCode=t.username),this.form.value.operationName="createCompany",this.form.value.transactionType="1013";const a=this.form.value,n=this.encryptionService.encryptData(a),[r,i,u]=n.split(":");console.log(a),this.thirdPartyService.sendPayload(a,r).subscribe(l=>{"0"===JSON.parse(l.data).statusCode?(this.toaster.showSuccess("Saved Subsidiary successfully"),this.router.navigateByUrl("/Configurations/countries")):this.toaster.showError("Failed to save Subsidiary")},l=>{this.toaster.showError("An error occurred while processing the request.")})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.K),e.Y36(T.w),e.Y36(_.gz),e.Y36(c.qu),e.Y36(y._A),e.Y36(C.sK),e.Y36(_.F0),e.Y36(U.M),e.Y36(Z.n2),e.Y36(q.q))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-country"]],decls:35,vars:24,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","24px","border","2px solid #304254","border-radius","8px"],[2,"font-size","24px","margin-bottom","12px","font-family","'Inter', sans-serif","color","#304254"],[1,"form-field-full",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex","33.33","fxFlex.lt-sm","100"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","formControlName","companyCodeName",2,"font-size","16px",3,"placeholder"],[4,"ngIf"],["matInput","","formControlName","companyCode",2,"font-size","16px",3,"placeholder"],[1,"d-flex","justify-content-between","flex-wrap",2,"margin-top","24px"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","font-size","14px","margin-right","10px",3,"click"],["mat-raised-button","",2,"background-color","#74C84D","color","white","font-size","14px","margin-right","10px",3,"click"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"form",4)(7,"div",5)(8,"div",6)(9,"mat-form-field",7)(10,"mat-label",8),e._uU(11),e.ALo(12,"translate"),e.qZA(),e._UZ(13,"input",9),e.ALo(14,"translate"),e.YNc(15,R,3,3,"mat-error",10),e.qZA()(),e.TgZ(16,"div",6)(17,"mat-form-field",7)(18,"mat-label",8),e._uU(19),e.ALo(20,"translate"),e.qZA(),e._UZ(21,"input",11),e.ALo(22,"translate"),e.YNc(23,H,3,3,"mat-error",10),e.qZA()()(),e.TgZ(24,"div",12)(25,"button",13),e.NdJ("click",function(){return a.return()}),e.TgZ(26,"mat-icon"),e._uU(27,"arrow_back"),e.qZA(),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"button",14),e.NdJ("click",function(){return a.create()}),e.TgZ(31,"mat-icon"),e._uU(32,"edit"),e.qZA(),e._uU(33),e.ALo(34,"translate"),e.qZA()()()()()()),2&t){let n,r;e.xp6(4),e.hij(" ",e.lcZ(5,10,"configurations.create_country_tittle")," "),e.xp6(2),e.Q6J("formGroup",a.form),e.xp6(5),e.Oqu(e.lcZ(12,12,"configurations.country_name")),e.xp6(2),e.s9C("placeholder",e.lcZ(14,14,"configurations.country_name")),e.xp6(2),e.Q6J("ngIf",(null==(n=a.form.get("name"))?null:n.touched)&&(null==(n=a.form.get("name"))?null:n.invalid)),e.xp6(4),e.Oqu(e.lcZ(20,16,"configurations.country_code")),e.xp6(2),e.s9C("placeholder",e.lcZ(22,18,"configurations.country_code")),e.xp6(2),e.Q6J("ngIf",(null==(r=a.form.get("code"))?null:r.touched)&&(null==(r=a.form.get("code"))?null:r.invalid)),e.xp6(5),e.hij("",e.lcZ(29,20,"configurations.back")," "),e.xp6(5),e.hij(" ",e.lcZ(34,22,"configurations.submit")," ")}},dependencies:[h.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,b.lW,f.a8,f.n5,m.TO,m.KE,m.hX,S.Hw,w.Nt,p.xw,p.SQ,p.yH,C.X$]}),o})(),J=(()=>{class o{constructor(){this.usecaseData=[{id:1,name:"B2C 501901",description:"KENYA",companyCode:"KE",createdBy:"KEN20090",createdOn:"10-02-2025",channelCode:"1"},{id:2,name:"B2B 502002",description:"UGANDA",companyCode:"UG",createdBy:"UG20091",createdOn:"10-02-2025",channelCode:"2"}],this.scenariosData={1:[{scenarioId:1,scenarioName:"Scenario 1 for B2C",companyCode:"KE",description:"Details of scenario 1"},{scenarioId:2,scenarioName:"Scenario 2 for B2C",companyCode:"KE",description:"Details of scenario 2"}],2:[{scenarioId:3,scenarioName:"Scenario 1 for B2B",companyCode:"KE",description:"Details of scenario 1"}]}}getUsecaseData(){return this.usecaseData}getScenarios(t){return this.scenariosData[t]||[]}getAllScenarios(){const t=Object.values(this.scenariosData).flat();return console.log("All Scenarios:",t),t}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const W=["actionTemplate"],X=["statusTemplate"];function V(o,s){if(1&o&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function ee(o,s){if(1&o&&(e.TgZ(0,"button",19)(1,"mat-icon"),e._uU(2,"more_horiz"),e.qZA()(),e._UZ(3,"mat-menu",null,20)),2&o){const t=e.MAs(4);e.Q6J("matMenuTriggerFor",t)}}function te(o,s){if(1&o&&(e.TgZ(0,"span",21),e._uU(1),e.qZA()),2&o){const t=s.$implicit,a=e.oxw();e.Q6J("ngStyle",a.getStatusColor(t.status)),e.xp6(1),e.hij(" ",t.status," ")}}const ae=function(){return[5,10,20,50,100]};let oe=(()=>{class o{constructor(t,a,n,r,i,u,l,d){this.remoteSrv=t,this.cdr=a,this.encryptionservice=n,this.router=r,this.translate=i,this.dataService=u,this.thirdPartyService=l,this.localService=d,this.columns=[],this.filters=[],this.selectedFilter="",this.list=[],this.usecase=[],this.usecaseData=[],this.total=0,this.isLoading=!0,this.query={q:"",sort:"",order:"",page:0,per_page:10}}ngAfterViewInit(){this.columns=[{header:"Name",field:"usecaseName"},{header:"Description",field:"usecaseDesc"},{header:"Company Code",field:"usecaseCompanyCode"},{header:"Created By",field:"createdBy"},{header:"Created On",field:"createdOn"}]}getStatusColor(t){switch(t){case"Active":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Inactive":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}get params(){const t=Object.assign({},this.query);return t.page+=1,t}ngOnInit(){this.getUsecaseDetails()}getUsecaseDetails(){const t=this.localService.get("user-entity");console.log(t);const a={userCode:t.username,operationName:"getUsecase",transactionType:"1010",countryCode:""},[n]="";this.thirdPartyService.sendPayload(a,n).subscribe(r=>{const i=JSON.parse(r.data);if(!i||"0"!==i.statusCode)return console.warn("Invalid response or no usecases found"),void(this.isLoading=!1);i.usecases&&i.usecases.length>0?(this.usecase=i.usecases,this.cdr.detectChanges()):console.warn("Usecases array is empty"),this.isLoading=!1},r=>{console.error("Error fetching usecase details:",r),this.isLoading=!1})}delete(t){this.diag1.alert(`You have deleted ${t.position}!`)}viewDetailedRecord(t){var a=t?.id;a&&this.router.navigate(["/Configurations/manage-country",a])}create(){this.router.navigateByUrl("/Configurations/create-usecase")}getNextPage(t){this.query.page=t.pageIndex,this.query.per_page=t.pageSize,this.getUsecaseDetails()}search(){this.query.page=0,this.getUsecaseDetails()}onFilterChange(t){this.selectedFilter=t.value,this.getUsecaseDetails()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.K),e.Y36(e.sBO),e.Y36(T.w),e.Y36(_.F0),e.Y36(C.sK),e.Y36(J),e.Y36(q.q),e.Y36(Z.n2))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-usecaselist"]],viewQuery:function(t,a){if(1&t&&(e.Gf(W,7),e.Gf(X,7)),2&t){let n;e.iGM(n=e.CRH())&&(a.actionTemplate=n.first),e.iGM(n=e.CRH())&&(a.statusTemplate=n.first)}},decls:28,vars:13,consts:[[2,"border","1px solid #ccc","padding","16px"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"col"],[2,"margin","0"],[1,"d-flex","flex-wrap","align-items-center"],["mat-raised-button","",2,"background-color","#74C84D","color","white",3,"click"],[1,"d-flex","justify-content-between","w-100","flex-wrap"],["fxFlex","33.33%","fxFlex.lt-sm","100%",1,"px-2"],["appearance","outline",2,"width","100%"],["name","selectedFilter",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","39.34%","fxFlex.lt-sm","100%",1,"d-flex","justify-content-between","align-items-center","px-2"],["fxFlex","27.33%","fxFlex.lt-sm","100%",1,"px-2"],["matPrefix",""],["matInput","","name","q","placeholder","Search",3,"ngModel","ngModelChange"],[3,"data","columns","length","loading","rowStriped","pageOnFront","pageIndex","pageSize","pageSizeOptions","rowClick","page"],["actionTemplate",""],["statusTemplate",""],[3,"value"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],[3,"ngStyle"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Use Case"),e.qZA()(),e.TgZ(5,"div",4)(6,"button",5),e.NdJ("click",function(){return a.create()}),e.TgZ(7,"mat-icon"),e._uU(8,"add_circle"),e.qZA(),e._uU(9," Use Case "),e.qZA()()()(),e.TgZ(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),e._uU(14,"Select Filter"),e.qZA(),e.TgZ(15,"mat-select",9),e.NdJ("ngModelChange",function(r){return a.selectedFilter=r})("selectionChange",function(r){return a.onFilterChange(r)}),e.YNc(16,V,2,2,"mat-option",10),e.qZA()()(),e._UZ(17,"div",11),e.TgZ(18,"div",12)(19,"mat-form-field",8)(20,"mat-icon",13),e._uU(21,"search"),e.qZA(),e.TgZ(22,"input",14),e.NdJ("ngModelChange",function(r){return a.query.q=r}),e.qZA()()()(),e.TgZ(23,"mtx-grid",15),e.NdJ("rowClick",function(r){return a.viewDetailedRecord(r)})("page",function(r){return a.getNextPage(r)}),e.qZA(),e.YNc(24,ee,5,1,"ng-template",null,16,e.W1O),e.YNc(26,te,2,2,"ng-template",null,17,e.W1O)),2&t&&(e.xp6(15),e.Q6J("ngModel",a.selectedFilter),e.xp6(1),e.Q6J("ngForOf",a.filters),e.xp6(6),e.Q6J("ngModel",a.query.q),e.xp6(1),e.Q6J("data",a.usecase)("columns",a.columns)("length",a.total)("loading",a.isLoading)("rowStriped",!0)("pageOnFront",!1)("pageIndex",a.query.page)("pageSize",a.query.per_page)("pageSizeOptions",e.DdM(12,ae)))},dependencies:[h.sg,h.PC,c.Fj,c.JJ,c.On,y.ey,b.lW,f.a8,m.KE,m.hX,m.qo,S.Hw,w.Nt,N.VK,N.p6,D.gD,F.CM,p.yH,L.Zl]}),o})();function re(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function ne(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function ie(o,s){if(1&o&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.companyCode),e.xp6(1),e.hij(" ",t.companyName," ")}}function se(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}let ce=(()=>{class o{constructor(t,a,n,r,i,u,l,d,x,P,M,k){this.service=t,this.encryptionService=a,this.route=n,this.fb=r,this.dateAdapter=i,this.translate=u,this.router=l,this.toaster=d,this.localService=x,this.countriesService=P,this.thirdPartyService=M,this.cdr=k,this.isLoading=!0,this.list=[],this.form=this.fb.nonNullable.group({usecaseName:["",[c.kI.required,c.kI.maxLength(50)]],usecaseDesc:["",[c.kI.required,c.kI.maxLength(100)]],companyCode:[0,c.kI.required],userName:[""]})}ngOnDestroy(){this.translateSubscription.unsubscribe()}ngOnInit(){this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)}),this.getCountries()}return(){this.router.navigateByUrl("/Configurations/use-case")}create(){if(this.form.invalid)return this.form.markAllAsTouched(),void this.toaster.showError("Please fill out all required fields");const t=this.localService.get("user-entity");t?.username&&(this.form.value.userCode=t.username),this.form.value.transactionType="1001",this.form.value.operationName="createUsecase";const a=this.form.value,n=this.encryptionService.encryptData(a),[r,i,u]=n.split(":");this.thirdPartyService.sendPayload(a,r).subscribe(l=>{console.log("API Response:",l),!0===l?.status?(this.toaster.showSuccess("Saved use case successfully"),this.return()):this.toaster.showError("Failed to save use case")},l=>{if(console.error("Error:",l),l?.error&&"string"==typeof l.error)try{const d=JSON.parse(l.error);console.error("Parsed Error:",d)}catch{console.warn("Error response is not valid JSON:",l.error)}this.toaster.showError("An error occurred while processing the request.")})}getCountries(){console.log("inside get countries");const t=this.localService.get("user-entity");console.log(t);const a={userCode:t.username,operationName:"getCompanyCode",transactionType:"1005"},[n]="";this.thirdPartyService.sendPayload(a,n).subscribe(r=>{const i=JSON.parse(r.data);if(console.log("Response from service:",i),"0"!==i?.statusCode)return console.error(`Error: ${i?.statusCodeDesc}`),void(this.isLoading=!1);i?.companys&&i.companys.length>0?(this.countries=i.companys,console.log("List assigned:",this.list),this.isLoading=!1,this.cdr.detectChanges()):console.warn("No company data found in response."),this.isLoading=!1},r=>{console.error("Error fetching country details:",r),this.isLoading=!1})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.K),e.Y36(T.w),e.Y36(_.gz),e.Y36(c.qu),e.Y36(y._A),e.Y36(C.sK),e.Y36(_.F0),e.Y36(U.M),e.Y36(Z.n2),e.Y36(v.K),e.Y36(q.q),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-usecase"]],decls:37,vars:5,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","24px","border","2px solid #304254","border-radius","8px"],[2,"font-size","24px","margin-bottom","12px","font-family","'Inter', sans-serif","color","#304254"],[1,"form-field-full",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex","33.33","fxFlex.lt-sm","100"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","placeholder","Name","formControlName","usecaseName",2,"font-size","16px"],[4,"ngIf"],["matInput","","placeholder","Description","formControlName","usecaseDesc",2,"font-size","16px"],["required","","formControlName","companyCode",2,"font-size","16px"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","space-between center",2,"margin-top","24px"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","font-size","14px",3,"click"],["mat-raised-button","",2,"background-color","#74C84D","color","white","font-size","14px",3,"click"],[3,"value"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title",3),e._uU(4," Create Use Case "),e.qZA(),e.TgZ(5,"form",4)(6,"div",5)(7,"div",6)(8,"mat-form-field",7)(9,"mat-label",8),e._uU(10,"Name"),e.qZA(),e._UZ(11,"input",9),e.YNc(12,re,3,3,"mat-error",10),e.qZA()(),e.TgZ(13,"div",6)(14,"mat-form-field",7)(15,"mat-label",8),e._uU(16,"Description"),e.qZA(),e._UZ(17,"input",11),e.YNc(18,ne,3,3,"mat-error",10),e.qZA()(),e.TgZ(19,"div",6)(20,"mat-form-field",7)(21,"mat-label",8),e._uU(22,"Subsidiary Code"),e.qZA(),e.TgZ(23,"mat-select",12)(24,"mat-option"),e._uU(25,"-- Select --"),e.qZA(),e.YNc(26,ie,2,2,"mat-option",13),e.qZA(),e.YNc(27,se,3,3,"mat-error",10),e.qZA()()(),e.TgZ(28,"div",14)(29,"button",15),e.NdJ("click",function(){return a.return()}),e.TgZ(30,"mat-icon"),e._uU(31,"arrow_back"),e.qZA(),e._uU(32," Back "),e.qZA(),e.TgZ(33,"button",16),e.NdJ("click",function(){return a.create()}),e.TgZ(34,"mat-icon"),e._uU(35,"edit"),e.qZA(),e._uU(36," Submit "),e.qZA()()()()()()),2&t){let n,r,i;e.xp6(5),e.Q6J("formGroup",a.form),e.xp6(7),e.Q6J("ngIf",(null==(n=a.form.get("usecaseName"))?null:n.touched)&&(null==(n=a.form.get("usecaseName"))?null:n.invalid)),e.xp6(6),e.Q6J("ngIf",(null==(r=a.form.get("usecaseDesc"))?null:r.touched)&&(null==(r=a.form.get("usecaseDesc"))?null:r.invalid)),e.xp6(8),e.Q6J("ngForOf",a.countries),e.xp6(1),e.Q6J("ngIf",null==(i=a.form.get("country"))?null:i.invalid)}},dependencies:[h.sg,h.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.sg,c.u,y.ey,b.lW,f.a8,f.n5,m.TO,m.KE,m.hX,S.Hw,w.Nt,D.gD,p.xw,p.SQ,p.Wh,p.yH,C.X$]}),o})();const le=["actionTemplate"],ue=["statusTemplate"];function de(o,s){if(1&o&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function me(o,s){if(1&o&&(e.TgZ(0,"button",19)(1,"mat-icon"),e._uU(2,"more_horiz"),e.qZA()(),e._UZ(3,"mat-menu",null,20)),2&o){const t=e.MAs(4);e.Q6J("matMenuTriggerFor",t)}}function pe(o,s){if(1&o&&(e.TgZ(0,"span",21),e._uU(1),e.qZA()),2&o){const t=s.$implicit,a=e.oxw();e.Q6J("ngStyle",a.getStatusColor(t.status)),e.xp6(1),e.hij(" ",t.status," ")}}const ge=function(){return[5,10,20,50,100]};let he=(()=>{class o{constructor(t,a,n,r,i,u,l,d,x){this.remoteSrv=t,this.cdr=a,this.encryptionservice=n,this.router=r,this.translate=i,this.dataService=u,this.cdRef=l,this.thirdPartyService=d,this.localService=x,this.columns=[],this.filters=[],this.selectedFilter="",this.list=[],this.scenarioList=[],this.scenerios=[],this.total=0,this.isLoading=!0,this.allScenarios=[],this.query={q:"",sort:"",order:"",page:0,per_page:10}}ngAfterViewInit(){this.columns=[{header:"Name",field:"scenarioName"},{header:"Description",field:"scenarioDesc"},{header:"Company Code",field:"scenarioCompanycode"},{header:"Business Unit",field:"scenarionBsUnit"}],this.cdRef.detectChanges()}getStatusColor(t){switch(t){case"Active":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Inactive":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}get params(){const t=Object.assign({},this.query);return t.page+=1,t}ngOnInit(){this.fetchAllScenarios()}fetchAllScenarios(){const t=this.localService.get("user-entity");console.log(t);const a={userCode:t.username,operationName:"getUsecase",transactionType:"1003",countryCode:""},[n]="";this.thirdPartyService.sendPayload(a,n).subscribe(r=>{const i=JSON.parse(r.data);if("0"!==i?.statusCode)return console.error(`Error: ${i?.statusCodeDesc}`),void(this.isLoading=!1);i?.scenarios&&i.scenarios.length>0?(this.scenarioList=i.scenarios,this.cdr.detectChanges()):console.warn("No scenario data found in response."),this.isLoading=!1},r=>{console.error("Error fetching scenario details:",r),this.isLoading=!1})}getCountries(){const a=this.encryptionservice.encryptData({status:this.selectedFilter,page:this.query.page,size:this.query.per_page}),n=a.split(":")[2],r=a.split(":")[1],i=a.split(":")[0];this.remoteSrv.getCountries(i,r).subscribe(u=>{const l=JSON.parse(u),d=this.encryptionservice.decryptData(l?.body,n);this.list=d.data.content,this.total=d.data.total,this.filters=d.statuses,this.isLoading=!1,this.cdr.detectChanges()},u=>{console.error("Error fetching countries:",u),this.isLoading=!1})}delete(t){this.diag1.alert(`You have deleted ${t.position}!`)}viewDetailedRecord(t){var a=t?.id;a&&this.router.navigate(["/Configurations/manage-country",a])}create(){this.router.navigateByUrl("/Configurations/create-scenario")}getNextPage(t){this.query.page=t.pageIndex,this.query.per_page=t.pageSize,this.getCountries()}search(){this.query.page=0,this.getCountries()}onFilterChange(t){this.selectedFilter=t.value,this.getCountries()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.K),e.Y36(e.sBO),e.Y36(T.w),e.Y36(_.F0),e.Y36(C.sK),e.Y36(J),e.Y36(e.sBO),e.Y36(q.q),e.Y36(Z.n2))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-list-scenario"]],viewQuery:function(t,a){if(1&t&&(e.Gf(le,7),e.Gf(ue,7)),2&t){let n;e.iGM(n=e.CRH())&&(a.actionTemplate=n.first),e.iGM(n=e.CRH())&&(a.statusTemplate=n.first)}},decls:28,vars:12,consts:[[2,"border","1px solid #ccc","padding","16px"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"col"],[2,"margin","0"],[1,"d-flex","flex-wrap","align-items-center"],["mat-raised-button","",2,"background-color","#74C84D","color","white",3,"click"],[1,"d-flex","justify-content-between","w-100","flex-wrap"],["fxFlex","33.33%","fxFlex.lt-sm","100%",1,"px-2"],["appearance","outline",2,"width","100%"],["name","selectedFilter",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","39.34%","fxFlex.lt-sm","100%",1,"d-flex","justify-content-between","align-items-center","px-2"],["fxFlex","27.33%","fxFlex.lt-sm","100%",1,"px-2"],["matPrefix",""],["matInput","","name","q","placeholder","Search",3,"ngModel","ngModelChange"],[3,"data","columns","length","rowStriped","pageOnFront","pageIndex","pageSize","pageSizeOptions","rowClick","page"],["actionTemplate",""],["statusTemplate",""],[3,"value"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],[3,"ngStyle"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Scenario"),e.qZA()(),e.TgZ(5,"div",4)(6,"button",5),e.NdJ("click",function(){return a.create()}),e.TgZ(7,"mat-icon"),e._uU(8,"add_circle"),e.qZA(),e._uU(9," Scenario "),e.qZA()()()(),e.TgZ(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),e._uU(14,"Select Filter"),e.qZA(),e.TgZ(15,"mat-select",9),e.NdJ("ngModelChange",function(r){return a.selectedFilter=r})("selectionChange",function(r){return a.onFilterChange(r)}),e.YNc(16,de,2,2,"mat-option",10),e.qZA()()(),e._UZ(17,"div",11),e.TgZ(18,"div",12)(19,"mat-form-field",8)(20,"mat-icon",13),e._uU(21,"search"),e.qZA(),e.TgZ(22,"input",14),e.NdJ("ngModelChange",function(r){return a.query.q=r}),e.qZA()()()(),e.TgZ(23,"mtx-grid",15),e.NdJ("rowClick",function(r){return a.viewDetailedRecord(r)})("page",function(r){return a.getNextPage(r)}),e.qZA(),e.YNc(24,me,5,1,"ng-template",null,16,e.W1O),e.YNc(26,pe,2,2,"ng-template",null,17,e.W1O)),2&t&&(e.xp6(15),e.Q6J("ngModel",a.selectedFilter),e.xp6(1),e.Q6J("ngForOf",a.filters),e.xp6(6),e.Q6J("ngModel",a.query.q),e.xp6(1),e.Q6J("data",a.scenarioList)("columns",a.columns)("length",a.total)("rowStriped",!0)("pageOnFront",!1)("pageIndex",a.query.page)("pageSize",a.query.per_page)("pageSizeOptions",e.DdM(11,ge)))},dependencies:[h.sg,h.PC,c.Fj,c.JJ,c.On,y.ey,b.lW,f.a8,m.KE,m.hX,m.qo,S.Hw,w.Nt,N.VK,N.p6,D.gD,F.CM,p.yH,L.Zl]}),o})();function fe(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function _e(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function Ce(o,s){if(1&o&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.usecaseID),e.xp6(1),e.hij(" ",t.usecaseName," ")}}function ye(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function xe(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function ve(o,s){if(1&o&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.companyCode),e.xp6(1),e.hij(" ",t.companyName," ")}}function Ze(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}let Te=(()=>{class o{constructor(t,a,n,r,i,u,l,d,x,P,M,k,xt){this.service=t,this.encryptionService=a,this.route=n,this.fb=r,this.dateAdapter=i,this.translate=u,this.router=l,this.toaster=d,this.localService=x,this.countriesService=P,this.dataService=M,this.thirdPartyService=k,this.cdr=xt,this.isLoading=!0,this.usecase=[],this.form=this.fb.nonNullable.group({scenarioName:["",[c.kI.required,c.kI.maxLength(50)]],scenarioDesc:["",[c.kI.required,c.kI.maxLength(100)]],scenarioBussinessUnit:["",[c.kI.required,c.kI.maxLength(100)]],companyCode:[0,c.kI.required],usecaseID:[0,c.kI.required],userName:[""]})}ngOnDestroy(){this.translateSubscription.unsubscribe()}ngOnInit(){this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)}),this.getCountries(),this.getUsecaseDetails()}return(){this.router.navigateByUrl("/Configurations/Scenario")}create(){if(this.form.invalid)return this.form.markAllAsTouched(),void this.toaster.showError("Please fill out all required fields");const t=this.localService.get("user-entity");t?.username&&(this.form.value.userCode=t.username),this.form.value.operationName="createScenario",this.form.value.transactionType="1002";const a=this.form.value,n=this.encryptionService.encryptData(a),[r,i,u]=n.split(":");this.thirdPartyService.sendPayload(a,r).subscribe(l=>{const d=JSON.parse(l.data);console.log("response from server",d),"0"===d.statusCode?(this.toaster.showSuccess("Saved Scenerio successfully"),this.router.navigateByUrl("/Configurations/Scenario")):this.toaster.showError("Failed to save Scenerio")},l=>{this.toaster.showError("An error occurred while processing the request.")})}getCountries(){console.log("inside get countries");const t=this.localService.get("user-entity");console.log(t);const a={userCode:t.username,operationName:"getCompanyCode",transactionType:"1005"},[n]="";this.thirdPartyService.sendPayload(a,n).subscribe(r=>{const i=JSON.parse(r.data);if(console.log("Response from service:",i),"0"!==i?.statusCode)return console.error(`Error: ${i?.statusCodeDesc}`),void(this.isLoading=!1);i?.companys&&i.companys.length>0?(this.countries=i.companys,this.isLoading=!1,this.cdr.detectChanges()):console.warn("No company data found in response."),this.isLoading=!1},r=>{console.error("Error fetching country details:",r),this.isLoading=!1})}getUsecaseDetails(){const t=this.localService.get("user-entity");console.log(t);const a={userCode:t.username,operationName:"getUsecase",transactionType:"1010",countryCode:""},[n]="";this.thirdPartyService.sendPayload(a,n).subscribe(r=>{const i=JSON.parse(r.data);i&&"0"===i.statusCode?(i.usecases&&i.usecases.length>0?(this.usecase=i.usecases,this.cdr.detectChanges()):console.warn("Usecases array is empty"),this.isLoading=!1):this.isLoading=!1},r=>{console.error("Error fetching usecase details:",r),this.isLoading=!1})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.K),e.Y36(T.w),e.Y36(_.gz),e.Y36(c.qu),e.Y36(y._A),e.Y36(C.sK),e.Y36(_.F0),e.Y36(U.M),e.Y36(Z.n2),e.Y36(v.K),e.Y36(J),e.Y36(q.q),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-scenario"]],decls:53,vars:8,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","24px","border","2px solid #304254","border-radius","8px"],[2,"font-size","24px","margin-bottom","12px","font-family","'Inter', sans-serif","color","#304254"],[1,"form-field-full",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex","33.33","fxFlex.lt-sm","100"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","placeholder","Name","formControlName","scenarioName",2,"font-size","16px"],[4,"ngIf"],["matInput","","placeholder","Description","formControlName","scenarioDesc",2,"font-size","16px"],["required","","formControlName","usecaseID",2,"font-size","16px"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Business Unit","formControlName","scenarioBussinessUnit",2,"font-size","16px"],["required","","formControlName","companyCode",2,"font-size","16px"],["fxLayout","row","fxLayoutAlign","space-between center",2,"margin-top","24px"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","font-size","14px",3,"click"],["mat-raised-button","",2,"background-color","#74C84D","color","white","font-size","14px",3,"click"],[3,"value"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title",3),e._uU(4," Create Scenario "),e.qZA(),e.TgZ(5,"form",4)(6,"div",5)(7,"div",6)(8,"mat-form-field",7)(9,"mat-label",8),e._uU(10,"Name"),e.qZA(),e._UZ(11,"input",9),e.YNc(12,fe,3,3,"mat-error",10),e.qZA()(),e.TgZ(13,"div",6)(14,"mat-form-field",7)(15,"mat-label",8),e._uU(16,"Description"),e.qZA(),e._UZ(17,"input",11),e.YNc(18,_e,3,3,"mat-error",10),e.qZA()(),e.TgZ(19,"div",6)(20,"mat-form-field",7)(21,"mat-label",8),e._uU(22,"Use Case"),e.qZA(),e.TgZ(23,"mat-select",12)(24,"mat-option"),e._uU(25,"-- Select --"),e.qZA(),e.YNc(26,Ce,2,2,"mat-option",13),e.qZA(),e.YNc(27,ye,3,3,"mat-error",10),e.qZA()()(),e.TgZ(28,"div",5)(29,"div",6)(30,"mat-form-field",7)(31,"mat-label",8),e._uU(32,"Business Unit"),e.qZA(),e._UZ(33,"input",14),e.YNc(34,xe,3,3,"mat-error",10),e.qZA()(),e.TgZ(35,"div",6)(36,"mat-form-field",7)(37,"mat-label",8),e._uU(38,"Subsidiary Code"),e.qZA(),e.TgZ(39,"mat-select",15)(40,"mat-option"),e._uU(41,"-- Select --"),e.qZA(),e.YNc(42,ve,2,2,"mat-option",13),e.qZA(),e.YNc(43,Ze,3,3,"mat-error",10),e.qZA()()(),e.TgZ(44,"div",16)(45,"button",17),e.NdJ("click",function(){return a.return()}),e.TgZ(46,"mat-icon"),e._uU(47,"arrow_back"),e.qZA(),e._uU(48," Back "),e.qZA(),e.TgZ(49,"button",18),e.NdJ("click",function(){return a.create()}),e.TgZ(50,"mat-icon"),e._uU(51,"edit"),e.qZA(),e._uU(52," Submit "),e.qZA()()()()()()),2&t){let n,r,i,u,l;e.xp6(5),e.Q6J("formGroup",a.form),e.xp6(7),e.Q6J("ngIf",(null==(n=a.form.get("scenarioName"))?null:n.touched)&&(null==(n=a.form.get("scenarioName"))?null:n.invalid)),e.xp6(6),e.Q6J("ngIf",(null==(r=a.form.get("scenarioDesc"))?null:r.touched)&&(null==(r=a.form.get("scenarioDesc"))?null:r.invalid)),e.xp6(8),e.Q6J("ngForOf",a.usecase),e.xp6(1),e.Q6J("ngIf",null==(i=a.form.get("usecaseID"))?null:i.invalid),e.xp6(7),e.Q6J("ngIf",(null==(u=a.form.get("scenarioBussinessUnit"))?null:u.touched)&&(null==(u=a.form.get("scenarioBussinessUnit"))?null:u.invalid)),e.xp6(8),e.Q6J("ngForOf",a.countries),e.xp6(1),e.Q6J("ngIf",null==(l=a.form.get("companyCode"))?null:l.invalid)}},dependencies:[h.sg,h.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.sg,c.u,y.ey,b.lW,f.a8,f.n5,m.TO,m.KE,m.hX,S.Hw,w.Nt,D.gD,p.xw,p.SQ,p.Wh,p.yH,C.X$]}),o})();const be=["actionTemplate"],Se=["statusTemplate"];function Ae(o,s){if(1&o&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function qe(o,s){if(1&o&&(e.TgZ(0,"button",19)(1,"mat-icon"),e._uU(2,"more_horiz"),e.qZA()(),e._UZ(3,"mat-menu",null,20)),2&o){const t=e.MAs(4);e.Q6J("matMenuTriggerFor",t)}}function we(o,s){if(1&o&&(e.TgZ(0,"span",21),e._uU(1),e.qZA()),2&o){const t=s.$implicit,a=e.oxw();e.Q6J("ngStyle",a.getStatusColor(t.status)),e.xp6(1),e.hij(" ",t.status," ")}}const Ne=function(){return[5,10,20,50,100]};let De=(()=>{class o{constructor(t,a,n,r,i,u,l){this.remoteSrv=t,this.cdr=a,this.encryptionservice=n,this.router=r,this.translate=i,this.thirdPartyService=u,this.localService=l,this.columns=[],this.dataSources=[],this.filters=[],this.selectedFilter="",this.list=[],this.datasourceList=[],this.total=0,this.isLoading=!0,this.query={q:"",sort:"",order:"",page:0,per_page:10}}ngAfterViewInit(){this.columns=[{header:"Name",field:"datasourceName"},{header:"Description",field:"datasourceDesc"},{header:"Company Code",field:"datasourceCompany"},{header:"Source Type",field:"datasourceType"},{header:"Source Path",field:"datasourcePath"}]}getStatusColor(t){switch(t){case"Active":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Inactive":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}get params(){const t=Object.assign({},this.query);return t.page+=1,t}ngOnInit(){this.getDatasourceDetails()}getDatasourceDetails(){const t=this.localService.get("user-entity");console.log(t);const a={userCode:t.username,operationName:"getDataSource",transactionType:"1008"},[n]="";this.thirdPartyService.sendPayload(a,n).subscribe(r=>{const i=JSON.parse(r.data);if(console.log("Response from getDatasources:",i),"0"!==i?.statusCode)return console.error(`Error: ${i?.statusCodeDesc}`),void(this.isLoading=!1);i?.datasources&&i.datasources.length>0?(this.datasourceList=i.datasources,this.cdr.detectChanges()):console.warn("No datasource data found in response."),this.isLoading=!1},r=>{console.error("Error fetching datasource details:",r),this.isLoading=!1})}delete(t){this.diag1.alert(`You have deleted ${t.position}!`)}viewDetailedRecord(t){var a=t?.id;a&&this.router.navigate(["/Configurations/manage-country",a])}create(){this.router.navigateByUrl("/Configurations/create-datasource")}getNextPage(t){this.query.page=t.pageIndex,this.query.per_page=t.pageSize}search(){this.query.page=0}onFilterChange(t){this.selectedFilter=t.value}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.K),e.Y36(e.sBO),e.Y36(T.w),e.Y36(_.F0),e.Y36(C.sK),e.Y36(q.q),e.Y36(Z.n2))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-listdatasource"]],viewQuery:function(t,a){if(1&t&&(e.Gf(be,7),e.Gf(Se,7)),2&t){let n;e.iGM(n=e.CRH())&&(a.actionTemplate=n.first),e.iGM(n=e.CRH())&&(a.statusTemplate=n.first)}},decls:28,vars:12,consts:[[2,"border","1px solid #ccc","padding","16px"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"col"],[2,"margin","0"],[1,"d-flex","flex-wrap","align-items-center"],["mat-raised-button","",2,"background-color","#74C84D","color","white",3,"click"],[1,"d-flex","justify-content-between","w-100","flex-wrap"],["fxFlex","33.33%","fxFlex.lt-sm","100%",1,"px-2"],["appearance","outline",2,"width","100%"],["name","selectedFilter",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","39.34%","fxFlex.lt-sm","100%",1,"d-flex","justify-content-between","align-items-center","px-2"],["fxFlex","27.33%","fxFlex.lt-sm","100%",1,"px-2"],["matPrefix",""],["matInput","","name","q","placeholder","Search",3,"ngModel","ngModelChange"],[3,"data","columns","length","rowStriped","pageOnFront","pageIndex","pageSize","pageSizeOptions","rowClick","page"],["actionTemplate",""],["statusTemplate",""],[3,"value"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],[3,"ngStyle"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Datasource"),e.qZA()(),e.TgZ(5,"div",4)(6,"button",5),e.NdJ("click",function(){return a.create()}),e.TgZ(7,"mat-icon"),e._uU(8,"add_circle"),e.qZA(),e._uU(9," Datasource "),e.qZA()()()(),e.TgZ(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),e._uU(14,"Select Filter"),e.qZA(),e.TgZ(15,"mat-select",9),e.NdJ("ngModelChange",function(r){return a.selectedFilter=r})("selectionChange",function(r){return a.onFilterChange(r)}),e.YNc(16,Ae,2,2,"mat-option",10),e.qZA()()(),e._UZ(17,"div",11),e.TgZ(18,"div",12)(19,"mat-form-field",8)(20,"mat-icon",13),e._uU(21,"search"),e.qZA(),e.TgZ(22,"input",14),e.NdJ("ngModelChange",function(r){return a.query.q=r}),e.qZA()()()(),e.TgZ(23,"mtx-grid",15),e.NdJ("rowClick",function(r){return a.viewDetailedRecord(r)})("page",function(r){return a.getNextPage(r)}),e.qZA(),e.YNc(24,qe,5,1,"ng-template",null,16,e.W1O),e.YNc(26,we,2,2,"ng-template",null,17,e.W1O)),2&t&&(e.xp6(15),e.Q6J("ngModel",a.selectedFilter),e.xp6(1),e.Q6J("ngForOf",a.filters),e.xp6(6),e.Q6J("ngModel",a.query.q),e.xp6(1),e.Q6J("data",a.datasourceList)("columns",a.columns)("length",a.total)("rowStriped",!0)("pageOnFront",!1)("pageIndex",a.query.page)("pageSize",a.query.per_page)("pageSizeOptions",e.DdM(11,Ne)))},dependencies:[h.sg,h.PC,c.Fj,c.JJ,c.On,y.ey,b.lW,f.a8,m.KE,m.hX,m.qo,S.Hw,w.Nt,N.VK,N.p6,D.gD,F.CM,p.yH,L.Zl]}),o})();function Pe(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function Ue(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function Fe(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function Le(o,s){if(1&o&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.companyCode),e.xp6(1),e.hij(" ",t.companyName," ")}}function Me(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}let ke=(()=>{class o{constructor(t,a,n,r,i,u,l,d,x,P,M,k){this.service=t,this.encryptionService=a,this.route=n,this.fb=r,this.dateAdapter=i,this.translate=u,this.router=l,this.toaster=d,this.localService=x,this.countriesService=P,this.thirdPartyService=M,this.cdr=k,this.isLoading=!0,this.form=this.fb.nonNullable.group({datasourceName:["",[c.kI.required,c.kI.maxLength(50)]],datasourceDesc:["",[c.kI.required,c.kI.maxLength(100)]],sourceType:["",[c.kI.required,c.kI.maxLength(100)]],companyCode:[0,c.kI.required],userName:[""]})}ngOnDestroy(){this.translateSubscription.unsubscribe()}ngOnInit(){this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)}),this.getCountries()}return(){this.router.navigateByUrl("/Configurations/datasource")}create(){if(console.log(this.form.invalid),this.form.invalid)return this.form.markAllAsTouched(),void this.toaster.showError("Please fill out all required fields");const t=this.localService.get("user-entity");t?.username&&(this.form.value.userCode=t.username),this.form.value.sourcePath="",this.form.value.internal="",this.form.value.transactionType="1006",this.form.value.operationName="operationName";const a=this.form.value,n=this.encryptionService.encryptData(a),[r,i,u]=n.split(":");this.thirdPartyService.sendPayload(a,r).subscribe(l=>{"0"===JSON.parse(l.data).statusCode?(this.toaster.showSuccess("Saved datasource successfully"),this.router.navigateByUrl("/Configurations/datasource")):this.toaster.showError("Failed to save datasource")},l=>{this.toaster.showError("An error occurred while processing the request.")})}getCountries(){console.log("inside get countries");const t=this.localService.get("user-entity");console.log(t);const a={userCode:t.username,operationName:"getCompanyCode",transactionType:"1005"},[n]="";this.thirdPartyService.sendPayload(a,n).subscribe(r=>{const i=JSON.parse(r.data);if(console.log("Response from service:",i),"0"!==i?.statusCode)return console.error(`Error: ${i?.statusCodeDesc}`),void(this.isLoading=!1);i?.companys&&i.companys.length>0?(this.countries=i.companys,this.isLoading=!1,this.cdr.detectChanges()):console.warn("No company data found in response."),this.isLoading=!1},r=>{console.error("Error fetching country details:",r),this.isLoading=!1})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.K),e.Y36(T.w),e.Y36(_.gz),e.Y36(c.qu),e.Y36(y._A),e.Y36(C.sK),e.Y36(_.F0),e.Y36(U.M),e.Y36(Z.n2),e.Y36(v.K),e.Y36(q.q),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-datasource"]],decls:44,vars:6,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","24px","border","2px solid #304254","border-radius","8px"],[2,"font-size","24px","margin-bottom","12px","font-family","'Inter', sans-serif","color","#304254"],[1,"form-field-full",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex","33.33","fxFlex.lt-sm","100"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","placeholder","Name","formControlName","datasourceName",2,"font-size","16px"],[4,"ngIf"],["matInput","","placeholder","Description","formControlName","datasourceDesc",2,"font-size","16px"],["matInput","","placeholder","Source Type","formControlName","sourceType",2,"font-size","16px"],["required","","formControlName","companyCode",2,"font-size","16px"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","space-between center",2,"margin-top","24px"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","font-size","14px",3,"click"],["mat-raised-button","",2,"background-color","#74C84D","color","white","font-size","14px",3,"click"],[3,"value"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title",3),e._uU(4," Create Datasource "),e.qZA(),e.TgZ(5,"form",4)(6,"div",5)(7,"div",6)(8,"mat-form-field",7)(9,"mat-label",8),e._uU(10,"Name"),e.qZA(),e._UZ(11,"input",9),e.YNc(12,Pe,3,3,"mat-error",10),e.qZA()(),e.TgZ(13,"div",6)(14,"mat-form-field",7)(15,"mat-label",8),e._uU(16,"Description"),e.qZA(),e._UZ(17,"input",11),e.YNc(18,Ue,3,3,"mat-error",10),e.qZA()(),e.TgZ(19,"div",6)(20,"mat-form-field",7)(21,"mat-label",8),e._uU(22,"Source Type"),e.qZA(),e._UZ(23,"input",12),e.YNc(24,Fe,3,3,"mat-error",10),e.qZA()()(),e.TgZ(25,"div",5)(26,"div",6)(27,"mat-form-field",7)(28,"mat-label",8),e._uU(29,"Subsidiary Code"),e.qZA(),e.TgZ(30,"mat-select",13)(31,"mat-option"),e._uU(32,"-- Select --"),e.qZA(),e.YNc(33,Le,2,2,"mat-option",14),e.qZA(),e.YNc(34,Me,3,3,"mat-error",10),e.qZA()()(),e.TgZ(35,"div",15)(36,"button",16),e.NdJ("click",function(){return a.return()}),e.TgZ(37,"mat-icon"),e._uU(38,"arrow_back"),e.qZA(),e._uU(39," Back "),e.qZA(),e.TgZ(40,"button",17),e.NdJ("click",function(){return a.create()}),e.TgZ(41,"mat-icon"),e._uU(42,"edit"),e.qZA(),e._uU(43," Submit "),e.qZA()()()()()()),2&t){let n,r,i,u;e.xp6(5),e.Q6J("formGroup",a.form),e.xp6(7),e.Q6J("ngIf",(null==(n=a.form.get("datasourceName"))?null:n.touched)&&(null==(n=a.form.get("datasourceName"))?null:n.invalid)),e.xp6(6),e.Q6J("ngIf",(null==(r=a.form.get("datasourceDesc"))?null:r.touched)&&(null==(r=a.form.get("datasourceDesc"))?null:r.invalid)),e.xp6(6),e.Q6J("ngIf",(null==(i=a.form.get("sourceType"))?null:i.touched)&&(null==(i=a.form.get("sourceType"))?null:i.invalid)),e.xp6(9),e.Q6J("ngForOf",a.countries),e.xp6(1),e.Q6J("ngIf",null==(u=a.form.get("companyCode"))?null:u.invalid)}},dependencies:[h.sg,h.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.sg,c.u,y.ey,b.lW,f.a8,f.n5,m.TO,m.KE,m.hX,S.Hw,w.Nt,D.gD,p.xw,p.SQ,p.Wh,p.yH,C.X$]}),o})();function Je(o,s){if(1&o&&(e.TgZ(0,"mat-option",14),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.companyCode),e.xp6(1),e.hij(" ",t.companyName," ")}}function Ye(o,s){if(1&o&&(e.TgZ(0,"mat-option",14),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.datasourceID),e.xp6(1),e.hij(" ",t.datasourceName," ")}}function Ie(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",15)(1,"mat-form-field",16)(2,"mat-label"),e._uU(3,"DataSource"),e.qZA(),e.TgZ(4,"mat-select",17),e.YNc(5,Ye,2,2,"mat-option",7),e.qZA()(),e.TgZ(6,"mat-form-field",18)(7,"mat-label"),e._uU(8,"Parameter Name"),e.qZA(),e._UZ(9,"input",19),e.qZA(),e.TgZ(10,"button",20),e.NdJ("click",function(){const r=e.CHM(t).index,i=e.oxw();return e.KtG(i.removeItem(r))}),e.TgZ(11,"mat-icon"),e._uU(12,"remove_circle"),e.qZA()()()}if(2&o){const t=s.index,a=e.oxw();e.Q6J("formGroupName",t),e.xp6(5),e.Q6J("ngForOf",a.datasourceList)}}let Oe=(()=>{class o{constructor(t,a,n,r,i,u,l,d,x){this.fb=t,this.dateAdapter=a,this.translate=n,this.router=r,this.encryptionService=i,this.toaster=u,this.localService=l,this.thirdPartyService=d,this.cdr=x,this.isLoading=!0,this.datasourceList=[],this.countries=[],this.form=this.fb.nonNullable.group({countryCode:["KE0010001",c.kI.required],items:this.fb.array([])})}ngOnInit(){this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)}),this.getDatasourceDetails(),this.getCountries()}ngOnDestroy(){this.translateSubscription.unsubscribe()}get items(){return this.form.get("items")}addItem(){this.items.push(this.fb.group({datasourceID:["",c.kI.required],paramName:["",[c.kI.required,c.kI.maxLength(50)]]}))}removeItem(t){this.items.removeAt(t)}getDatasourceDetails(){const a={userCode:this.localService.get("user-entity")?.username,operationName:"getDataSource",transactionType:"1008",countryCode:"KE0010001"};this.thirdPartyService.sendPayload(a,"").subscribe(r=>{const i=JSON.parse(r.data);if("0"!==i?.statusCode)return console.error(`Error: ${i?.statusCodeDesc}`),void(this.isLoading=!1);i?.datasources&&i.datasources.length>0&&(this.datasourceList=i.datasources,this.cdr.detectChanges()),this.isLoading=!1},r=>{console.error("Error fetching datasource details:",r),this.isLoading=!1})}getCountries(){console.log("inside get countries");const t=this.localService.get("user-entity");console.log(t);const a={userCode:t.username,operationName:"getCompanyCode",transactionType:"1005"},[n]="";this.thirdPartyService.sendPayload(a,n).subscribe(r=>{const i=JSON.parse(r.data);if(console.log("Response from service:",i),"0"!==i?.statusCode)return console.error(`Error: ${i?.statusCodeDesc}`),void(this.isLoading=!1);i?.companys&&i.companys.length>0?(this.countries=i.companys,this.isLoading=!1,this.cdr.detectChanges()):console.warn("No company data found in response."),this.isLoading=!1},r=>{console.error("Error fetching country details:",r),this.isLoading=!1})}create(){if(this.form.invalid)return this.form.markAllAsTouched(),void this.toaster.showError("Please fill out all required fields");if(!this.localService.get("user-entity")?.username)return void this.toaster.showError("User profile missing.");const a={transactionType:"1004",countryCode:this.form.value.countryCode,items:this.form.value.items},[n,r,i]=this.encryptionService.encryptData(a).split(":");this.thirdPartyService.sendPayload(a,n).subscribe(u=>{const l=JSON.parse(u.data);console.log(l),"0"===l.statusCode?(this.toaster.showSuccess("Saved datasource params successfully"),this.router.navigateByUrl("/Configurations/datasourceparams")):this.toaster.showError("Failed to save datasource params")},u=>{this.toaster.showError("An error occurred while processing the request.")})}return(){this.router.navigateByUrl("/Configurations/datasource")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(c.qu),e.Y36(y._A),e.Y36(C.sK),e.Y36(_.F0),e.Y36(T.w),e.Y36(U.M),e.Y36(Z.n2),e.Y36(q.q),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-datasource-params"]],decls:24,vars:3,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","24px","border","2px solid #304254","border-radius","8px"],[2,"font-size","24px","margin-bottom","12px","font-family","'Inter', sans-serif","color","#304254"],[1,"form-field-full",3,"formGroup"],["appearance","outline",2,"width","100%"],["formControlName","countryCode"],[3,"value",4,"ngFor","ngForOf"],["formArrayName","items"],["style","display: flex; align-items: center; margin-bottom: 8px;",3,"formGroupName",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],["fxLayout","row","fxLayoutAlign","space-between center",2,"margin-top","24px"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","font-size","14px",3,"click"],["mat-raised-button","",2,"background-color","#74C84D","color","white","font-size","14px",3,"click"],[3,"value"],[2,"display","flex","align-items","center","margin-bottom","8px",3,"formGroupName"],["appearance","outline",2,"width","45%","margin-right","8px"],["formControlName","datasourceID"],["appearance","outline",2,"width","45%"],["matInput","","placeholder","Param Name","formControlName","paramName"],["mat-icon-button","","color","warn",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title",3),e._uU(4," Create Param "),e.qZA(),e.TgZ(5,"form",4)(6,"mat-form-field",5)(7,"mat-label"),e._uU(8,"Country Code"),e.qZA(),e.TgZ(9,"mat-select",6),e.YNc(10,Je,2,2,"mat-option",7),e.qZA()(),e.TgZ(11,"div",8),e.YNc(12,Ie,13,2,"div",9),e.qZA(),e.TgZ(13,"button",10),e.NdJ("click",function(){return a.addItem()}),e._uU(14,"Add Item"),e.qZA(),e.TgZ(15,"div",11)(16,"button",12),e.NdJ("click",function(){return a.return()}),e.TgZ(17,"mat-icon"),e._uU(18,"arrow_back"),e.qZA(),e._uU(19," Back "),e.qZA(),e.TgZ(20,"button",13),e.NdJ("click",function(){return a.create()}),e.TgZ(21,"mat-icon"),e._uU(22,"edit"),e.qZA(),e._uU(23," Submit "),e.qZA()()()()()()),2&t&&(e.xp6(5),e.Q6J("formGroup",a.form),e.xp6(5),e.Q6J("ngForOf",a.countries),e.xp6(2),e.Q6J("ngForOf",a.items.controls))},dependencies:[h.sg,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,c.x0,c.CE,y.ey,b.lW,f.a8,f.n5,m.KE,m.hX,S.Hw,w.Nt,D.gD,p.xw,p.Wh,p.yH]}),o})();const Qe=["actionTemplate"],Ee=["statusTemplate"];function ze(o,s){if(1&o&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function je(o,s){if(1&o&&(e.TgZ(0,"button",19)(1,"mat-icon"),e._uU(2,"more_horiz"),e.qZA()(),e._UZ(3,"mat-menu",null,20)),2&o){const t=e.MAs(4);e.Q6J("matMenuTriggerFor",t)}}function Be(o,s){if(1&o&&(e.TgZ(0,"span",21),e._uU(1),e.qZA()),2&o){const t=s.$implicit,a=e.oxw();e.Q6J("ngStyle",a.getStatusColor(t.status)),e.xp6(1),e.hij(" ",t.status," ")}}const Ke=function(){return[5,10,20,50,100]};let Ge=(()=>{class o{constructor(t,a,n,r,i,u,l){this.remoteSrv=t,this.cdr=a,this.encryptionservice=n,this.router=r,this.translate=i,this.thirdPartyService=u,this.localService=l,this.columns=[],this.param=[],this.filters=[],this.selectedFilter="",this.list=[],this.paramList=[],this.total=0,this.isLoading=!0,this.query={q:"",sort:"",order:"",page:0,per_page:10}}ngAfterViewInit(){this.columns=[{header:"Name",field:"paramName"},{header:"Datasource Name",field:"datasourceName"},{header:"Created By",field:"createdBy"},{header:"Created On",field:"createdOn"}]}getStatusColor(t){switch(t){case"Active":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Inactive":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}get params(){const t=Object.assign({},this.query);return t.page+=1,t}ngOnInit(){this.getAllParams()}getAllParams(){const t=this.localService.get("user-entity");console.log(t);const a={userCode:t.username,operationName:"getParams",transactionType:"1009"},[n]="";this.thirdPartyService.sendPayload(a,n).subscribe(r=>{const i=JSON.parse(r.data);if("0"!==i?.statusCode)return console.error(`Error: ${i?.statusCodeDesc}`),void(this.isLoading=!1);i?.params&&i.params.length>0?(this.paramList=i.params,this.cdr.detectChanges()):console.warn("No parameters found in the response."),this.isLoading=!1},r=>{console.error("Error fetching parameters:",r),this.isLoading=!1})}delete(t){this.diag1.alert(`You have deleted ${t.position}!`)}viewDetailedRecord(t){var a=t?.id;a&&this.router.navigate(["/Configurations/manage-country",a])}create(){this.router.navigateByUrl("/Configurations/create-datasource-param")}getNextPage(t){this.query.page=t.pageIndex,this.query.per_page=t.pageSize}search(){this.query.page=0}onFilterChange(t){this.selectedFilter=t.value}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.K),e.Y36(e.sBO),e.Y36(T.w),e.Y36(_.F0),e.Y36(C.sK),e.Y36(q.q),e.Y36(Z.n2))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-datasource-param-list"]],viewQuery:function(t,a){if(1&t&&(e.Gf(Qe,7),e.Gf(Ee,7)),2&t){let n;e.iGM(n=e.CRH())&&(a.actionTemplate=n.first),e.iGM(n=e.CRH())&&(a.statusTemplate=n.first)}},decls:28,vars:12,consts:[[2,"border","1px solid #ccc","padding","16px"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"col"],[2,"margin","0"],[1,"d-flex","flex-wrap","align-items-center"],["mat-raised-button","",2,"background-color","#74C84D","color","white",3,"click"],[1,"d-flex","justify-content-between","w-100","flex-wrap"],["fxFlex","33.33%","fxFlex.lt-sm","100%",1,"px-2"],["appearance","outline",2,"width","100%"],["name","selectedFilter",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","39.34%","fxFlex.lt-sm","100%",1,"d-flex","justify-content-between","align-items-center","px-2"],["fxFlex","27.33%","fxFlex.lt-sm","100%",1,"px-2"],["matPrefix",""],["matInput","","name","q","placeholder","Search",3,"ngModel","ngModelChange"],[3,"data","columns","length","rowStriped","pageOnFront","pageIndex","pageSize","pageSizeOptions","rowClick","page"],["actionTemplate",""],["statusTemplate",""],[3,"value"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],[3,"ngStyle"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Param"),e.qZA()(),e.TgZ(5,"div",4)(6,"button",5),e.NdJ("click",function(){return a.create()}),e.TgZ(7,"mat-icon"),e._uU(8,"add_circle"),e.qZA(),e._uU(9," param "),e.qZA()()()(),e.TgZ(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),e._uU(14,"Select Filter"),e.qZA(),e.TgZ(15,"mat-select",9),e.NdJ("ngModelChange",function(r){return a.selectedFilter=r})("selectionChange",function(r){return a.onFilterChange(r)}),e.YNc(16,ze,2,2,"mat-option",10),e.qZA()()(),e._UZ(17,"div",11),e.TgZ(18,"div",12)(19,"mat-form-field",8)(20,"mat-icon",13),e._uU(21,"search"),e.qZA(),e.TgZ(22,"input",14),e.NdJ("ngModelChange",function(r){return a.query.q=r}),e.qZA()()()(),e.TgZ(23,"mtx-grid",15),e.NdJ("rowClick",function(r){return a.viewDetailedRecord(r)})("page",function(r){return a.getNextPage(r)}),e.qZA(),e.YNc(24,je,5,1,"ng-template",null,16,e.W1O),e.YNc(26,Be,2,2,"ng-template",null,17,e.W1O)),2&t&&(e.xp6(15),e.Q6J("ngModel",a.selectedFilter),e.xp6(1),e.Q6J("ngForOf",a.filters),e.xp6(6),e.Q6J("ngModel",a.query.q),e.xp6(1),e.Q6J("data",a.paramList)("columns",a.columns)("length",a.total)("rowStriped",!0)("pageOnFront",!1)("pageIndex",a.query.page)("pageSize",a.query.per_page)("pageSizeOptions",e.DdM(11,Ke)))},dependencies:[h.sg,h.PC,c.Fj,c.JJ,c.On,y.ey,b.lW,f.a8,m.KE,m.hX,m.qo,S.Hw,w.Nt,N.VK,N.p6,D.gD,F.CM,p.yH,L.Zl]}),o})();var A=g(53626),$e=g(80529),Re=g(52445);function He(o,s){if(1&o&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.scenarioID),e.xp6(1),e.hij(" ",t.scenarioName," ")}}function We(o,s){if(1&o&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.datasourceID),e.xp6(1),e.hij(" ",t.datasourceName," ")}}function Xe(o,s){if(1&o&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.datasourceID),e.xp6(1),e.hij(" ",t.datasourceName," ")}}function Ve(o,s){if(1&o&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.paramID),e.xp6(1),e.hij(" ",t.paramName," ")}}function et(o,s){if(1&o&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.paramID),e.xp6(1),e.hij(" ",t.paramName," ")}}function tt(o,s){1&o&&(e.TgZ(0,"mat-header-cell"),e._uU(1," Recon A "),e.qZA())}function at(o,s){if(1&o&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.xp6(1),e.hij(" ",(null==t||null==t.source1?null:t.source1.paramName)||"N/A"," ")}}function ot(o,s){1&o&&(e.TgZ(0,"mat-header-cell"),e._uU(1," Recon B "),e.qZA())}function rt(o,s){if(1&o&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.xp6(1),e.hij(" ",(null==t||null==t.source2?null:t.source2.paramName)||"N/A"," ")}}function nt(o,s){1&o&&(e.TgZ(0,"mat-header-cell"),e._uU(1," Actions "),e.qZA())}function it(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"button",26),e.NdJ("click",function(){const r=e.CHM(t).index,i=e.oxw();return e.KtG(i.removeMatch(r))}),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA()()()}}function st(o,s){1&o&&e._UZ(0,"mat-header-row")}function ct(o,s){1&o&&e._UZ(0,"mat-row")}function lt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",27)(1,"button",28),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.saveMatches())}),e.TgZ(2,"mat-icon"),e._uU(3,"save"),e.qZA(),e._uU(4," Save Matches "),e.qZA()()}}const ut=[{path:"countries",component:O},{path:"create-country",component:Q},{path:"use-case",component:oe},{path:"create-usecase",component:ce},{path:"Scenario",component:he},{path:"create-scenario",component:Te},{path:"datasource",component:De},{path:"create-datasource",component:ke},{path:"datasourceparams",component:Ge},{path:"create-datasource-param",component:Oe},{path:"matching-params",component:(()=>{class o{constructor(t,a,n,r,i,u,l){this.http=t,this.diag1=a,this.thirdPartyService=n,this.cdr=r,this.toaster=i,this.encryptionService=u,this.localService=l,this.scenarios=[],this.selectedScenario=null,this.dataSources=[],this.params=[],this.selectedDataSource1=null,this.selectedDataSource2=null,this.filteredParams1=[],this.filteredParams2=[],this.selectedParam1=null,this.selectedParam2=null,this.isLoading=!0,this.datasources=[],this.filteredParams=[],this.selectedDatasourceID="",this.scenarioList=[],this.matchedPairs=[],this.dataSource=new A.by(this.matchedPairs),this.displayedColumns=["reconA","reconB","actions"]}ngOnInit(){this.getDatasourceWithParams(),this.fetchAllScenarios()}getDatasourceWithParams(){const t=this.localService.get("user-entity");console.log(t);const a={userCode:t.username,operationName:"getDatasourcesParams",transactionType:"1012",countryCode:"KE0010001"},[n]="";this.thirdPartyService.sendPayload(a,n).subscribe(r=>{try{const i=r.data?"string"==typeof r.data?JSON.parse(r.data):r.data:null;if(console.log("Full Response:",i),"0"===i?.statusCode){this.datasources=i.datasources||[];const u=this.datasources.flatMap(l=>l.params||[]);console.log("All Params:",u)}else console.error(`Error: ${i?.statusCodeDesc||"Unknown error"}`)}catch(i){console.error("Error parsing response:",i)}},r=>console.error("Error fetching datasources:",r))}onDatasourceChange(){console.log("Selected DataSource ID:",this.selectedDatasourceID);const t=this.datasources.find(a=>a.datasourceID===this.selectedDatasourceID);if(!t)return console.warn("No matching datasource found!"),void(this.filteredParams=[]);this.filteredParams=t.params||[],console.log("Filtered Params:",this.filteredParams),this.cdr.detectChanges()}fetchAllScenarios(){const t=this.localService.get("user-entity");console.log(t);const a={userCode:t.username,operationName:"getUsecase",transactionType:"1003",countryCode:""},[n]="";this.thirdPartyService.sendPayload(a,n).subscribe(r=>{const i=JSON.parse(r.data);if("0"!==i?.statusCode)return console.error(`Error: ${i?.statusCodeDesc}`),void(this.isLoading=!1);i?.scenarios&&i.scenarios.length>0?(this.scenarioList=i.scenarios,this.cdr.detectChanges()):console.warn("No scenario data found in response."),this.isLoading=!1},r=>{console.error("Error fetching scenario details:",r),this.isLoading=!1})}onScenarioSelect(t){this.selectedScenario=t}onDataSourceSelect(t,a){console.log(`Datasource selected (${a}):`,t);const n=this.datasources.find(r=>r.datasourceID===t);if(!n)return console.warn(`No matching datasource found for ${a}!`),"source1"===a&&(this.filteredParams1=[]),void("source2"===a&&(this.filteredParams2=[]));"source1"===a?(this.filteredParams1=n.params||[],console.log("Filtered Params for Source 1:",this.filteredParams1)):"source2"===a&&(this.filteredParams2=n.params||[],console.log("Filtered Params for Source 2:",this.filteredParams2)),this.cdr.detectChanges()}onParamSelect(t,a){let n;console.log(`onParamSelect called with paramId: ${t}, type: ${a}`),console.log("filteredParams1:",this.filteredParams1),console.log("filteredParams2:",this.filteredParams2),n="source1"===a?this.filteredParams1.find(r=>r.paramID===t):this.filteredParams2.find(r=>r.paramID===t),n?(console.log(`Found Param for ${a}:`,n),"source1"===a?this.selectedParam1={...n}:this.selectedParam2={...n},console.log("Stored selectedParam1:",this.selectedParam1),console.log("Stored selectedParam2:",this.selectedParam2)):console.warn(`Warning: Selected parameter for ${a} not found! ID:`,t)}addMatch(){if(this.selectedParam1&&this.selectedParam2){if(console.log("Selected Param 1:",this.selectedParam1),console.log("Selected Param 2:",this.selectedParam2),!this.selectedParam1.paramName||!this.selectedParam2.paramName)return void console.error("One or both selected params are missing 'paramName':",this.selectedParam1,this.selectedParam2);if(this.matchedPairs.some(a=>a.source1.paramID===this.selectedParam1.paramID&&a.source2.paramID===this.selectedParam2.paramID||a.source1.paramID===this.selectedParam2.paramID&&a.source2.paramID===this.selectedParam1.paramID))return console.warn("This match already exists."),void this.diag1.alert("This match already exists.!");this.matchedPairs.push({source1:{...this.selectedParam1},source2:{...this.selectedParam2}}),console.log("Updated Matched Pairs:",JSON.stringify(this.matchedPairs,null,2)),this.dataSource=new A.by(this.matchedPairs),this.selectedParam1=null,this.selectedParam2=null}}removeMatch(t){this.matchedPairs.splice(t,1),this.dataSource=new A.by(this.matchedPairs)}saveMatches(){if(!this.selectedScenario)return void console.warn("No scenario selected.");const a={operationName:"createMatchRules",transactionType:"1007",userCode:this.localService.get("user-entity").username,companyCode:"KE0010001",matchingCounter:"1",items:this.matchedPairs.flatMap((l,d)=>{const x=(d+1).toString();return[{scenarioID:this.selectedScenario,paramID:l.source1.paramID,datasourceID:l.source1.dataSourceId,dimension:"A",matchingCounter:x},{scenarioID:this.selectedScenario,paramID:l.source2.paramID,datasourceID:l.source2.dataSourceId,dimension:"B",matchingCounter:x}]})},n=this.encryptionService.encryptData(a),[r,i,u]=n.split(":");this.thirdPartyService.sendPayload(a,r).subscribe(l=>{const d=JSON.parse(l.data);console.log(d),"0"===d.statusCode?(this.toaster.showSuccess("Saved matching rules successfully"),this.selectedScenario=null,this.matchedPairs=[]):this.toaster.showError("Failed to save matching rules")},l=>{this.toaster.showError("An error occurred while processing the request.")})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36($e.eN),e.Y36(Re.cP),e.Y36(q.q),e.Y36(e.sBO),e.Y36(U.M),e.Y36(T.w),e.Y36(Z.n2))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-matching-params"]],decls:56,vars:12,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","24px","border","2px solid #304254","border-radius","8px"],[2,"font-size","24px","margin-bottom","12px","font-family","'Inter', sans-serif","color","#304254"],["fxLayout","row wrap","fxLayoutGap","16px grid",2,"margin-bottom","16px"],["fxFlex","100"],["appearance","outline",2,"width","100%"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex","50","fxFlex.lt-sm","100"],[3,"ngModel","ngModelChange","selectionChange"],["fxLayout","row wrap","fxLayoutGap","16px grid",2,"margin-top","16px"],[3,"selectionChange"],["fxLayout","row","fxLayoutAlign","center center",2,"margin-top","16px"],["mat-raised-button","","color","primary",2,"width","200px",3,"click"],[1,"mat-elevation-z4",2,"margin-top","20px","width","100%",3,"dataSource"],["matColumnDef","reconA"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","reconB"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["fxLayout","row","fxLayoutAlign","center center","style","margin-top: 24px;",4,"ngIf"],[3,"value"],["mat-icon-button","","color","warn",3,"click"],["fxLayout","row","fxLayoutAlign","center center",2,"margin-top","24px"],["mat-raised-button","","color","accent",2,"width","200px",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title",3),e._uU(4," Matching Parameters "),e.qZA(),e.TgZ(5,"div",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),e._uU(9,"Scenario"),e.qZA(),e.TgZ(10,"mat-select",7),e.NdJ("ngModelChange",function(r){return a.selectedScenario=r}),e.YNc(11,He,2,2,"mat-option",8),e.qZA()()()(),e.TgZ(12,"div",9)(13,"div",10)(14,"mat-form-field",6)(15,"mat-label"),e._uU(16,"Datasource 1"),e.qZA(),e.TgZ(17,"mat-select",11),e.NdJ("ngModelChange",function(r){return a.selectedDataSource1=r})("selectionChange",function(r){return a.onDataSourceSelect(r.value,"source1")}),e.YNc(18,We,2,2,"mat-option",8),e.qZA()()(),e.TgZ(19,"div",10)(20,"mat-form-field",6)(21,"mat-label"),e._uU(22,"Datasource 2"),e.qZA(),e.TgZ(23,"mat-select",11),e.NdJ("ngModelChange",function(r){return a.selectedDataSource2=r})("selectionChange",function(r){return a.onDataSourceSelect(r.value,"source2")}),e.YNc(24,Xe,2,2,"mat-option",8),e.qZA()()()(),e.TgZ(25,"div",12)(26,"div",10)(27,"mat-form-field",6)(28,"mat-label"),e._uU(29,"Parameter"),e.qZA(),e.TgZ(30,"mat-select",13),e.NdJ("selectionChange",function(r){return a.onParamSelect(r.value,"source1")}),e.YNc(31,Ve,2,2,"mat-option",8),e.qZA()()(),e.TgZ(32,"div",10)(33,"mat-form-field",6)(34,"mat-label"),e._uU(35,"Parameter"),e.qZA(),e.TgZ(36,"mat-select",13),e.NdJ("selectionChange",function(r){return a.onParamSelect(r.value,"source2")}),e.YNc(37,et,2,2,"mat-option",8),e.qZA()()()(),e.TgZ(38,"div",14)(39,"button",15),e.NdJ("click",function(){return a.addMatch()}),e.TgZ(40,"mat-icon"),e._uU(41,"add"),e.qZA(),e._uU(42," Add Match "),e.qZA()(),e.TgZ(43,"mat-table",16),e.ynx(44,17),e.YNc(45,tt,2,0,"mat-header-cell",18),e.YNc(46,at,2,1,"mat-cell",19),e.BQk(),e.ynx(47,20),e.YNc(48,ot,2,0,"mat-header-cell",18),e.YNc(49,rt,2,1,"mat-cell",19),e.BQk(),e.ynx(50,21),e.YNc(51,nt,2,0,"mat-header-cell",18),e.YNc(52,it,4,0,"mat-cell",19),e.BQk(),e.YNc(53,st,1,0,"mat-header-row",22),e.YNc(54,ct,1,0,"mat-row",23),e.qZA(),e.YNc(55,lt,5,0,"div",24),e.qZA()()()),2&t&&(e.xp6(10),e.Q6J("ngModel",a.selectedScenario),e.xp6(1),e.Q6J("ngForOf",a.scenarioList),e.xp6(6),e.Q6J("ngModel",a.selectedDataSource1),e.xp6(1),e.Q6J("ngForOf",a.datasources),e.xp6(5),e.Q6J("ngModel",a.selectedDataSource2),e.xp6(1),e.Q6J("ngForOf",a.datasources),e.xp6(7),e.Q6J("ngForOf",a.filteredParams1),e.xp6(6),e.Q6J("ngForOf",a.filteredParams2),e.xp6(6),e.Q6J("dataSource",a.dataSource),e.xp6(10),e.Q6J("matHeaderRowDef",a.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumns),e.xp6(1),e.Q6J("ngIf",a.matchedPairs.length>0))},dependencies:[h.sg,h.O5,c.JJ,c.On,y.ey,b.lW,f.a8,f.n5,m.KE,m.hX,S.Hw,D.gD,A.BZ,A.fO,A.as,A.w1,A.Dz,A.nj,A.ge,A.ev,A.XQ,A.Gk,p.xw,p.SQ,p.Wh,p.yH],styles:[".match-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;padding:20px;background:white;border-radius:10px;max-width:600px;margin:auto}.dropdown-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:20px}table[_ngcontent-%COMP%]{width:100%;margin-top:20px}mat-header-cell[_ngcontent-%COMP%], mat-cell[_ngcontent-%COMP%]{padding:10px}mat-list-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px}"]}),o})()}];let dt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[_.Bz.forChild(ut),_.Bz]}),o})();g(65938),g(56709);let yt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[Z.m8,dt]}),o})()}}]);