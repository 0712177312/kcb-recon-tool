"use strict";(self.webpackChunkng_matero=self.webpackChunkng_matero||[]).push([[797],{1797:(Tt,D,b)=>{b.r(D),b.d(D,{HierarchyManagementModule:()=>Ct});var _=b(19132),A=b(1999),y=b(80529),Q=b(92340),e=b(94650);let x=(()=>{class a{constructor(t){this.http=t,this.apiUrl=Q.N.apiUrl}getRegions(t,i){const n=new y.WM({key:t});return this.http.post(this.apiUrl+"Regions/Filtered?encrypted=true",i,{headers:n,responseType:"text"})}getAllRegions(t,i){const n=new y.WM({key:t});return this.http.post(this.apiUrl+"Regions/Filtered?encrypted=true",i,{headers:n,responseType:"text"})}getAllmodifiedRegions(t,i){const n=new y.WM({key:t});return this.http.post(this.apiUrl+"Regions/ModificationsReviewList?encrypted=true",i,{headers:n,responseType:"text"})}getAllmodifiedBranches(t,i){const n=new y.WM({key:t});return this.http.post(this.apiUrl+"Branches/ModificationsReviewList?encrypted=true",i,{headers:n,responseType:"text"})}getBranches(t,i){const n=new y.WM({key:t});return this.http.post(this.apiUrl+"Branches/Filtered?encrypted=true",i,{headers:n,responseType:"text"})}getRegionsforApproval(t,i){const n=new y.WM({key:t});return this.http.post(this.apiUrl+"Regions/ReviewList?encrypted=true",i,{headers:n,responseType:"text"})}getBranchesforApproval(t,i){const n=new y.WM({key:t});return this.http.post(this.apiUrl+"Branches/ReviewList?encrypted=true",i,{headers:n,responseType:"text"})}getBranchesmodificationforApproval(t,i){const n=new y.WM({key:t});return this.http.post(this.apiUrl+"Branches/ModificationsReviewList?encrypted=true",i,{headers:n,responseType:"text"})}getRoles(t,i){const n=new y.WM({key:t});return this.http.post(this.apiUrl+"Roles/FilteredRoles?encrypted=true",i,{headers:n,responseType:"text"})}getRolesReviewList(t,i){const n=new y.WM({key:t});return this.http.post(this.apiUrl+"Roles/ReviewList?encrypted=true",i,{headers:n,responseType:"text"})}addhierarchy(t,i){const n=new y.WM({key:i});return this.http.post(`${this.apiUrl}Regions/Add?encrypted=true`,t,{headers:n,responseType:"text"})}approveRejectRegion(t,i){const n=new y.WM({key:i});return this.http.post(`${this.apiUrl}Regions/ApproveReject?encrypted=true`,t,{headers:n,responseType:"text"})}approveRejectRegionEdit(t,i){const n=new y.WM({key:i});return this.http.post(`${this.apiUrl}Regions/ApproveRejectEdit?encrypted=true`,t,{headers:n,responseType:"text"})}allRegions(t){const i=new y.WM({key:t});return this.http.get(this.apiUrl+"Regions/All",{headers:i,responseType:"text"})}activateDeactivateRole(t,i){const n=new y.WM({key:i});return this.http.post(`${this.apiUrl}Roles/ActivateDeactivate?encrypted=true`,t,{headers:n,responseType:"text"})}updateRegion(t,i){const n=new y.WM({key:i});return this.http.put(`${this.apiUrl}Regions/Update?encrypted=true`,t,{headers:n,responseType:"text"})}getRegionById(t,i){const n=new y.WM({key:i});return this.http.get(this.apiUrl+"Regions/FindById?id="+t,{headers:n,responseType:"text"})}getRegionDetails(t,i){const n=new y.WM({key:i});return this.http.get(this.apiUrl+"Regions/FindById?id="+t,{headers:n,responseType:"text"})}getBranchDetails(t,i){const n=new y.WM({key:i});return this.http.get(this.apiUrl+"Branches/FindById?id="+t,{headers:n,responseType:"text"})}allRegionsByCountry(t,i){const n=new y.WM({key:t});return this.http.get(this.apiUrl+"Regions/FindByCountry?id="+i,{headers:n,responseType:"text"})}addBranch(t,i){const n=new y.WM({key:i});return this.http.post(`${this.apiUrl}Branches/Add?encrypted=true`,t,{headers:n,responseType:"text"})}getBranchById(t,i){const n=new y.WM({key:i});return this.http.get(this.apiUrl+"Branches/FindById?id="+t,{headers:n,responseType:"text"})}getBranchesByOrg(t,i){const n=new y.WM({key:i});return this.http.get(this.apiUrl+"Branches/FindByOrg?id="+t,{headers:n,responseType:"text"})}approveRejectBranch(t,i){const n=new y.WM({key:i});return this.http.post(`${this.apiUrl}Branches/ApproveReject?encrypted=true`,t,{headers:n,responseType:"text"})}approveRejectBranchEdit(t,i){const n=new y.WM({key:i});return this.http.post(`${this.apiUrl}Branches/ApproveRejectEdit?encrypted=true`,t,{headers:n,responseType:"text"})}updateBranch(t,i){const n=new y.WM({key:i});return this.http.put(`${this.apiUrl}Branches/Update?encrypted=true`,t,{headers:n,responseType:"text"})}getHierarchyData(t,i){const n=new y.WM({key:i});return this.http.get(this.apiUrl+"Branches/FindById?id="+t,{headers:n,responseType:"text"})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(y.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var C=b(77613),Z=b(13081),g=b(65938),M=b(52445),w=b(36895),o=b(24006),R=b(3238),T=b(4859),v=b(73546),u=b(59549),q=b(97392),k=b(284),U=b(28255),N=b(84385),z=b(71195),m=b(1576),Y=b(55829);const E=["actionTemplate"],K=["statusTemplate"];function G(a,s){if(1&a&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function W(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",21)(1,"mat-icon"),e._uU(2,"more_horiz"),e.qZA()(),e.TgZ(3,"mat-menu",null,22)(5,"button",23),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.viewDetailedRecord(r))}),e.TgZ(6,"mat-icon",24),e._uU(7,"edit"),e.qZA(),e._uU(8," Edit "),e.qZA()()}if(2&a){const t=e.MAs(4);e.Q6J("matMenuTriggerFor",t)}}function V(a,s){if(1&a&&(e.TgZ(0,"span",25),e._uU(1),e.qZA()),2&a){const t=s.$implicit,i=e.oxw();e.Q6J("ngStyle",i.getStatusColor(t.status)),e.xp6(1),e.hij(" ",t.status," ")}}const P=function(){return[5,10,20,50,100]};let I=(()=>{class a{constructor(t,i,n,r,c,d,l,p){this.remoteSrv=t,this.cdr=i,this.encryptionservice=n,this.router=r,this.translate=c,this.dialog=d,this.diag1=l,this.localStorage=p,this.columns=[],this.filters=[],this.selectedFilter="",this.list=[],this.total=0,this.isLoading=!0,this.query={q:"",sort:"",order:"",page:0,per_page:10}}ngAfterViewInit(){this.columns=[{header:this.translate.stream("regions_table.number"),field:"rowNumber",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.country"),field:"region.organization.country.name",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.organization"),field:"region.organization.name",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.region_name"),field:"region.name",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.branch_name"),field:"name",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.created_by"),field:"createdBy",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.created_date"),field:"createdOn",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.status1"),field:"status",width:"auto",cellTemplate:this.statusTemplate,resizable:!0},{header:this.translate.stream("users_table.actions"),field:"actions",cellTemplate:this.actionTemplate}]}getStatusColor(t){switch(t){case"Active":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Inactive":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}get params(){const t=Object.assign({},this.query);return t.page+=1,t}ngOnInit(){this.getRegions()}delete(t){this.diag1.alert(`You have deleted ${t.position}!`)}getRegions(){const i=this.localStorage.get("user-entity")?.organization?.id,r=this.encryptionservice.encryptData({status:this.selectedFilter,page:this.query.page,size:this.query.per_page,organization:i,region:this.region}),c=r.split(":")[2],d=r.split(":")[1],l=r.split(":")[0];this.remoteSrv.getBranches(l,d).subscribe(p=>{const h=JSON.parse(p),f=this.encryptionservice.decryptData(h?.body,c);this.list=f.data.map((S,B)=>({...S,rowNumber:this.query.page*this.query.per_page+B+1})),this.total=f.data.total,this.filters=f.statuses,this.isLoading=!1,this.cdr.detectChanges()},p=>{console.error("Error fetching roles:",p),this.isLoading=!1})}viewDetailedRecord(t){var i=t?.id;i&&this.router.navigate(["/admin-configurations/view-hierarachy",i])}create(){this.router.navigateByUrl("/admin-configurations/add-hierarchy")}createBranch(){this.router.navigateByUrl("/admin-configurations/create-branch")}getNextPage(t){this.query.page=t.pageIndex,this.query.per_page=t.pageSize,this.getRegions()}search(){this.query.page=0,this.getRegions()}onFilterChange(t){this.selectedFilter=t.value,this.getRegions()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(x),e.Y36(e.sBO),e.Y36(A.w),e.Y36(_.F0),e.Y36(Z.sK),e.Y36(g.uw),e.Y36(M.cP),e.Y36(C.n2))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-hierarchy-list"]],viewQuery:function(t,i){if(1&t&&(e.Gf(E,7),e.Gf(K,7)),2&t){let n;e.iGM(n=e.CRH())&&(i.actionTemplate=n.first),e.iGM(n=e.CRH())&&(i.statusTemplate=n.first)}},features:[e._Bn([x])],decls:34,vars:13,consts:[[2,"border","1px solid #ccc","padding","16px"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"col"],[2,"margin","0"],[1,"d-flex","flex-wrap","align-items-center"],["mat-raised-button","",2,"background-color","#74C84D","color","white","margin-right","8px",3,"click"],["mat-raised-button","",2,"background-color","#74C84D","color","white",3,"click"],[1,"d-flex","justify-content-between","w-100","flex-wrap"],["fxFlex","33.33%","fxFlex.lt-sm","100%",1,"px-2"],["appearance","outline",2,"width","100%"],["name","selectedFilter",3,"ngModel","ngModelChange","selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["fxFlex","39.34%","fxFlex.lt-sm","100%",1,"d-flex","justify-content-between","align-items-center","px-2"],["fxFlex","27.33%","fxFlex.lt-sm","100%",1,"px-2"],["matPrefix",""],["matInput","","name","q","placeholder","Search",3,"ngModel","ngModelChange"],[3,"data","columns","length","loading","rowStriped","pageOnFront","pageIndex","pageSize","pageSizeOptions","page"],["actionTemplate",""],["statusTemplate",""],[3,"value"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["color","primary"],[3,"ngStyle"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Hierarchy Management"),e.qZA()(),e.TgZ(5,"div",4)(6,"button",5),e.NdJ("click",function(){return i.createBranch()}),e.TgZ(7,"mat-icon"),e._uU(8,"add_circle"),e.qZA(),e._uU(9," Branch "),e.qZA(),e.TgZ(10,"button",6),e.NdJ("click",function(){return i.create()}),e.TgZ(11,"mat-icon"),e._uU(12,"add_circle"),e.qZA(),e._uU(13," Region "),e.qZA()()()(),e.TgZ(14,"div",7)(15,"div",8)(16,"mat-form-field",9)(17,"mat-label"),e._uU(18,"Select Filter"),e.qZA(),e.TgZ(19,"mat-select",10),e.NdJ("ngModelChange",function(r){return i.selectedFilter=r})("selectionChange",function(r){return i.onFilterChange(r)}),e.TgZ(20,"mat-option",11),e._uU(21,"All"),e.qZA(),e.YNc(22,G,2,2,"mat-option",12),e.qZA()()(),e._UZ(23,"div",13),e.TgZ(24,"div",14)(25,"mat-form-field",9)(26,"mat-icon",15),e._uU(27,"search"),e.qZA(),e.TgZ(28,"input",16),e.NdJ("ngModelChange",function(r){return i.query.q=r}),e.qZA()()()(),e.TgZ(29,"mtx-grid",17),e.NdJ("page",function(r){return i.getNextPage(r)}),e.qZA(),e.YNc(30,W,9,1,"ng-template",null,18,e.W1O),e.YNc(32,V,2,2,"ng-template",null,19,e.W1O)),2&t&&(e.xp6(19),e.Q6J("ngModel",i.selectedFilter),e.xp6(3),e.Q6J("ngForOf",i.filters),e.xp6(6),e.Q6J("ngModel",i.query.q),e.xp6(1),e.Q6J("data",i.list)("columns",i.columns)("length",i.total)("loading",i.isLoading)("rowStriped",!0)("pageOnFront",!0)("pageIndex",i.query.page)("pageSize",i.query.per_page)("pageSizeOptions",e.DdM(12,P)))},dependencies:[w.sg,w.PC,o.Fj,o.JJ,o.On,R.ey,T.lW,v.a8,u.KE,u.hX,u.qo,q.Hw,k.Nt,U.VK,U.OP,U.p6,N.gD,z.CM,m.yH,Y.Zl]}),a})();var F=b(69140);function X(a,s){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function $(a,s){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function ee(a,s){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function te(a,s){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}let L=(()=>{class a{constructor(t,i,n,r,c,d,l,p){this.fb=t,this.dateAdapter=i,this.translate=n,this.router=r,this.encryptionService=c,this.toaster=d,this.hierarchyService=l,this.storageService=p,this.q={username:"",email:"",gender:""},this.Form=this.fb.nonNullable.group({user:[""],country:[""],name:["",[o.kI.required,o.kI.maxLength(50)]],code:["",[o.kI.required,o.kI.maxLength(5)]],organization:["",[o.kI.required,o.kI.maxLength(30)]]})}ngOnInit(){this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)}),this.userProfile=this.storageService.get("user-entity"),this.Form.patchValue({country:this.userProfile?.organization.country.name||"",organization:this.userProfile?.organization.name||"",user:this.userProfile?.username||""})}ngOnDestroy(){this.translateSubscription.unsubscribe()}getErrorMessage(t){return t.get("email")?.hasError("required")?"validations.required":t.get("email")?.hasError("email")?"validations.invalid_email":""}return(){this.router.navigateByUrl("/admin-configurations/region-list")}addOrganization(){const t=this.storageService.get("user-entity");this.Form.value.user=t.username;const i=this.Form.value,r=this.encryptionService.encryptData({name:i.name,organization:this.userProfile?.organization?.id,user:i.user,code:i.code,status:!1}),c=r.split(":")[0],d=r.split(":")[1],l=r.split(":")[2];this.hierarchyService.addhierarchy(d,c).subscribe(p=>{const h=JSON.parse(p);if(200==h.code||201==h.code){const f=this.encryptionService.decryptData(h.body,l);f&&(this.toaster.showSuccess(f?.message),this.return())}else this.toaster.showError(h?.body?.message)})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(o.qu),e.Y36(R._A),e.Y36(Z.sK),e.Y36(_.F0),e.Y36(A.w),e.Y36(F.M),e.Y36(x),e.Y36(C.n2))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-add-hierarchy"]],decls:39,vars:5,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","16px"],[2,"font-size","24px","margin-bottom","4px","font-family","'Inter', sans-serif","color","#304254"],[2,"font-weight","normal","opacity","0.6","margin-top","0","padding","0"],[1,"form-field-full",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex","33.33","fxFlex.lt-sm","100"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","placeholder","Organization","formControlName","organization","required","",2,"font-size","16px"],[4,"ngIf"],["matInput","","placeholder","Country","formControlName","country","required","",2,"font-size","16px"],["matInput","","placeholder","code","formControlName","code","required","",2,"font-size","16px"],["matInput","","placeholder","Name","formControlName","name","required","",2,"font-size","16px"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","padding","4px 10px","font-size","18px","min-width","39px","height","40px","margin-bottom","16px",3,"click"],["mat-raised-button","",1,"m-t-8",2,"background-color","#74C84D","color","white","padding","4px 10px","font-size","18px","min-width","39px","height","40px","margin-bottom","16px","margin-left","6px",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title",3),e._uU(4," Add New Region "),e.qZA(),e.TgZ(5,"h3",4),e._uU(6,"Add Region"),e.qZA(),e.TgZ(7,"form",5)(8,"div",6)(9,"div",7)(10,"mat-form-field",8)(11,"mat-label",9),e._uU(12,"Organization"),e.qZA(),e._UZ(13,"input",10),e.YNc(14,X,3,3,"mat-error",11),e.qZA()(),e.TgZ(15,"div",7)(16,"mat-form-field",8)(17,"mat-label",9),e._uU(18,"Country"),e.qZA(),e._UZ(19,"input",12),e.YNc(20,$,3,3,"mat-error",11),e.qZA()(),e.TgZ(21,"div",7)(22,"mat-form-field",8)(23,"mat-label",9),e._uU(24," Code"),e.qZA(),e._UZ(25,"input",13),e.YNc(26,ee,3,3,"mat-error",11),e.qZA()(),e.TgZ(27,"div",7)(28,"mat-form-field",8)(29,"mat-label",9),e._uU(30,"Region Name"),e.qZA(),e._UZ(31,"input",14),e.YNc(32,te,3,3,"mat-error",11),e.qZA()()(),e.TgZ(33,"button",15),e.NdJ("click",function(){return i.return()}),e.TgZ(34,"mat-icon"),e._uU(35,"arrow_back"),e.qZA(),e._uU(36," Back "),e.qZA(),e.TgZ(37,"button",16),e.NdJ("click",function(){return i.addOrganization()}),e._uU(38," Add"),e.qZA()()()()()),2&t){let n,r,c,d;e.xp6(7),e.Q6J("formGroup",i.Form),e.xp6(7),e.Q6J("ngIf",null==(n=i.Form.get("organization"))?null:n.invalid),e.xp6(6),e.Q6J("ngIf",null==(r=i.Form.get("country"))?null:r.invalid),e.xp6(6),e.Q6J("ngIf",null==(c=i.Form.get("code"))?null:c.invalid),e.xp6(6),e.Q6J("ngIf",null==(d=i.Form.get("name"))?null:d.invalid)}},dependencies:[w.O5,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u,T.lW,v.a8,v.n5,u.TO,u.KE,u.hX,q.Hw,k.Nt,m.xw,m.SQ,m.yH,Z.X$]}),a})();var O=b(56709);function ie(a,s){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function ne(a,s){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function ae(a,s){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}let j=(()=>{class a{constructor(t,i,n,r,c,d,l,p,h,f){this.service=t,this.encryptionService=i,this.route=n,this.fb=r,this.dateAdapter=c,this.translate=d,this.router=l,this.toaster=p,this.dialog=h,this.localService=f,this.isLoading=!0,this.form=this.fb.nonNullable.group({name:["",[o.kI.required,o.kI.maxLength(50)]],user:[""],status:[!1],country:[""],code:[""],organization:[""]})}ngOnDestroy(){this.translateSubscription.unsubscribe()}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.getRegionDetails(),this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)})}getRegionDetails(){const t=this.encryptionService.generateAesKey(),i=this.encryptionService.generatebase64Key(t),n=this.encryptionService.encryptWithRSA(i);this.service.getRegionById(this.id,n).subscribe(r=>{const c=JSON.parse(r);this.details=this.encryptionService.decryptData(c?.body,i),this.details&&(this.details=this.details,this.form.patchValue({name:this.details?.name||"",country:this.details?.organization.country.name||"",organization:this.details?.organization.name||"",code:this.details?.code||"",status:"Active"==this.details?.status})),this.isLoading=!1},r=>{this.isLoading=!1})}toggleStatus(t){this.form.get("status")?.setValue(t.checked)}return(){this.router.navigateByUrl("/admin-configurations/region-list")}update(){const t=this.localService.get("user-entity"),i={id:this.id,user:this.localService.get("user-entity")?.username,name:this.form.value.name,code:this.form.value.code,organization:t.organization.id,status:this.form.value.status},n=this.encryptionService.encryptData(i),r=n.split(":")[0],c=n.split(":")[1],d=n.split(":")[2];this.service.updateRegion(c,r).subscribe(l=>{const p=JSON.parse(l);if(200==p.code||201==p.code){const h=this.encryptionService.decryptData(p.body,d);h&&(this.toaster.showSuccess(h?.message),this.return())}else this.toaster.showError(p?.body?.message)})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(x),e.Y36(A.w),e.Y36(_.gz),e.Y36(o.qu),e.Y36(R._A),e.Y36(Z.sK),e.Y36(_.F0),e.Y36(F.M),e.Y36(g.uw),e.Y36(C.n2))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-manage-hierarchy"]],decls:42,vars:5,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","24px","border","2px solid #304254","border-radius","8px"],[2,"font-size","24px","margin-bottom","12px","font-family","'Inter', sans-serif","color","#304254"],[1,"form-field-full",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex","33.33","fxFlex.lt-sm","100"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","placeholder","Organization name","formControlName","organization","readonly","",2,"font-size","16px"],[4,"ngIf"],["matInput","","placeholder","Country","formControlName","country","readonly","",2,"font-size","16px"],["matInput","","placeholder","Region Nam","formControlName","name","required","",2,"font-size","16px"],["required","","matInput","","placeholder","Code","formControlName","code",2,"font-size","16px"],["app","","formControlName","status",2,"font-size","16px","padding-top","20px","padding-bottom","20px",3,"checked","change"],[1,"d-flex","justify-content-between","flex-wrap",2,"margin-top","24px"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","font-size","14px","margin-right","10px",3,"click"],["mat-raised-button","",2,"background-color","#74C84D","color","white","font-size","14px","margin-right","10px",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title",3),e._uU(4," Manage Regions "),e.qZA(),e.TgZ(5,"form",4)(6,"div",5)(7,"div",6)(8,"mat-form-field",7)(9,"mat-label",8),e._uU(10,"Organization Name"),e.qZA(),e._UZ(11,"input",9),e.YNc(12,ie,3,3,"mat-error",10),e.qZA()(),e.TgZ(13,"div",6)(14,"mat-form-field",7)(15,"mat-label",8),e._uU(16,"Country"),e.qZA(),e._UZ(17,"input",11),e.YNc(18,ne,3,3,"mat-error",10),e.qZA()(),e.TgZ(19,"div",6)(20,"mat-form-field",7)(21,"mat-label",8),e._uU(22,"Region Name"),e.qZA(),e._UZ(23,"input",12),e.YNc(24,ae,3,3,"mat-error",10),e.qZA()(),e.TgZ(25,"div",6)(26,"mat-form-field",7)(27,"mat-label",8),e._uU(28,"Code"),e.qZA(),e._UZ(29,"input",13),e.qZA()(),e.TgZ(30,"div",6)(31,"mat-checkbox",14),e.NdJ("change",function(r){return i.toggleStatus(r)}),e._uU(32," Activate/Deactivate "),e.qZA()()(),e.TgZ(33,"div",15)(34,"button",16),e.NdJ("click",function(){return i.return()}),e.TgZ(35,"mat-icon"),e._uU(36,"arrow_back"),e.qZA(),e._uU(37," Back "),e.qZA(),e.TgZ(38,"button",17),e.NdJ("click",function(){return i.update()}),e.TgZ(39,"mat-icon"),e._uU(40,"edit"),e.qZA(),e._uU(41," Submit "),e.qZA()()()()()()),2&t){let n,r,c,d;e.xp6(5),e.Q6J("formGroup",i.form),e.xp6(7),e.Q6J("ngIf",null==(n=i.form.get("organization"))?null:n.invalid),e.xp6(6),e.Q6J("ngIf",null==(r=i.form.get("country"))?null:r.invalid),e.xp6(6),e.Q6J("ngIf",null==(c=i.form.get("name"))?null:c.invalid),e.xp6(7),e.Q6J("checked",null==(d=i.form.get("status"))?null:d.value)}},dependencies:[w.O5,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u,T.lW,v.a8,v.n5,O.oG,u.TO,u.KE,u.hX,q.Hw,k.Nt,m.xw,m.SQ,m.yH,Z.X$]}),a})(),re=(()=>{class a{constructor(t,i,n,r,c,d,l){this.data=t,this.dialogRef=i,this.router=n,this.localStorage=r,this.hierarchyservice=c,this.encryptionService=d,this.toaster=l}ngOnInit(){}onReview(){this.dialogRef.close("review"),this.router.navigate(["/admin-configurations/hierarchy",this.data?.id])}onApprove(){const t={recordId:this.data.id,checkerName:this.localStorage.get("user-entity")?.username,remarks:"",approve:!0},i=this.encryptionService.encryptData(t),n=i.split(":")[0],r=i.split(":")[1],c=i.split(":")[2];this.hierarchyservice.approveRejectRegion(r,n).subscribe(d=>{const l=JSON.parse(d);if(200==l.code||201==l.code){const p=this.encryptionService.decryptData(l?.body,c);p&&(this.toaster.showSuccess(p?.message),this.dialogRef.close("approve"))}else this.toaster.showError(l?.body?.message)})}onClose(){this.dialogRef.close()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(g.WI),e.Y36(g.so),e.Y36(_.F0),e.Y36(C.n2),e.Y36(x),e.Y36(A.w),e.Y36(F.M))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-approve-regionshierarchy"]],decls:23,vars:1,consts:[["mat-dialog-title","",2,"display","flex","justify-content","space-between","align-items","center"],[2,"flex","1","font-size","20px"],["mat-icon-button","","aria-label","Close dialog",2,"margin","0",3,"click"],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-stroked-button","","color","warn",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2,"Approve Region"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return i.onClose()}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA()()(),e.TgZ(6,"div",3)(7,"p"),e._uU(8,"Are you sure you want to Approve "),e.TgZ(9,"strong"),e._uU(10),e.qZA(),e._uU(11,"? Click "),e.TgZ(12,"strong"),e._uU(13,"Approve Region"),e.qZA(),e._uU(14," to Approve or "),e.TgZ(15,"strong"),e._uU(16,"Review Region"),e.qZA(),e._uU(17," to view Region details. "),e.qZA()(),e.TgZ(18,"div",4)(19,"button",5),e.NdJ("click",function(){return i.onReview()}),e._uU(20,"Review Region"),e.qZA(),e.TgZ(21,"button",6),e.NdJ("click",function(){return i.onApprove()}),e._uU(22,"Approve Region"),e.qZA()()),2&t&&(e.xp6(10),e.Oqu(i.data.name))},dependencies:[T.lW,g.uh,g.xY,g.H8,q.Hw]}),a})();function oe(a,s){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}let H=(()=>{class a{constructor(t,i,n,r,c,d,l,p){this.data=t,this.dialogRef=i,this.fb=n,this.router=r,this.localStorage=c,this.hierarchyservice=d,this.encryptionService=l,this.toaster=p,this.regionsForm=this.fb.group({remarks:["",o.kI.required]})}ngOnInit(){}onReview(){this.dialogRef.close("review"),this.router.navigate(["/admin-configurations/manage-hierarchy-approval",this.data?.id])}onClose(){this.dialogRef.close()}onSubmit(){const t={recordId:this.data.id,checkerName:this.localStorage.get("user-entity")?.username,remarks:this.regionsForm.value.remarks,approve:!1},i=this.encryptionService.encryptData(t),n=i.split(":")[0],r=i.split(":")[1],c=i.split(":")[2];this.hierarchyservice.approveRejectRegion(r,n).subscribe(d=>{const l=JSON.parse(d);if(200==l.code||201==l.code){const p=this.encryptionService.decryptData(l?.body,c);p&&(this.toaster.showSuccess(p?.message),this.dialogRef.close("reject"))}else this.toaster.showError(l?.body?.message)})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(g.WI),e.Y36(g.so),e.Y36(o.qu),e.Y36(_.F0),e.Y36(C.n2),e.Y36(x),e.Y36(A.w),e.Y36(F.M))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-reject-region"]],decls:32,vars:3,consts:[["mat-dialog-title","",2,"display","flex","justify-content","space-between","align-items","center"],[2,"flex","1","font-size","20px"],["mat-icon-button","","aria-label","Close dialog",2,"margin","0",3,"click"],["mat-dialog-content",""],[1,"form-field-full",3,"formGroup"],["fxFlex","100","fxFlex.lt-sm","100"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","placeholder","Remarks","formControlName","remarks","required","",2,"font-size","16px"],[4,"ngIf"],["mat-dialog-actions",""],["mat-stroked-button","","color","warn",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2,"Reject Region"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return i.onClose()}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA()()(),e.TgZ(6,"div",3)(7,"p"),e._uU(8,"Are you sure you want to Reject "),e.TgZ(9,"strong"),e._uU(10),e.qZA(),e._uU(11,"? Enter Remarks below and Click "),e.TgZ(12,"strong"),e._uU(13,"Reject Region"),e.qZA(),e._uU(14," to Approve or "),e.TgZ(15,"strong"),e._uU(16,"Review Region"),e.qZA(),e._uU(17," to view Region details. "),e.qZA(),e.TgZ(18,"form",4)(19,"div",5)(20,"div",6)(21,"div",5)(22,"mat-form-field",7)(23,"mat-label",8),e._uU(24,"Remarks"),e.qZA(),e._UZ(25,"textarea",9),e.YNc(26,oe,3,3,"mat-error",10),e.qZA()()()()()(),e.TgZ(27,"div",11)(28,"button",12),e.NdJ("click",function(){return i.onReview()}),e._uU(29,"Review Region"),e.qZA(),e.TgZ(30,"button",13),e.NdJ("click",function(){return i.onSubmit()}),e._uU(31,"Reject Region"),e.qZA()()),2&t){let n;e.xp6(10),e.Oqu(i.data.name),e.xp6(8),e.Q6J("formGroup",i.regionsForm),e.xp6(8),e.Q6J("ngIf",null==(n=i.regionsForm.get("remarks"))?null:n.invalid)}},dependencies:[w.O5,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u,T.lW,g.uh,g.xY,g.H8,u.TO,u.KE,u.hX,q.Hw,k.Nt,m.xw,m.SQ,m.yH,Z.X$]}),a})();const se=["actionTemplate"],ce=["statusTemplate"],le=["validityStatusTemplate"];function pe(a,s){if(1&a&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function de(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",18)(1,"mat-icon"),e._uU(2,"more_horiz"),e.qZA()(),e.TgZ(3,"mat-menu",null,19)(5,"button",20),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.viewDetailedRecord(r))}),e.TgZ(6,"mat-icon",21),e._uU(7,"visibility"),e.qZA(),e._uU(8," View "),e.qZA(),e.TgZ(9,"button",22),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.openApproveDialog(r))}),e.TgZ(10,"mat-icon",23),e._uU(11,"check_circle"),e.qZA(),e._uU(12," Approve "),e.qZA(),e.TgZ(13,"button",22),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.openRejectDialog(r))}),e.TgZ(14,"mat-icon",24),e._uU(15,"block"),e.qZA(),e._uU(16," Reject "),e.qZA()()}if(2&a){const t=s.$implicit,i=e.MAs(4),n=e.oxw();e.Q6J("matMenuTriggerFor",i),e.xp6(9),e.Q6J("disabled",t.createdBy===n.username||"Approved"===t.validityStatus),e.xp6(4),e.Q6J("disabled",t.createdBy===n.username||"Approved"===t.validityStatus)}}function ue(a,s){if(1&a&&(e.TgZ(0,"span",25),e._uU(1),e.qZA()),2&a){const t=s.$implicit,i=e.oxw();e.Q6J("ngStyle",i.getStatusColor(t.status)),e.xp6(1),e.hij(" ",t.status," ")}}function ge(a,s){if(1&a&&(e.TgZ(0,"span",25),e._uU(1),e.qZA()),2&a){const t=s.$implicit,i=e.oxw();e.Q6J("ngStyle",i.getValidityStatusColor(t.validityStatus)),e.xp6(1),e.hij(" ",t.validityStatus," ")}}const me=function(){return[5,10,20,50,100]};let he=(()=>{class a{constructor(t,i,n,r,c,d,l,p){this.remoteSrv=t,this.cdr=i,this.encryptionservice=n,this.router=r,this.translate=c,this.dialog=d,this.diag1=l,this.localStorage=p,this.columns=[],this.filters=[],this.selectedFilter="",this.list=[],this.total=0,this.isLoading=!0,this.query={q:"",sort:"",order:"",page:0,per_page:10}}ngAfterViewInit(){this.columns=[{header:this.translate.stream("regions_table.number"),field:"rowNumber",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.region_name"),field:"name",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.region_code"),field:"code",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.country"),field:"organization.country.name",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.created_by"),field:"createdBy",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.created_date"),field:"createdOn",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.status1"),field:"status",width:"auto",cellTemplate:this.statusTemplate,resizable:!0},{header:"Validity Status",field:"validityStatus",width:"auto",cellTemplate:this.validityStatusTemplate,resizable:!0},{header:this.translate.stream("regions_table.actions"),field:"actions",cellTemplate:this.actionTemplate}]}getStatusColor(t){switch(t){case"Active":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Inactive":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}getValidityStatusColor(t){switch(t){case"Pending":return{color:"goldenrod","background-color":"#FFF8E1","border-radius":"12px",padding:"4px 8px"};case"Approved":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Disapproved":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};case"Returned":return{color:"blue","background-color":"#E6F4FD","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}get params(){const t=Object.assign({},this.query);return t.page+=1,t}ngOnInit(){this.getRegions()}delete(t){this.diag1.alert(`You have deleted ${t.position}!`)}getRegions(){const t=this.localStorage.get("user-entity");this.username=t?.username;const i=t?.organization?.id,r=this.encryptionservice.encryptData({status:this.selectedFilter,page:this.query.page,size:this.query.per_page,organization:i}),c=r.split(":")[2],d=r.split(":")[1],l=r.split(":")[0];this.remoteSrv.getRegionsforApproval(l,d).subscribe(p=>{const h=JSON.parse(p),f=this.encryptionservice.decryptData(h?.body,c);this.list=f.data.map((S,B)=>({...S,rowNumber:this.query.page*this.query.per_page+B+1})),this.total=f.data.total,this.filters=f.validityStatuses,this.isLoading=!1,this.cdr.detectChanges()},p=>{console.error("Error fetching roles:",p),this.isLoading=!1})}viewDetailedRecord(t){var i=t?.id;i&&this.router.navigate(["/admin-configurations/manage-hierarchy-approval",i])}create(){this.router.navigateByUrl("/admin-configurations/add-hierarchy")}getNextPage(t){this.query.page=t.pageIndex,this.query.per_page=t.pageSize,this.getRegions()}search(){this.query.page=0,this.getRegions()}onFilterChange(t){this.selectedFilter=t.value,this.getRegions()}openApproveDialog(t){this.dialog.open(re,{width:"400px",data:t}).afterClosed().subscribe(()=>{this.getRegions()})}openRejectDialog(t){this.dialog.open(H,{width:"400px",data:t}).afterClosed().subscribe(()=>{this.getRegions()})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(x),e.Y36(e.sBO),e.Y36(A.w),e.Y36(_.F0),e.Y36(Z.sK),e.Y36(g.uw),e.Y36(M.cP),e.Y36(C.n2))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-approve-region"]],viewQuery:function(t,i){if(1&t&&(e.Gf(se,7),e.Gf(ce,7),e.Gf(le,7)),2&t){let n;e.iGM(n=e.CRH())&&(i.actionTemplate=n.first),e.iGM(n=e.CRH())&&(i.statusTemplate=n.first),e.iGM(n=e.CRH())&&(i.validityStatusTemplate=n.first)}},features:[e._Bn([x])],decls:25,vars:13,consts:[[2,"border","1px solid #ccc","padding","16px"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"col"],[2,"margin","0"],[1,"d-flex","justify-content-between","w-100","flex-wrap"],["fxFlex","33.33%","fxFlex.lt-sm","100%",1,"px-2"],["appearance","outline",2,"width","100%"],["name","selectedFilter",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","39.34%","fxFlex.lt-sm","100%",1,"d-flex","justify-content-between","align-items-center","px-2"],["fxFlex","27.33%","fxFlex.lt-sm","100%",1,"px-2"],["matPrefix",""],["matInput","","name","q","placeholder","Search",3,"ngModel","ngModelChange"],[3,"data","columns","length","loading","rowStriped","pageOnFront","pageIndex","pageSize","pageSizeOptions","page"],["actionTemplate",""],["statusTemplate",""],["validityStatusTemplate",""],[3,"value"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["color","primary"],["mat-menu-item","",3,"disabled","click"],["color","accent"],["color","warn"],[3,"ngStyle"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Approve Regions"),e.qZA()()()(),e.TgZ(5,"div",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),e._uU(9,"Select Filter"),e.qZA(),e.TgZ(10,"mat-select",7),e.NdJ("ngModelChange",function(r){return i.selectedFilter=r})("selectionChange",function(r){return i.onFilterChange(r)}),e.YNc(11,pe,2,2,"mat-option",8),e.qZA()()(),e._UZ(12,"div",9),e.TgZ(13,"div",10)(14,"mat-form-field",6)(15,"mat-icon",11),e._uU(16,"search"),e.qZA(),e.TgZ(17,"input",12),e.NdJ("ngModelChange",function(r){return i.query.q=r}),e.qZA()()()(),e.TgZ(18,"mtx-grid",13),e.NdJ("page",function(r){return i.getNextPage(r)}),e.qZA(),e.YNc(19,de,17,3,"ng-template",null,14,e.W1O),e.YNc(21,ue,2,2,"ng-template",null,15,e.W1O),e.YNc(23,ge,2,2,"ng-template",null,16,e.W1O)),2&t&&(e.xp6(10),e.Q6J("ngModel",i.selectedFilter),e.xp6(1),e.Q6J("ngForOf",i.filters),e.xp6(6),e.Q6J("ngModel",i.query.q),e.xp6(1),e.Q6J("data",i.list)("columns",i.columns)("length",i.total)("loading",i.isLoading)("rowStriped",!0)("pageOnFront",!0)("pageIndex",i.query.page)("pageSize",i.query.per_page)("pageSizeOptions",e.DdM(12,me)))},dependencies:[w.sg,w.PC,o.Fj,o.JJ,o.On,R.ey,T.lW,v.a8,u.KE,u.hX,u.qo,q.Hw,k.Nt,U.VK,U.OP,U.p6,N.gD,z.CM,m.yH,Y.Zl]}),a})();function fe(a,s){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function _e(a,s){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function ye(a,s){if(1&a&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function ve(a,s){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function be(a,s){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function xe(a,s){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}let Ze=(()=>{class a{constructor(t,i,n,r,c,d,l,p){this.fb=t,this.dateAdapter=i,this.translate=n,this.router=r,this.encryptionService=c,this.toaster=d,this.hierarchyService=l,this.storageService=p,this.q={username:"",email:"",gender:""},this.Form=this.fb.nonNullable.group({user:[""],country:[""],region:[""],name:["",[o.kI.required,o.kI.maxLength(30)]],code:["",[o.kI.required,o.kI.maxLength(30)]],organization:[""]})}ngOnInit(){this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)}),this.userProfile=this.storageService.get("user-entity"),this.Form.patchValue({country:this.userProfile?.organization.country.name||"",organization:this.userProfile?.organization.name||"",user:this.userProfile?.username||""}),this.getRegions()}ngOnDestroy(){this.translateSubscription.unsubscribe()}getErrorMessage(t){return t.get("email")?.hasError("required")?"validations.required":t.get("email")?.hasError("email")?"validations.invalid_email":""}return(){this.router.navigateByUrl("/admin-configurations/branch-list")}addBranch(){const t=this.storageService.get("user-entity");this.Form.value.user=t.username;const i=this.Form.value,r=this.encryptionService.encryptData({name:i.name,region:i?.region,user:i.user,code:i.code,status:!1}),c=r.split(":")[0],d=r.split(":")[1],l=r.split(":")[2];this.hierarchyService.addBranch(d,c).subscribe(p=>{const h=JSON.parse(p);if(200==h.code||201==h.code){const f=this.encryptionService.decryptData(h.body,l);f&&(this.toaster.showSuccess(f?.message),this.return())}else this.toaster.showError(h?.body?.message)})}getRegions(){const i=this.storageService.get("user-entity").organization.id,n=this.encryptionService.generateAesKey(),r=this.encryptionService.generatebase64Key(n),c=this.encryptionService.encryptWithRSA(r);this.hierarchyService.allRegionsByCountry(c,i).subscribe(d=>{console.log(d);const l=JSON.parse(d),p=this.encryptionService.decryptData(l?.body,r);this.regions=p},d=>{console.error("Error fetching regions:",d)})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(o.qu),e.Y36(R._A),e.Y36(Z.sK),e.Y36(_.F0),e.Y36(A.w),e.Y36(F.M),e.Y36(x),e.Y36(C.n2))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-create-branch"]],decls:48,vars:7,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","16px"],[2,"font-size","24px","margin-bottom","4px","font-family","'Inter', sans-serif","color","#304254"],[2,"font-weight","normal","opacity","0.6","margin-top","0","padding","0"],[1,"form-field-full",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex","33.33","fxFlex.lt-sm","100"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","placeholder","Organization","formControlName","organization","required","",2,"font-size","16px"],[4,"ngIf"],["matInput","","placeholder","Country","formControlName","country","required","",2,"font-size","16px"],["required","","formControlName","region",2,"font-size","16px"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","code","formControlName","code","required","",2,"font-size","16px"],["matInput","","placeholder","Name","formControlName","name","required","",2,"font-size","16px"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","padding","4px 10px","font-size","18px","min-width","39px","height","40px","margin-bottom","16px",3,"click"],["mat-raised-button","",1,"m-t-8",2,"background-color","#74C84D","color","white","padding","4px 10px","font-size","18px","min-width","39px","height","40px","margin-bottom","16px","margin-left","6px",3,"click"],[3,"value"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title",3),e._uU(4," Add New Branch "),e.qZA(),e.TgZ(5,"h3",4),e._uU(6,"Add Branch"),e.qZA(),e.TgZ(7,"form",5)(8,"div",6)(9,"div",7)(10,"mat-form-field",8)(11,"mat-label",9),e._uU(12,"Organization"),e.qZA(),e._UZ(13,"input",10),e.YNc(14,fe,3,3,"mat-error",11),e.qZA()(),e.TgZ(15,"div",7)(16,"mat-form-field",8)(17,"mat-label",9),e._uU(18,"Country"),e.qZA(),e._UZ(19,"input",12),e.YNc(20,_e,3,3,"mat-error",11),e.qZA()(),e.TgZ(21,"div",7)(22,"mat-form-field",8)(23,"mat-label",9),e._uU(24,"Select Region"),e.qZA(),e.TgZ(25,"mat-select",13)(26,"mat-option"),e._uU(27,"-- Select --"),e.qZA(),e.YNc(28,ye,2,2,"mat-option",14),e.qZA(),e.YNc(29,ve,3,3,"mat-error",11),e.qZA()(),e.TgZ(30,"div",7)(31,"mat-form-field",8)(32,"mat-label",9),e._uU(33," Branch Code"),e.qZA(),e._UZ(34,"input",15),e.YNc(35,be,3,3,"mat-error",11),e.qZA()(),e.TgZ(36,"div",7)(37,"mat-form-field",8)(38,"mat-label",9),e._uU(39,"Branch Name"),e.qZA(),e._UZ(40,"input",16),e.YNc(41,xe,3,3,"mat-error",11),e.qZA()()(),e.TgZ(42,"button",17),e.NdJ("click",function(){return i.return()}),e.TgZ(43,"mat-icon"),e._uU(44,"arrow_back"),e.qZA(),e._uU(45," Back "),e.qZA(),e.TgZ(46,"button",18),e.NdJ("click",function(){return i.addBranch()}),e._uU(47," Add"),e.qZA()()()()()),2&t){let n,r,c,d,l;e.xp6(7),e.Q6J("formGroup",i.Form),e.xp6(7),e.Q6J("ngIf",null==(n=i.Form.get("organization"))?null:n.invalid),e.xp6(6),e.Q6J("ngIf",null==(r=i.Form.get("country"))?null:r.invalid),e.xp6(8),e.Q6J("ngForOf",i.regions),e.xp6(1),e.Q6J("ngIf",null==(c=i.Form.get("region"))?null:c.invalid),e.xp6(6),e.Q6J("ngIf",null==(d=i.Form.get("code"))?null:d.invalid),e.xp6(6),e.Q6J("ngIf",null==(l=i.Form.get("name"))?null:l.invalid)}},dependencies:[w.sg,w.O5,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u,R.ey,T.lW,v.a8,v.n5,u.TO,u.KE,u.hX,q.Hw,k.Nt,N.gD,m.xw,m.SQ,m.yH,Z.X$]}),a})();function Ae(a,s){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function we(a,s){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function qe(a,s){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}let Ce=(()=>{class a{constructor(t,i,n,r,c,d,l,p,h,f){this.service=t,this.encryptionService=i,this.route=n,this.fb=r,this.dateAdapter=c,this.translate=d,this.router=l,this.toaster=p,this.dialog=h,this.localService=f,this.isLoading=!0,this.form=this.fb.nonNullable.group({name:["",[o.kI.required,o.kI.maxLength(50)]],user:[""],status:[!1],country:[""],code:[""],organization:[""]})}ngOnDestroy(){this.translateSubscription.unsubscribe()}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.getRegionDetails(),this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)})}getRegionDetails(){const t=this.encryptionService.generateAesKey(),i=this.encryptionService.generatebase64Key(t),n=this.encryptionService.encryptWithRSA(i);this.service.getRegionById(this.id,n).subscribe(r=>{const c=JSON.parse(r);this.details=this.encryptionService.decryptData(c?.body,i),this.details&&(this.details=this.details,this.form.patchValue({name:this.details?.name||"",country:this.details?.organization.country.name||"",organization:this.details?.organization.name||"",code:this.details?.code||"",status:"Active"==this.details?.status})),this.isLoading=!1},r=>{this.isLoading=!1})}toggleStatus(t){this.form.get("status")?.setValue(t.checked)}return(){this.router.navigateByUrl("/admin-configurations/hierarchy-approve")}update(){const t=this.localService.get("user-entity"),n=this.encryptionService.encryptData({id:this.id,name:this.form.value.name,code:t?.username,status:this.form.value.status}),r=n.split(":")[0],c=n.split(":")[1],d=n.split(":")[2];this.service.updateRegion(c,r).subscribe(l=>{const p=JSON.parse(l);if(200==p.code||201==p.code){const h=this.encryptionService.decryptData(p.body,d);h&&(this.toaster.showSuccess(h?.message),this.return())}else this.toaster.showError(p?.body?.message)})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(x),e.Y36(A.w),e.Y36(_.gz),e.Y36(o.qu),e.Y36(R._A),e.Y36(Z.sK),e.Y36(_.F0),e.Y36(F.M),e.Y36(g.uw),e.Y36(C.n2))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-manage-hierarchy-approval"]],decls:38,vars:5,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","24px","border","2px solid #304254","border-radius","8px"],[2,"font-size","24px","margin-bottom","12px","font-family","'Inter', sans-serif","color","#304254"],[1,"form-field-full",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex","33.33","fxFlex.lt-sm","100"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","placeholder","Organization name","formControlName","organization","readonly","",2,"font-size","16px"],[4,"ngIf"],["matInput","","placeholder","Country","formControlName","country","readonly","",2,"font-size","16px"],["matInput","","placeholder","Region Nam","formControlName","name","readonly","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Code","formControlName","code",2,"font-size","16px"],["app","","formControlName","status",2,"font-size","16px","padding-top","20px","padding-bottom","20px",3,"checked","change"],[1,"d-flex","justify-content-between","flex-wrap",2,"margin-top","24px"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","font-size","14px","margin-right","10px",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title",3),e._uU(4," View Region Details "),e.qZA(),e.TgZ(5,"form",4)(6,"div",5)(7,"div",6)(8,"mat-form-field",7)(9,"mat-label",8),e._uU(10,"Organization Name"),e.qZA(),e._UZ(11,"input",9),e.YNc(12,Ae,3,3,"mat-error",10),e.qZA()(),e.TgZ(13,"div",6)(14,"mat-form-field",7)(15,"mat-label",8),e._uU(16,"Country"),e.qZA(),e._UZ(17,"input",11),e.YNc(18,we,3,3,"mat-error",10),e.qZA()(),e.TgZ(19,"div",6)(20,"mat-form-field",7)(21,"mat-label",8),e._uU(22,"Region Name"),e.qZA(),e._UZ(23,"input",12),e.YNc(24,qe,3,3,"mat-error",10),e.qZA()(),e.TgZ(25,"div",6)(26,"mat-form-field",7)(27,"mat-label",8),e._uU(28,"Code"),e.qZA(),e._UZ(29,"input",13),e.qZA()(),e.TgZ(30,"div",6)(31,"mat-checkbox",14),e.NdJ("change",function(r){return i.toggleStatus(r)}),e._uU(32," Activate/Deactivate "),e.qZA()()(),e.TgZ(33,"div",15)(34,"button",16),e.NdJ("click",function(){return i.return()}),e.TgZ(35,"mat-icon"),e._uU(36,"arrow_back"),e.qZA(),e._uU(37," Back "),e.qZA()()()()()()),2&t){let n,r,c,d;e.xp6(5),e.Q6J("formGroup",i.form),e.xp6(7),e.Q6J("ngIf",null==(n=i.form.get("organization"))?null:n.invalid),e.xp6(6),e.Q6J("ngIf",null==(r=i.form.get("country"))?null:r.invalid),e.xp6(6),e.Q6J("ngIf",null==(c=i.form.get("name"))?null:c.invalid),e.xp6(7),e.Q6J("checked",null==(d=i.form.get("status"))?null:d.value)}},dependencies:[w.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,T.lW,v.a8,v.n5,O.oG,u.TO,u.KE,u.hX,q.Hw,k.Nt,m.xw,m.SQ,m.yH,Z.X$]}),a})();function Te(a,s){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function ke(a,s){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}let Re=(()=>{class a{constructor(t,i,n,r,c,d,l,p,h,f){this.service=t,this.encryptionService=i,this.route=n,this.fb=r,this.dateAdapter=c,this.translate=d,this.router=l,this.toaster=p,this.dialog=h,this.localService=f,this.isLoading=!0,this.form=this.fb.nonNullable.group({name:["",[o.kI.required,o.kI.maxLength(50)]],user:[""],status:[!1],region:[""],code:[""]})}ngOnDestroy(){this.translateSubscription.unsubscribe()}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.getBranchDetails(),this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)})}getBranchDetails(){const t=this.encryptionService.generateAesKey(),i=this.encryptionService.generatebase64Key(t),n=this.encryptionService.encryptWithRSA(i);this.service.getBranchById(this.id,n).subscribe(r=>{const c=JSON.parse(r);this.details=this.encryptionService.decryptData(c?.body,i),this.details&&(this.details=this.details,this.form.patchValue({name:this.details?.name||"",region:this.details?.region.name||"",code:this.details?.code||"",status:"Active"==this.details?.status})),this.isLoading=!1},r=>{this.isLoading=!1})}toggleStatus(t){this.form.get("status")?.setValue(t.checked)}return(){window.history.back()}updateBranch(){const t=this.localService.get("user-entity"),i={id:this.id,name:this.form.value.name,user:t?.username,status:this.form.value.status,region:this.details.region.id,code:this.form.value.code};console.log(i);const n=this.encryptionService.encryptData(i),r=n.split(":")[0],c=n.split(":")[1],d=n.split(":")[2];this.service.updateBranch(c,r).subscribe(l=>{const p=JSON.parse(l);if(200==p.code||201==p.code){const h=this.encryptionService.decryptData(p.body,d);h&&(this.toaster.showSuccess(h?.message),this.return())}else this.toaster.showError(p?.body?.message)})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(x),e.Y36(A.w),e.Y36(_.gz),e.Y36(o.qu),e.Y36(R._A),e.Y36(Z.sK),e.Y36(_.F0),e.Y36(F.M),e.Y36(g.uw),e.Y36(C.n2))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-manage-branches"]],decls:36,vars:4,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","24px","border","2px solid #304254","border-radius","8px"],[2,"font-size","24px","margin-bottom","12px","font-family","'Inter', sans-serif","color","#304254"],[1,"form-field-full",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex","33.33","fxFlex.lt-sm","100"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","placeholder","Branch","formControlName","name","required","",2,"font-size","16px"],[4,"ngIf"],["readonly","","matInput","","placeholder","Code","formControlName","code","required","",2,"font-size","16px"],["matInput","","placeholder","Region name","formControlName","region","readonly","",2,"font-size","16px"],["app","","formControlName","status",2,"font-size","16px","padding-top","20px","padding-bottom","20px",3,"checked","change"],[1,"d-flex","justify-content-between","flex-wrap",2,"margin-top","24px"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","font-size","14px","margin-right","10px",3,"click"],["mat-raised-button","",2,"background-color","#74C84D","color","white","font-size","14px","margin-right","10px",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title",3),e._uU(4," Manage Branch "),e.qZA(),e.TgZ(5,"form",4)(6,"div",5)(7,"div",6)(8,"mat-form-field",7)(9,"mat-label",8),e._uU(10,"Branch Name"),e.qZA(),e._UZ(11,"input",9),e.YNc(12,Te,3,3,"mat-error",10),e.qZA()(),e.TgZ(13,"div",6)(14,"mat-form-field",7)(15,"mat-label",8),e._uU(16,"Code"),e.qZA(),e._UZ(17,"input",11),e.qZA()(),e.TgZ(18,"div",6)(19,"mat-form-field",7)(20,"mat-label",8),e._uU(21,"Region Name"),e.qZA(),e._UZ(22,"input",12),e.YNc(23,ke,3,3,"mat-error",10),e.qZA()(),e.TgZ(24,"div",6)(25,"mat-checkbox",13),e.NdJ("change",function(r){return i.toggleStatus(r)}),e._uU(26," Activate/Deactivate "),e.qZA()()(),e.TgZ(27,"div",14)(28,"button",15),e.NdJ("click",function(){return i.return()}),e.TgZ(29,"mat-icon"),e._uU(30,"arrow_back"),e.qZA(),e._uU(31," Back "),e.qZA(),e.TgZ(32,"button",16),e.NdJ("click",function(){return i.updateBranch()}),e.TgZ(33,"mat-icon"),e._uU(34,"edit"),e.qZA(),e._uU(35," Submit "),e.qZA()()()()()()),2&t){let n,r,c;e.xp6(5),e.Q6J("formGroup",i.form),e.xp6(7),e.Q6J("ngIf",null==(n=i.form.get("name"))?null:n.invalid),e.xp6(11),e.Q6J("ngIf",null==(r=i.form.get("region"))?null:r.invalid),e.xp6(2),e.Q6J("checked",null==(c=i.form.get("status"))?null:c.value)}},dependencies:[w.O5,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u,T.lW,v.a8,v.n5,O.oG,u.TO,u.KE,u.hX,q.Hw,k.Nt,m.xw,m.SQ,m.yH,Z.X$]}),a})();function Ue(a,s){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}let Fe=(()=>{class a{constructor(t,i,n,r,c,d,l,p){this.data=t,this.dialogRef=i,this.fb=n,this.router=r,this.localStorage=c,this.hierarchyservice=d,this.encryptionService=l,this.toaster=p,this.regionsForm=this.fb.group({remarks:["",o.kI.required]})}ngOnInit(){}onReview(){this.dialogRef.close("review"),this.router.navigate(["/admin-configurations/view-region-modifications",this.data?.id])}onClose(){this.dialogRef.close()}onSubmit(){const t={recordId:this.data.id,checkerName:this.localStorage.get("user-entity")?.username,remarks:this.regionsForm.value.remarks,approve:!1},i=this.encryptionService.encryptData(t),n=i.split(":")[0],r=i.split(":")[1],c=i.split(":")[2];this.hierarchyservice.approveRejectRegionEdit(r,n).subscribe(d=>{const l=JSON.parse(d);if(200==l.code||201==l.code){const p=this.encryptionService.decryptData(l?.body,c);p&&(this.toaster.showSuccess(p?.message),this.dialogRef.close("reject"))}else this.toaster.showError(l?.body?.message)})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(g.WI),e.Y36(g.so),e.Y36(o.qu),e.Y36(_.F0),e.Y36(C.n2),e.Y36(x),e.Y36(A.w),e.Y36(F.M))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-reject-region-modification"]],decls:32,vars:3,consts:[["mat-dialog-title","",2,"display","flex","justify-content","space-between","align-items","center"],[2,"flex","1","font-size","20px"],["mat-icon-button","","aria-label","Close dialog",2,"margin","0",3,"click"],["mat-dialog-content",""],[1,"form-field-full",3,"formGroup"],["fxFlex","100","fxFlex.lt-sm","100"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","placeholder","Remarks","formControlName","remarks","required","",2,"font-size","16px"],[4,"ngIf"],["mat-dialog-actions",""],["mat-stroked-button","","color","warn",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2,"Reject Region Modifications"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return i.onClose()}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA()()(),e.TgZ(6,"div",3)(7,"p"),e._uU(8,"Are you sure you want to Reject "),e.TgZ(9,"strong"),e._uU(10),e.qZA(),e._uU(11," modifications ? Enter Remarks below and Click "),e.TgZ(12,"strong"),e._uU(13,"Reject Region Modification"),e.qZA(),e._uU(14," to Approve or "),e.TgZ(15,"strong"),e._uU(16,"Review Region"),e.qZA(),e._uU(17," to view Region details. "),e.qZA(),e.TgZ(18,"form",4)(19,"div",5)(20,"div",6)(21,"div",5)(22,"mat-form-field",7)(23,"mat-label",8),e._uU(24,"Remarks"),e.qZA(),e._UZ(25,"textarea",9),e.YNc(26,Ue,3,3,"mat-error",10),e.qZA()()()()()(),e.TgZ(27,"div",11)(28,"button",12),e.NdJ("click",function(){return i.onReview()}),e._uU(29,"Review Region"),e.qZA(),e.TgZ(30,"button",13),e.NdJ("click",function(){return i.onSubmit()}),e._uU(31,"Reject Region"),e.qZA()()),2&t){let n;e.xp6(10),e.Oqu(i.data.name),e.xp6(8),e.Q6J("formGroup",i.regionsForm),e.xp6(8),e.Q6J("ngIf",null==(n=i.regionsForm.get("remarks"))?null:n.invalid)}},dependencies:[w.O5,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u,T.lW,g.uh,g.xY,g.H8,u.TO,u.KE,u.hX,q.Hw,k.Nt,m.xw,m.SQ,m.yH,Z.X$]}),a})(),Se=(()=>{class a{constructor(t,i,n,r,c,d,l){this.data=t,this.dialogRef=i,this.router=n,this.localStorage=r,this.hierarchyservice=c,this.encryptionService=d,this.toaster=l}ngOnInit(){}onReview(){this.dialogRef.close("review"),this.router.navigate(["/admin-configurations/view-region-modifications",this.data?.id])}onApprove(){const t={recordId:this.data.id,checkerName:this.localStorage.get("user-entity")?.username,remarks:"",approve:!0},i=this.encryptionService.encryptData(t),n=i.split(":")[0],r=i.split(":")[1],c=i.split(":")[2];this.hierarchyservice.approveRejectRegionEdit(r,n).subscribe(d=>{const l=JSON.parse(d);if(200==l.code||201==l.code){const p=this.encryptionService.decryptData(l?.body,c);p&&(this.toaster.showSuccess(p?.message),this.dialogRef.close("approve"))}else this.toaster.showError(l?.body?.message)})}onClose(){this.dialogRef.close()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(g.WI),e.Y36(g.so),e.Y36(_.F0),e.Y36(C.n2),e.Y36(x),e.Y36(A.w),e.Y36(F.M))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-approve-region-modification"]],decls:23,vars:1,consts:[["mat-dialog-title","",2,"display","flex","justify-content","space-between","align-items","center"],[2,"flex","1","font-size","20px"],["mat-icon-button","","aria-label","Close dialog",2,"margin","0",3,"click"],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-stroked-button","","color","warn",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2,"Approve Region Modifications"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return i.onClose()}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA()()(),e.TgZ(6,"div",3)(7,"p"),e._uU(8,"Are you sure you want to Approve "),e.TgZ(9,"strong"),e._uU(10),e.qZA(),e._uU(11," modifications? Click "),e.TgZ(12,"strong"),e._uU(13,"Approve Region"),e.qZA(),e._uU(14," to Approve or "),e.TgZ(15,"strong"),e._uU(16,"Review Region"),e.qZA(),e._uU(17," to view Branch details. "),e.qZA()(),e.TgZ(18,"div",4)(19,"button",5),e.NdJ("click",function(){return i.onReview()}),e._uU(20,"Review Region"),e.qZA(),e.TgZ(21,"button",6),e.NdJ("click",function(){return i.onApprove()}),e._uU(22,"Approve Region"),e.qZA()()),2&t&&(e.xp6(10),e.Oqu(i.data.name))},dependencies:[T.lW,g.uh,g.xY,g.H8,q.Hw]}),a})();const Be=["actionTemplate"],Ne=["statusTemplate"],Me=["changeStatusTemplate"];function ze(a,s){if(1&a&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Ye(a,s){if(1&a&&(e.TgZ(0,"span",16),e._uU(1),e.qZA()),2&a){const t=s.$implicit,i=e.oxw();e.Q6J("ngStyle",i.getStatusColor(t.status)),e.xp6(1),e.hij(" ",t.status," ")}}const Je=function(){return[5,10,20,50,100]};let Oe=(()=>{class a{constructor(t,i,n,r,c,d,l,p){this.remoteSrv=t,this.cdr=i,this.encryptionservice=n,this.router=r,this.translate=c,this.dialog=d,this.diag1=l,this.localStorage=p,this.columns=[],this.filters=[],this.selectedFilter="",this.list=[],this.total=0,this.isLoading=!0,this.query={q:"",sort:"",order:"",page:0,per_page:10}}ngAfterViewInit(){this.columns=[{header:this.translate.stream("regions_table.number"),field:"rowNumber",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.region_name"),field:"name",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.region_code"),field:"code",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.country"),field:"organization.country.name",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.created_by"),field:"createdBy",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.created_date"),field:"createdOn",width:"auto",resizable:!0},{header:this.translate.stream("accounts.modifiedBy"),field:"modifiedBy",width:"auto",resizable:!0},{header:this.translate.stream("accounts.status"),field:"status",width:"auto",resizable:!0},{header:this.translate.stream("table_kitchen_sink.actions"),field:"actions",width:"auto",pinned:"right",type:"button",buttons:[{type:"icon",icon:"visibility",color:"primary",tooltip:this.translate.stream("table_kitchen_sink.view_details"),click:t=>this.viewDetailedRecord(t)},{type:"icon",icon:"check_circle",color:"accent",tooltip:this.translate.stream("table_kitchen_sink.approve"),click:t=>this.openApproveDialog(t),disabled:t=>t.modifiedBy==this.username||"Approved"==t.changeStatus},{type:"icon",icon:"cancel",color:"warn",tooltip:this.translate.stream("table_kitchen_sink.reject"),click:t=>this.openRejectDialog(t),disabled:t=>t.modifiedBy==this.username||"Approved"==t.changeStatus}]}]}get params(){const t=Object.assign({},this.query);return t.page+=1,t}getStatusColor(t){switch(t){case"Active":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Inactive":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}getValidityStatusColor(t){switch(t){case"Pending":return{color:"goldenrod","background-color":"#FFF8E1","border-radius":"12px",padding:"4px 8px"};case"Approved":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Disapproved":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};case"Returned":return{color:"blue","background-color":"#E6F4FD","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}ngOnInit(){this.getRegions()}delete(t){this.diag1.alert(`You have deleted ${t.position}!`)}getRegions(){const t=this.localStorage.get("user-entity");this.username=t?.username;const i=t?.organization?.id,r=this.encryptionservice.encryptData({status:this.selectedFilter,page:this.query.page,size:this.query.per_page,organization:i,region:i}),c=r.split(":")[2],d=r.split(":")[1],l=r.split(":")[0];this.remoteSrv.getAllmodifiedRegions(l,d).subscribe(p=>{const h=JSON.parse(p),f=this.encryptionservice.decryptData(h?.body,c);this.list=f.data.map((S,B)=>({...S,rowNumber:this.query.page*this.query.per_page+B+1})),this.total=f.data.total,this.filters=f.changeStatuses,this.isLoading=!1,this.cdr.detectChanges()},p=>{console.error("Error fetching roles:",p),this.isLoading=!1})}viewDetailedRecord(t){var i=t?.id;i&&this.router.navigate(["/admin-configurations/view-region-modifications",i])}getNextPage(t){this.query.page=t.pageIndex,this.query.per_page=t.pageSize,this.getRegions()}search(){this.query.page=0,this.getRegions()}onFilterChange(t){this.selectedFilter=t.value,this.getRegions()}openApproveDialog(t){this.dialog.open(Se,{width:"400px",data:t}).afterClosed().subscribe(()=>{this.getRegions()})}openRejectDialog(t){this.dialog.open(Fe,{width:"400px",data:t}).afterClosed().subscribe(()=>{this.getRegions()})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(x),e.Y36(e.sBO),e.Y36(A.w),e.Y36(_.F0),e.Y36(Z.sK),e.Y36(g.uw),e.Y36(M.cP),e.Y36(C.n2))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-approve-regionmodification-list"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Be,7),e.Gf(Ne,7),e.Gf(Me,7)),2&t){let n;e.iGM(n=e.CRH())&&(i.actionTemplate=n.first),e.iGM(n=e.CRH())&&(i.statusTemplate=n.first),e.iGM(n=e.CRH())&&(i.changeStatusTemplate=n.first)}},decls:21,vars:13,consts:[[2,"border","1px solid #ccc","padding","16px"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"col"],[2,"margin","0"],[1,"d-flex","justify-content-between","w-100","flex-wrap"],["fxFlex","33.33%","fxFlex.lt-sm","100%",1,"px-2"],["appearance","outline",2,"width","100%"],["name","selectedFilter",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","39.34%","fxFlex.lt-sm","100%",1,"d-flex","justify-content-between","align-items-center","px-2"],["fxFlex","27.33%","fxFlex.lt-sm","100%",1,"px-2"],["matPrefix",""],["matInput","","name","q","placeholder","Search",3,"ngModel","ngModelChange"],[3,"data","columns","length","loading","rowStriped","pageOnFront","pageIndex","pageSize","pageSizeOptions","page"],["validityStatusTemplate",""],[3,"value"],[3,"ngStyle"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Approve Regions Modifications"),e.qZA()()()(),e.TgZ(5,"div",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),e._uU(9,"Select Filter"),e.qZA(),e.TgZ(10,"mat-select",7),e.NdJ("ngModelChange",function(r){return i.selectedFilter=r})("selectionChange",function(r){return i.onFilterChange(r)}),e.YNc(11,ze,2,2,"mat-option",8),e.qZA()()(),e._UZ(12,"div",9),e.TgZ(13,"div",10)(14,"mat-form-field",6)(15,"mat-icon",11),e._uU(16,"search"),e.qZA(),e.TgZ(17,"input",12),e.NdJ("ngModelChange",function(r){return i.query.q=r}),e.qZA()()()(),e.TgZ(18,"mtx-grid",13),e.NdJ("page",function(r){return i.getNextPage(r)}),e.qZA(),e.YNc(19,Ye,2,2,"ng-template",null,14,e.W1O)),2&t&&(e.xp6(10),e.Q6J("ngModel",i.selectedFilter),e.xp6(1),e.Q6J("ngForOf",i.filters),e.xp6(6),e.Q6J("ngModel",i.query.q),e.xp6(1),e.Q6J("data",i.list)("columns",i.columns)("length",i.total)("loading",i.isLoading)("rowStriped",!0)("pageOnFront",!0)("pageIndex",i.query.page)("pageSize",i.query.per_page)("pageSizeOptions",e.DdM(12,Je)))},dependencies:[w.sg,w.PC,o.Fj,o.JJ,o.On,R.ey,v.a8,u.KE,u.hX,u.qo,q.Hw,k.Nt,N.gD,z.CM,m.yH,Y.Zl]}),a})();const Ie=["actionTemplate"],De=["statusTemplate"];function Le(a,s){if(1&a&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function je(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",20)(1,"mat-icon"),e._uU(2,"more_horiz"),e.qZA()(),e.TgZ(3,"mat-menu",null,21)(5,"button",22),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.viewDetailedRecord(r))}),e.TgZ(6,"mat-icon",23),e._uU(7,"edit"),e.qZA(),e._uU(8," Edit "),e.qZA()()}if(2&a){const t=e.MAs(4);e.Q6J("matMenuTriggerFor",t)}}function He(a,s){if(1&a&&(e.TgZ(0,"span",24),e._uU(1),e.qZA()),2&a){const t=s.$implicit,i=e.oxw();e.Q6J("ngStyle",i.getStatusColor(t.status)),e.xp6(1),e.hij(" ",t.status," ")}}const Qe=function(){return[5,10,20,50,100]};let Ee=(()=>{class a{constructor(t,i,n,r,c,d,l,p){this.remoteSrv=t,this.cdr=i,this.encryptionservice=n,this.router=r,this.translate=c,this.dialog=d,this.diag1=l,this.localStorage=p,this.columns=[],this.filters=[],this.selectedFilter="",this.list=[],this.total=0,this.isLoading=!0,this.query={q:"",sort:"",order:"",page:0,per_page:10}}ngAfterViewInit(){this.columns=[{header:this.translate.stream("regions_table.branch_name"),field:"name",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.branch_code"),field:"code",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.region_name"),field:"region.name",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.created_by"),field:"createdBy",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.created_date"),field:"createdOn",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.status1"),field:"status",width:"auto",cellTemplate:this.statusTemplate,resizable:!0},{header:this.translate.stream("users_table.actions"),field:"actions",cellTemplate:this.actionTemplate}]}getStatusColor(t){switch(t){case"Active":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Inactive":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}get params(){const t=Object.assign({},this.query);return t.page+=1,t}ngOnInit(){this.getBranches()}delete(t){this.diag1.alert(`You have deleted ${t.position}!`)}getBranches(){const i=this.localStorage.get("user-entity")?.organization?.id,r=this.encryptionservice.encryptData({status:this.selectedFilter,page:this.query.page,size:this.query.per_page,organization:i,region:0}),c=r.split(":")[2],d=r.split(":")[1],l=r.split(":")[0];this.remoteSrv.getBranches(l,d).subscribe(p=>{const h=JSON.parse(p),f=this.encryptionservice.decryptData(h?.body,c);this.list=f.data.map((S,B)=>({...S,rowNumber:this.query.page*this.query.per_page+B+1})),this.total=f.data.total,this.filters=f.statuses,this.isLoading=!1,this.cdr.detectChanges()},p=>{console.error("Error fetching roles:",p),this.isLoading=!1})}viewDetailedRecord(t){var i=t?.id;i&&this.router.navigate(["/admin-configurations/manage-branch",i])}createBranch(){this.router.navigateByUrl("/admin-configurations/create-branch")}getNextPage(t){this.query.page=t.pageIndex,this.query.per_page=t.pageSize,this.getBranches()}search(){this.query.page=0,this.getBranches()}onFilterChange(t){this.selectedFilter=t.value,this.getBranches()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(x),e.Y36(e.sBO),e.Y36(A.w),e.Y36(_.F0),e.Y36(Z.sK),e.Y36(g.uw),e.Y36(M.cP),e.Y36(C.n2))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-branch-list"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Ie,7),e.Gf(De,7)),2&t){let n;e.iGM(n=e.CRH())&&(i.actionTemplate=n.first),e.iGM(n=e.CRH())&&(i.statusTemplate=n.first)}},decls:30,vars:13,consts:[[2,"border","1px solid #ccc","padding","16px"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"col"],[2,"margin","0"],[1,"d-flex","flex-wrap","align-items-center"],["mat-raised-button","",2,"background-color","#74C84D","color","white","margin-right","8px",3,"click"],[1,"d-flex","justify-content-between","w-100","flex-wrap"],["fxFlex","33.33%","fxFlex.lt-sm","100%",1,"px-2"],["appearance","outline",2,"width","100%"],["name","selectedFilter",3,"ngModel","ngModelChange","selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["fxFlex","39.34%","fxFlex.lt-sm","100%",1,"d-flex","justify-content-between","align-items-center","px-2"],["fxFlex","27.33%","fxFlex.lt-sm","100%",1,"px-2"],["matPrefix",""],["matInput","","name","q","placeholder","Search",3,"ngModel","ngModelChange"],[3,"data","columns","length","loading","rowStriped","pageOnFront","pageIndex","pageSize","pageSizeOptions","page"],["actionTemplate",""],["statusTemplate",""],[3,"value"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["color","primary"],[3,"ngStyle"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Branches "),e.qZA()(),e.TgZ(5,"div",4)(6,"button",5),e.NdJ("click",function(){return i.createBranch()}),e.TgZ(7,"mat-icon"),e._uU(8,"add_circle"),e.qZA(),e._uU(9," Branch "),e.qZA()()()(),e.TgZ(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),e._uU(14,"Select Filter"),e.qZA(),e.TgZ(15,"mat-select",9),e.NdJ("ngModelChange",function(r){return i.selectedFilter=r})("selectionChange",function(r){return i.onFilterChange(r)}),e.TgZ(16,"mat-option",10),e._uU(17,"All"),e.qZA(),e.YNc(18,Le,2,2,"mat-option",11),e.qZA()()(),e._UZ(19,"div",12),e.TgZ(20,"div",13)(21,"mat-form-field",8)(22,"mat-icon",14),e._uU(23,"search"),e.qZA(),e.TgZ(24,"input",15),e.NdJ("ngModelChange",function(r){return i.query.q=r}),e.qZA()()()(),e.TgZ(25,"mtx-grid",16),e.NdJ("page",function(r){return i.getNextPage(r)}),e.qZA(),e.YNc(26,je,9,1,"ng-template",null,17,e.W1O),e.YNc(28,He,2,2,"ng-template",null,18,e.W1O)),2&t&&(e.xp6(15),e.Q6J("ngModel",i.selectedFilter),e.xp6(3),e.Q6J("ngForOf",i.filters),e.xp6(6),e.Q6J("ngModel",i.query.q),e.xp6(1),e.Q6J("data",i.list)("columns",i.columns)("length",i.total)("loading",i.isLoading)("rowStriped",!0)("pageOnFront",!0)("pageIndex",i.query.page)("pageSize",i.query.per_page)("pageSizeOptions",e.DdM(12,Qe)))},dependencies:[w.sg,w.PC,o.Fj,o.JJ,o.On,R.ey,T.lW,v.a8,u.KE,u.hX,u.qo,q.Hw,k.Nt,U.VK,U.OP,U.p6,N.gD,z.CM,m.yH,Y.Zl]}),a})();const Ke=["actionTemplate"],Ge=["statusTemplate"];function We(a,s){if(1&a&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Ve(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",20)(1,"mat-icon"),e._uU(2,"more_horiz"),e.qZA()(),e.TgZ(3,"mat-menu",null,21)(5,"button",22),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.viewDetailedRecord(r))}),e.TgZ(6,"mat-icon",23),e._uU(7,"edit"),e.qZA(),e._uU(8," Edit "),e.qZA()()}if(2&a){const t=e.MAs(4);e.Q6J("matMenuTriggerFor",t)}}function Pe(a,s){if(1&a&&(e.TgZ(0,"span",24),e._uU(1),e.qZA()),2&a){const t=s.$implicit,i=e.oxw();e.Q6J("ngStyle",i.getStatusColor(t.status)),e.xp6(1),e.hij(" ",t.status," ")}}const Xe=function(){return[5,10,20,50,100]};let $e=(()=>{class a{constructor(t,i,n,r,c,d,l,p){this.remoteSrv=t,this.cdr=i,this.encryptionservice=n,this.router=r,this.translate=c,this.dialog=d,this.diag1=l,this.localStorage=p,this.columns=[],this.filters=[],this.selectedFilter="",this.list=[],this.total=0,this.isLoading=!0,this.query={q:"",sort:"",order:"",page:0,per_page:10}}ngAfterViewInit(){this.columns=[{header:this.translate.stream("regions_table.number"),field:"rowNumber",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.region_name"),field:"name",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.region_code"),field:"code",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.country"),field:"organization.country.name",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.created_by"),field:"createdBy",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.created_date"),field:"createdOn",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.status1"),field:"status",width:"auto",cellTemplate:this.statusTemplate,resizable:!0},{header:this.translate.stream("users_table.actions"),field:"actions",cellTemplate:this.actionTemplate}]}getStatusColor(t){switch(t){case"Active":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Inactive":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}get params(){const t=Object.assign({},this.query);return t.page+=1,t}ngOnInit(){this.getRegions()}delete(t){this.diag1.alert(`You have deleted ${t.position}!`)}getRegions(){const i=this.localStorage.get("user-entity")?.organization?.id,r=this.encryptionservice.encryptData({status:this.selectedFilter,page:this.query.page,size:this.query.per_page,organization:i,region:i}),c=r.split(":")[2],d=r.split(":")[1],l=r.split(":")[0];this.remoteSrv.getAllRegions(l,d).subscribe(p=>{const h=JSON.parse(p),f=this.encryptionservice.decryptData(h?.body,c);console.log(f),this.list=f.data.map((S,B)=>({...S,rowNumber:this.query.page*this.query.per_page+B+1})),this.total=f.data.total,this.filters=f.statuses,this.isLoading=!1,this.cdr.detectChanges()},p=>{console.error("Error fetching roles:",p),this.isLoading=!1})}viewDetailedRecord(t){var i=t?.id;i&&this.router.navigate(["/admin-configurations/manage-hierarchy",i])}createRegion(){this.router.navigateByUrl("/admin-configurations/add-hierarchy")}getNextPage(t){this.query.page=t.pageIndex,this.query.per_page=t.pageSize,this.getRegions()}search(){this.query.page=0,this.getRegions()}onFilterChange(t){this.selectedFilter=t.value,this.getRegions()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(x),e.Y36(e.sBO),e.Y36(A.w),e.Y36(_.F0),e.Y36(Z.sK),e.Y36(g.uw),e.Y36(M.cP),e.Y36(C.n2))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-list-regions"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Ke,7),e.Gf(Ge,7)),2&t){let n;e.iGM(n=e.CRH())&&(i.actionTemplate=n.first),e.iGM(n=e.CRH())&&(i.statusTemplate=n.first)}},decls:30,vars:13,consts:[[2,"border","1px solid #ccc","padding","16px"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"col"],[2,"margin","0"],[1,"d-flex","flex-wrap","align-items-center"],["mat-raised-button","",2,"background-color","#74C84D","color","white","margin-right","8px",3,"click"],[1,"d-flex","justify-content-between","w-100","flex-wrap"],["fxFlex","33.33%","fxFlex.lt-sm","100%",1,"px-2"],["appearance","outline",2,"width","100%"],["name","selectedFilter",3,"ngModel","ngModelChange","selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["fxFlex","39.34%","fxFlex.lt-sm","100%",1,"d-flex","justify-content-between","align-items-center","px-2"],["fxFlex","27.33%","fxFlex.lt-sm","100%",1,"px-2"],["matPrefix",""],["matInput","","name","q","placeholder","Search",3,"ngModel","ngModelChange"],[3,"data","columns","length","loading","rowStriped","pageOnFront","pageIndex","pageSize","pageSizeOptions","page"],["actionTemplate",""],["statusTemplate",""],[3,"value"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["color","primary"],[3,"ngStyle"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Regions "),e.qZA()(),e.TgZ(5,"div",4)(6,"button",5),e.NdJ("click",function(){return i.createRegion()}),e.TgZ(7,"mat-icon"),e._uU(8,"add_circle"),e.qZA(),e._uU(9," Region "),e.qZA()()()(),e.TgZ(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),e._uU(14,"Select Filter"),e.qZA(),e.TgZ(15,"mat-select",9),e.NdJ("ngModelChange",function(r){return i.selectedFilter=r})("selectionChange",function(r){return i.onFilterChange(r)}),e.TgZ(16,"mat-option",10),e._uU(17,"All"),e.qZA(),e.YNc(18,We,2,2,"mat-option",11),e.qZA()()(),e._UZ(19,"div",12),e.TgZ(20,"div",13)(21,"mat-form-field",8)(22,"mat-icon",14),e._uU(23,"search"),e.qZA(),e.TgZ(24,"input",15),e.NdJ("ngModelChange",function(r){return i.query.q=r}),e.qZA()()()(),e.TgZ(25,"mtx-grid",16),e.NdJ("page",function(r){return i.getNextPage(r)}),e.qZA(),e.YNc(26,Ve,9,1,"ng-template",null,17,e.W1O),e.YNc(28,Pe,2,2,"ng-template",null,18,e.W1O)),2&t&&(e.xp6(15),e.Q6J("ngModel",i.selectedFilter),e.xp6(3),e.Q6J("ngForOf",i.filters),e.xp6(6),e.Q6J("ngModel",i.query.q),e.xp6(1),e.Q6J("data",i.list)("columns",i.columns)("length",i.total)("loading",i.isLoading)("rowStriped",!0)("pageOnFront",!0)("pageIndex",i.query.page)("pageSize",i.query.per_page)("pageSizeOptions",e.DdM(12,Xe)))},dependencies:[w.sg,w.PC,o.Fj,o.JJ,o.On,R.ey,T.lW,v.a8,u.KE,u.hX,u.qo,q.Hw,k.Nt,U.VK,U.OP,U.p6,N.gD,z.CM,m.yH,Y.Zl]}),a})();function et(a,s){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}let tt=(()=>{class a{constructor(t,i,n,r,c,d,l,p){this.data=t,this.dialogRef=i,this.fb=n,this.router=r,this.localStorage=c,this.hierarchyservice=d,this.encryptionService=l,this.toaster=p,this.branchesForm=this.fb.group({remarks:["",o.kI.required]})}ngOnInit(){}onReview(){this.dialogRef.close("review"),this.router.navigate(["/admin-configurations/view-branch-modifications",this.data?.id])}onClose(){this.dialogRef.close()}onSubmit(){const t={recordId:this.data.id,checkerName:this.localStorage.get("user-entity")?.username,remarks:this.branchesForm.value.remarks,approve:!1},i=this.encryptionService.encryptData(t),n=i.split(":")[0],r=i.split(":")[1],c=i.split(":")[2];this.hierarchyservice.approveRejectBranchEdit(r,n).subscribe(d=>{const l=JSON.parse(d);if(200==l.code||201==l.code){const p=this.encryptionService.decryptData(l?.body,c);p&&(this.toaster.showSuccess(p?.message),this.dialogRef.close("reject"))}else this.toaster.showError(l?.body?.message)})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(g.WI),e.Y36(g.so),e.Y36(o.qu),e.Y36(_.F0),e.Y36(C.n2),e.Y36(x),e.Y36(A.w),e.Y36(F.M))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-reject-branch-modification"]],decls:32,vars:3,consts:[["mat-dialog-title","",2,"display","flex","justify-content","space-between","align-items","center"],[2,"flex","1","font-size","20px"],["mat-icon-button","","aria-label","Close dialog",2,"margin","0",3,"click"],["mat-dialog-content",""],[1,"form-field-full",3,"formGroup"],["fxFlex","100","fxFlex.lt-sm","100"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","placeholder","Remarks","formControlName","remarks","required","",2,"font-size","16px"],[4,"ngIf"],["mat-dialog-actions",""],["mat-stroked-button","","color","warn",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2,"Reject Branch Modifications"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return i.onClose()}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA()()(),e.TgZ(6,"div",3)(7,"p"),e._uU(8,"Are you sure you want to Reject "),e.TgZ(9,"strong"),e._uU(10),e.qZA(),e._uU(11," modifications ? Enter Remarks below and Click "),e.TgZ(12,"strong"),e._uU(13,"Reject Region Modification"),e.qZA(),e._uU(14," to Approve or "),e.TgZ(15,"strong"),e._uU(16,"Review Branch"),e.qZA(),e._uU(17," to view Branch details. "),e.qZA(),e.TgZ(18,"form",4)(19,"div",5)(20,"div",6)(21,"div",5)(22,"mat-form-field",7)(23,"mat-label",8),e._uU(24,"Remarks"),e.qZA(),e._UZ(25,"textarea",9),e.YNc(26,et,3,3,"mat-error",10),e.qZA()()()()()(),e.TgZ(27,"div",11)(28,"button",12),e.NdJ("click",function(){return i.onReview()}),e._uU(29,"Review Branch"),e.qZA(),e.TgZ(30,"button",13),e.NdJ("click",function(){return i.onSubmit()}),e._uU(31,"Reject Branch"),e.qZA()()),2&t){let n;e.xp6(10),e.Oqu(i.data.name),e.xp6(8),e.Q6J("formGroup",i.branchesForm),e.xp6(8),e.Q6J("ngIf",null==(n=i.branchesForm.get("remarks"))?null:n.invalid)}},dependencies:[w.O5,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u,T.lW,g.uh,g.xY,g.H8,u.TO,u.KE,u.hX,q.Hw,k.Nt,m.xw,m.SQ,m.yH,Z.X$]}),a})(),it=(()=>{class a{constructor(t,i,n,r,c,d,l){this.data=t,this.dialogRef=i,this.router=n,this.localStorage=r,this.hierarchyservice=c,this.encryptionService=d,this.toaster=l}ngOnInit(){}onReview(){this.dialogRef.close("review"),this.router.navigate(["/admin-configurations/view-branch-modifications",this.data?.id])}onApprove(){const t={recordId:this.data.id,checkerName:this.localStorage.get("user-entity")?.username,remarks:"",approve:!0},i=this.encryptionService.encryptData(t),n=i.split(":")[0],r=i.split(":")[1],c=i.split(":")[2];this.hierarchyservice.approveRejectBranchEdit(r,n).subscribe(d=>{const l=JSON.parse(d);if(200==l.code||201==l.code){const p=this.encryptionService.decryptData(l?.body,c);p&&(this.toaster.showSuccess(p?.message),this.dialogRef.close("approve"))}else this.toaster.showError(l?.body?.message)})}onClose(){this.dialogRef.close()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(g.WI),e.Y36(g.so),e.Y36(_.F0),e.Y36(C.n2),e.Y36(x),e.Y36(A.w),e.Y36(F.M))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-approve-branch-mondification"]],decls:23,vars:1,consts:[["mat-dialog-title","",2,"display","flex","justify-content","space-between","align-items","center"],[2,"flex","1","font-size","20px"],["mat-icon-button","","aria-label","Close dialog",2,"margin","0",3,"click"],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-stroked-button","","color","warn",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2,"Approve Branch Modifications"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return i.onClose()}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA()()(),e.TgZ(6,"div",3)(7,"p"),e._uU(8,"Are you sure you want to Approve "),e.TgZ(9,"strong"),e._uU(10),e.qZA(),e._uU(11," modifications? Click "),e.TgZ(12,"strong"),e._uU(13,"Approve Branch"),e.qZA(),e._uU(14," to Approve or "),e.TgZ(15,"strong"),e._uU(16,"Review Branch"),e.qZA(),e._uU(17," to view Branch details. "),e.qZA()(),e.TgZ(18,"div",4)(19,"button",5),e.NdJ("click",function(){return i.onReview()}),e._uU(20,"Review Branch"),e.qZA(),e.TgZ(21,"button",6),e.NdJ("click",function(){return i.onApprove()}),e._uU(22,"Approve Branch"),e.qZA()()),2&t&&(e.xp6(10),e.Oqu(i.data.name))},dependencies:[T.lW,g.uh,g.xY,g.H8,q.Hw]}),a})();const nt=["actionTemplate"],at=["statusTemplate"],rt=["changeStatusTemplate"];function ot(a,s){if(1&a&&(e.TgZ(0,"mat-option",14),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}const st=function(){return[5,10,20,50,100]};let ct=(()=>{class a{constructor(t,i,n,r,c,d,l,p){this.remoteSrv=t,this.cdr=i,this.encryptionservice=n,this.router=r,this.translate=c,this.dialog=d,this.diag1=l,this.localStorage=p,this.columns=[],this.filters=[],this.selectedFilter="",this.list=[],this.total=0,this.isLoading=!0,this.query={q:"",sort:"",order:"",page:0,per_page:10}}ngAfterViewInit(){this.columns=[{header:this.translate.stream("regions_table.number"),field:"rowNumber",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.branch_name"),field:"name",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.branch_code"),field:"code",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.region_name"),field:"region.name",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.created_by"),field:"createdBy",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.created_date"),field:"createdOn",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.modifiedBy"),field:"modifiedBy",width:"auto",resizable:!0},{header:this.translate.stream("table_kitchen_sink.actions"),field:"actions",width:"auto",pinned:"right",type:"button",buttons:[{type:"icon",icon:"visibility",color:"primary",tooltip:this.translate.stream("table_kitchen_sink.view_details"),click:t=>this.viewDetailedRecord(t)},{type:"icon",icon:"check_circle",color:"accent",tooltip:this.translate.stream("table_kitchen_sink.approve"),click:t=>this.openApproveDialog(t),disabled:t=>t.modifiedBy==this.username||"Approved"==t.changeStatus},{type:"icon",icon:"cancel",color:"warn",tooltip:this.translate.stream("table_kitchen_sink.reject"),click:t=>this.openRejectDialog(t),disabled:t=>t.modifiedBy==this.username||"Approved"==t.changeStatus}]}]}getStatusColor(t){switch(t){case"Active":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Inactive":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}getChangeStatusColor(t){switch(t){case"Pending":return{color:"goldenrod","background-color":"#FFF8E1","border-radius":"12px",padding:"4px 8px"};case"Approved":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Disapproved":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};case"Returned":return{color:"blue","background-color":"#E6F4FD","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}get params(){const t=Object.assign({},this.query);return t.page+=1,t}ngOnInit(){const t=this.localStorage.get("user-entity");t&&(this.username=t?.username),this.getBranches()}delete(t){this.diag1.alert(`You have deleted ${t.position}!`)}getBranches(){const t=this.localStorage.get("user-entity");this.username=t?.username;const i=t?.organization?.id,r=this.encryptionservice.encryptData({status:this.selectedFilter,page:this.query.page,size:this.query.per_page,organization:i,region:0}),c=r.split(":")[2],d=r.split(":")[1],l=r.split(":")[0];this.remoteSrv.getAllmodifiedBranches(l,d).subscribe(p=>{const h=JSON.parse(p),f=this.encryptionservice.decryptData(h?.body,c);this.list=f.data.map((S,B)=>({...S,rowNumber:this.query.page*this.query.per_page+B+1})),this.total=f.data.total,this.filters=f.changeStatuses,this.isLoading=!1,this.cdr.detectChanges()},p=>{console.error("Error fetching roles:",p),this.isLoading=!1})}viewDetailedRecord(t){var i=t?.id;i&&this.router.navigate(["/admin-configurations/view-branch-modifications",i])}create(){this.router.navigateByUrl("/admin-configurations/add-hierarchy")}getNextPage(t){this.query.page=t.pageIndex,this.query.per_page=t.pageSize,this.getBranches()}search(){this.query.page=0,this.getBranches()}onFilterChange(t){this.selectedFilter=t.value,this.getBranches()}openApproveDialog(t){this.dialog.open(it,{width:"400px",data:t}).afterClosed().subscribe(()=>{this.getBranches()})}openRejectDialog(t){this.dialog.open(tt,{width:"400px",data:t}).afterClosed().subscribe(()=>{this.getBranches()})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(x),e.Y36(e.sBO),e.Y36(A.w),e.Y36(_.F0),e.Y36(Z.sK),e.Y36(g.uw),e.Y36(M.cP),e.Y36(C.n2))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-approve-branchmodificationlist"]],viewQuery:function(t,i){if(1&t&&(e.Gf(nt,7),e.Gf(at,7),e.Gf(rt,7)),2&t){let n;e.iGM(n=e.CRH())&&(i.actionTemplate=n.first),e.iGM(n=e.CRH())&&(i.statusTemplate=n.first),e.iGM(n=e.CRH())&&(i.changeStatusTemplate=n.first)}},decls:19,vars:13,consts:[[2,"border","1px solid #ccc","padding","16px"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"col"],[2,"margin","0"],[1,"d-flex","justify-content-between","w-100","flex-wrap"],["fxFlex","33.33%","fxFlex.lt-sm","100%",1,"px-2"],["appearance","outline",2,"width","100%"],["name","selectedFilter",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","39.34%","fxFlex.lt-sm","100%",1,"d-flex","justify-content-between","align-items-center","px-2"],["fxFlex","27.33%","fxFlex.lt-sm","100%",1,"px-2"],["matPrefix",""],["matInput","","name","q","placeholder","Search",3,"ngModel","ngModelChange"],[3,"data","columns","length","loading","rowStriped","pageOnFront","pageIndex","pageSize","pageSizeOptions","page"],[3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Branches Modifications for Approval"),e.qZA()()()(),e.TgZ(5,"div",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),e._uU(9,"Select Filter"),e.qZA(),e.TgZ(10,"mat-select",7),e.NdJ("ngModelChange",function(r){return i.selectedFilter=r})("selectionChange",function(r){return i.onFilterChange(r)}),e.YNc(11,ot,2,2,"mat-option",8),e.qZA()()(),e._UZ(12,"div",9),e.TgZ(13,"div",10)(14,"mat-form-field",6)(15,"mat-icon",11),e._uU(16,"search"),e.qZA(),e.TgZ(17,"input",12),e.NdJ("ngModelChange",function(r){return i.query.q=r}),e.qZA()()()(),e.TgZ(18,"mtx-grid",13),e.NdJ("page",function(r){return i.getNextPage(r)}),e.qZA()),2&t&&(e.xp6(10),e.Q6J("ngModel",i.selectedFilter),e.xp6(1),e.Q6J("ngForOf",i.filters),e.xp6(6),e.Q6J("ngModel",i.query.q),e.xp6(1),e.Q6J("data",i.list)("columns",i.columns)("length",i.total)("loading",i.isLoading)("rowStriped",!0)("pageOnFront",!0)("pageIndex",i.query.page)("pageSize",i.query.per_page)("pageSizeOptions",e.DdM(12,st)))},dependencies:[w.sg,o.Fj,o.JJ,o.On,R.ey,v.a8,u.KE,u.hX,u.qo,q.Hw,k.Nt,N.gD,z.CM,m.yH]}),a})(),lt=(()=>{class a{constructor(t,i,n,r,c,d,l){this.data=t,this.dialogRef=i,this.router=n,this.localStorage=r,this.hierarchyservice=c,this.encryptionService=d,this.toaster=l}ngOnInit(){}onReview(){this.dialogRef.close("review"),this.router.navigate(["/admin-configurations/view-branchapproval",this.data?.id])}onApprove(){const t={recordId:this.data.id,checkerName:this.localStorage.get("user-entity")?.username,remarks:"",approve:!0},i=this.encryptionService.encryptData(t),n=i.split(":")[0],r=i.split(":")[1],c=i.split(":")[2];this.hierarchyservice.approveRejectBranch(r,n).subscribe(d=>{const l=JSON.parse(d);if(200==l.code||201==l.code){const p=this.encryptionService.decryptData(l?.body,c);p&&(this.toaster.showSuccess(p?.message),this.dialogRef.close("approve"))}else this.toaster.showError(l?.body?.message)})}onClose(){this.dialogRef.close()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(g.WI),e.Y36(g.so),e.Y36(_.F0),e.Y36(C.n2),e.Y36(x),e.Y36(A.w),e.Y36(F.M))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-approve-branch"]],decls:23,vars:1,consts:[["mat-dialog-title","",2,"display","flex","justify-content","space-between","align-items","center"],[2,"flex","1","font-size","20px"],["mat-icon-button","","aria-label","Close dialog",2,"margin","0",3,"click"],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-stroked-button","","color","warn",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2,"Approve Branch"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return i.onClose()}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA()()(),e.TgZ(6,"div",3)(7,"p"),e._uU(8,"Are you sure you want to Approve "),e.TgZ(9,"strong"),e._uU(10),e.qZA(),e._uU(11,"? Click "),e.TgZ(12,"strong"),e._uU(13,"Approve Branch"),e.qZA(),e._uU(14," to Approve or "),e.TgZ(15,"strong"),e._uU(16,"Review Branch"),e.qZA(),e._uU(17," to view Branch details. "),e.qZA()(),e.TgZ(18,"div",4)(19,"button",5),e.NdJ("click",function(){return i.onReview()}),e._uU(20,"Review Branch"),e.qZA(),e.TgZ(21,"button",6),e.NdJ("click",function(){return i.onApprove()}),e._uU(22,"Approve Branch"),e.qZA()()),2&t&&(e.xp6(10),e.Oqu(i.data.name))},dependencies:[T.lW,g.uh,g.xY,g.H8,q.Hw]}),a})();function pt(a,s){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}let dt=(()=>{class a{constructor(t,i,n,r,c,d,l,p){this.data=t,this.dialogRef=i,this.fb=n,this.router=r,this.localStorage=c,this.hierarchyservice=d,this.encryptionService=l,this.toaster=p,this.branchesForm=this.fb.group({remarks:["",o.kI.required]})}ngOnInit(){}onReview(){this.dialogRef.close("review"),this.router.navigate(["/admin-configurations/approve-branch",this.data?.id])}onClose(){this.dialogRef.close()}onSubmit(){const t={recordId:this.data.id,checkerName:this.localStorage.get("user-entity")?.username,remarks:this.branchesForm.value.remarks,approve:!1},i=this.encryptionService.encryptData(t),n=i.split(":")[0],r=i.split(":")[1],c=i.split(":")[2];this.hierarchyservice.approveRejectBranch(r,n).subscribe(d=>{const l=JSON.parse(d);if(200==l.code||201==l.code){const p=this.encryptionService.decryptData(l?.body,c);p&&(this.toaster.showSuccess(p?.message),this.dialogRef.close("reject"))}else this.toaster.showError(l?.body?.message)})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(g.WI),e.Y36(g.so),e.Y36(o.qu),e.Y36(_.F0),e.Y36(C.n2),e.Y36(x),e.Y36(A.w),e.Y36(F.M))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-reject-branch"]],decls:32,vars:3,consts:[["mat-dialog-title","",2,"display","flex","justify-content","space-between","align-items","center"],[2,"flex","1","font-size","20px"],["mat-icon-button","","aria-label","Close dialog",2,"margin","0",3,"click"],["mat-dialog-content",""],[1,"form-field-full",3,"formGroup"],["fxFlex","100","fxFlex.lt-sm","100"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","placeholder","Remarks","formControlName","remarks","required","",2,"font-size","16px"],[4,"ngIf"],["mat-dialog-actions",""],["mat-stroked-button","","color","warn",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2,"Reject Region"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return i.onClose()}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA()()(),e.TgZ(6,"div",3)(7,"p"),e._uU(8,"Are you sure you want to Reject "),e.TgZ(9,"strong"),e._uU(10),e.qZA(),e._uU(11,"? Enter Remarks below and Click "),e.TgZ(12,"strong"),e._uU(13,"Reject Branch"),e.qZA(),e._uU(14," to Approve or "),e.TgZ(15,"strong"),e._uU(16,"Review Branch"),e.qZA(),e._uU(17," to view Branch details. "),e.qZA(),e.TgZ(18,"form",4)(19,"div",5)(20,"div",6)(21,"div",5)(22,"mat-form-field",7)(23,"mat-label",8),e._uU(24,"Remarks"),e.qZA(),e._UZ(25,"textarea",9),e.YNc(26,pt,3,3,"mat-error",10),e.qZA()()()()()(),e.TgZ(27,"div",11)(28,"button",12),e.NdJ("click",function(){return i.onReview()}),e._uU(29,"Review Branch"),e.qZA(),e.TgZ(30,"button",13),e.NdJ("click",function(){return i.onSubmit()}),e._uU(31,"Reject Branch"),e.qZA()()),2&t){let n;e.xp6(10),e.Oqu(i.data.name),e.xp6(8),e.Q6J("formGroup",i.branchesForm),e.xp6(8),e.Q6J("ngIf",null==(n=i.branchesForm.get("remarks"))?null:n.invalid)}},dependencies:[w.O5,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u,T.lW,g.uh,g.xY,g.H8,u.TO,u.KE,u.hX,q.Hw,k.Nt,m.xw,m.SQ,m.yH,Z.X$]}),a})();const ut=["actionTemplate"],gt=["statusTemplate"],mt=["validityStatusTemplate"];function ht(a,s){if(1&a&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function ft(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",18)(1,"mat-icon"),e._uU(2,"more_horiz"),e.qZA()(),e.TgZ(3,"mat-menu",null,19)(5,"button",20),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.viewDetailedRecord(r))}),e.TgZ(6,"mat-icon",21),e._uU(7,"visibility"),e.qZA(),e._uU(8," View "),e.qZA(),e.TgZ(9,"button",22),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.openApproveDialog(r))}),e.TgZ(10,"mat-icon",23),e._uU(11,"check_circle"),e.qZA(),e._uU(12," Approve "),e.qZA(),e.TgZ(13,"button",22),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.openRejectDialog(r))}),e.TgZ(14,"mat-icon",24),e._uU(15,"block"),e.qZA(),e._uU(16," Reject "),e.qZA()()}if(2&a){const t=s.$implicit,i=e.MAs(4),n=e.oxw();e.Q6J("matMenuTriggerFor",i),e.xp6(9),e.Q6J("disabled",t.createdBy===n.username||"Approved"===t.validityStatus),e.xp6(4),e.Q6J("disabled",t.createdBy===n.username||"Approved"===t.validityStatus)}}function _t(a,s){if(1&a&&(e.TgZ(0,"span",25),e._uU(1),e.qZA()),2&a){const t=s.$implicit,i=e.oxw();e.Q6J("ngStyle",i.getStatusColor(t.status)),e.xp6(1),e.hij(" ",t.status," ")}}function yt(a,s){if(1&a&&(e.TgZ(0,"span",25),e._uU(1),e.qZA()),2&a){const t=s.$implicit,i=e.oxw();e.Q6J("ngStyle",i.getValidityStatusColor(t.validityStatus)),e.xp6(1),e.hij(" ",t.validityStatus," ")}}const vt=function(){return[5,10,20,50,100]};let bt=(()=>{class a{constructor(t,i,n,r,c,d,l,p){this.remoteSrv=t,this.cdr=i,this.encryptionservice=n,this.router=r,this.translate=c,this.dialog=d,this.diag1=l,this.localStorage=p,this.columns=[],this.filters=[],this.selectedFilter="",this.list=[],this.total=0,this.isLoading=!0,this.query={q:"",sort:"",order:"",page:0,per_page:10}}ngAfterViewInit(){this.columns=[{header:this.translate.stream("regions_table.number"),field:"rowNumber",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.Level_2"),field:"region.name",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.branch_name"),field:"name",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.branch_code"),field:"code",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.created_by"),field:"createdBy",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.created_date"),field:"createdOn",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.status1"),field:"status",width:"auto",cellTemplate:this.statusTemplate,resizable:!0},{header:"Validity Status",field:"validityStatus",width:"auto",cellTemplate:this.validityStatusTemplate,resizable:!0},{header:this.translate.stream("regions_table.actions"),field:"actions",cellTemplate:this.actionTemplate}]}getStatusColor(t){switch(t){case"Active":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Inactive":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}getValidityStatusColor(t){switch(t){case"Pending":return{color:"goldenrod","background-color":"#FFF8E1","border-radius":"12px",padding:"4px 8px"};case"Approved":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Disapproved":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};case"Returned":return{color:"blue","background-color":"#E6F4FD","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}get params(){const t=Object.assign({},this.query);return t.page+=1,t}ngOnInit(){this.getBranches()}delete(t){this.diag1.alert(`You have deleted ${t.position}!`)}getBranches(){const t=this.localStorage.get("user-entity");this.username=t?.username;const i=t?.organization?.id,r=this.encryptionservice.encryptData({status:this.selectedFilter,page:this.query.page,size:this.query.per_page,organization:i,region:0}),c=r.split(":")[2],d=r.split(":")[1],l=r.split(":")[0];this.remoteSrv.getBranchesforApproval(l,d).subscribe(p=>{const h=JSON.parse(p),f=this.encryptionservice.decryptData(h?.body,c);this.list=f.data.map((S,B)=>({...S,rowNumber:this.query.page*this.query.per_page+B+1})),this.total=f.data.total,this.filters=f.validityStatuses,this.isLoading=!1,this.cdr.detectChanges()},p=>{console.error("Error fetching roles:",p),this.isLoading=!1})}viewDetailedRecord(t){var i=t?.id;i&&this.router.navigate(["/admin-configurations/view-branchapproval",i])}create(){this.router.navigateByUrl("/admin-configurations/add-hierarchy")}getNextPage(t){this.query.page=t.pageIndex,this.query.per_page=t.pageSize,this.getBranches()}search(){this.query.page=0,this.getBranches()}onFilterChange(t){this.selectedFilter=t.value,this.getBranches()}openApproveDialog(t){this.dialog.open(lt,{width:"400px",data:t}).afterClosed().subscribe(()=>{this.getBranches()})}openRejectDialog(t){this.dialog.open(dt,{width:"400px",data:t}).afterClosed().subscribe(()=>{this.getBranches()})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(x),e.Y36(e.sBO),e.Y36(A.w),e.Y36(_.F0),e.Y36(Z.sK),e.Y36(g.uw),e.Y36(M.cP),e.Y36(C.n2))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-approve-branchlist"]],viewQuery:function(t,i){if(1&t&&(e.Gf(ut,7),e.Gf(gt,7),e.Gf(mt,7)),2&t){let n;e.iGM(n=e.CRH())&&(i.actionTemplate=n.first),e.iGM(n=e.CRH())&&(i.statusTemplate=n.first),e.iGM(n=e.CRH())&&(i.validityStatusTemplate=n.first)}},decls:25,vars:13,consts:[[2,"border","1px solid #ccc","padding","16px"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"col"],[2,"margin","0"],[1,"d-flex","justify-content-between","w-100","flex-wrap"],["fxFlex","33.33%","fxFlex.lt-sm","100%",1,"px-2"],["appearance","outline",2,"width","100%"],["name","selectedFilter",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","39.34%","fxFlex.lt-sm","100%",1,"d-flex","justify-content-between","align-items-center","px-2"],["fxFlex","27.33%","fxFlex.lt-sm","100%",1,"px-2"],["matPrefix",""],["matInput","","name","q","placeholder","Search",3,"ngModel","ngModelChange"],[3,"data","columns","length","loading","rowStriped","pageOnFront","pageIndex","pageSize","pageSizeOptions","page"],["actionTemplate",""],["statusTemplate",""],["validityStatusTemplate",""],[3,"value"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["color","primary"],["mat-menu-item","",3,"disabled","click"],["color","accent"],["color","warn"],[3,"ngStyle"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Branches for Approval"),e.qZA()()()(),e.TgZ(5,"div",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),e._uU(9,"Select Filter"),e.qZA(),e.TgZ(10,"mat-select",7),e.NdJ("ngModelChange",function(r){return i.selectedFilter=r})("selectionChange",function(r){return i.onFilterChange(r)}),e.YNc(11,ht,2,2,"mat-option",8),e.qZA()()(),e._UZ(12,"div",9),e.TgZ(13,"div",10)(14,"mat-form-field",6)(15,"mat-icon",11),e._uU(16,"search"),e.qZA(),e.TgZ(17,"input",12),e.NdJ("ngModelChange",function(r){return i.query.q=r}),e.qZA()()()(),e.TgZ(18,"mtx-grid",13),e.NdJ("page",function(r){return i.getNextPage(r)}),e.qZA(),e.YNc(19,ft,17,3,"ng-template",null,14,e.W1O),e.YNc(21,_t,2,2,"ng-template",null,15,e.W1O),e.YNc(23,yt,2,2,"ng-template",null,16,e.W1O)),2&t&&(e.xp6(10),e.Q6J("ngModel",i.selectedFilter),e.xp6(1),e.Q6J("ngForOf",i.filters),e.xp6(6),e.Q6J("ngModel",i.query.q),e.xp6(1),e.Q6J("data",i.list)("columns",i.columns)("length",i.total)("loading",i.isLoading)("rowStriped",!0)("pageOnFront",!0)("pageIndex",i.query.page)("pageSize",i.query.per_page)("pageSizeOptions",e.DdM(12,vt)))},dependencies:[w.sg,w.PC,o.Fj,o.JJ,o.On,R.ey,T.lW,v.a8,u.KE,u.hX,u.qo,q.Hw,k.Nt,U.VK,U.OP,U.p6,N.gD,z.CM,m.yH,Y.Zl]}),a})();function xt(a,s){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function Zt(a,s){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}let At=(()=>{class a{constructor(t,i,n,r,c,d,l,p,h,f){this.service=t,this.encryptionService=i,this.route=n,this.fb=r,this.dateAdapter=c,this.translate=d,this.router=l,this.toaster=p,this.dialog=h,this.localService=f,this.isLoading=!0,this.form=this.fb.nonNullable.group({name:["",[o.kI.required,o.kI.maxLength(50)]],user:[""],status:[!1],region:[""],code:[""]})}ngOnDestroy(){this.translateSubscription.unsubscribe()}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.getBranchDetails(),this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)})}getBranchDetails(){const t=this.encryptionService.generateAesKey(),i=this.encryptionService.generatebase64Key(t),n=this.encryptionService.encryptWithRSA(i);this.service.getBranchById(this.id,n).subscribe(r=>{const c=JSON.parse(r);this.details=this.encryptionService.decryptData(c?.body,i),this.details&&(this.details=this.details,this.form.patchValue({name:this.details?.name||"",region:this.details?.region.name||"",code:this.details?.code||"",status:"Active"==this.details?.status})),this.isLoading=!1},r=>{this.isLoading=!1})}toggleStatus(t){this.form.get("status")?.setValue(t.checked)}return(){this.router.navigateByUrl("/admin-configurations/approve-branch")}update(){const t=this.localService.get("user-entity"),n=this.encryptionService.encryptData({id:this.id,name:this.form.value.name,code:t?.username,status:this.form.value.status}),r=n.split(":")[0],c=n.split(":")[1],d=n.split(":")[2];this.service.updateBranch(c,r).subscribe(l=>{const p=JSON.parse(l);if(200==p.code||201==p.code){const h=this.encryptionService.decryptData(p.body,d);h&&(this.toaster.showSuccess(h?.message),this.return())}else this.toaster.showError(p?.body?.message)})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(x),e.Y36(A.w),e.Y36(_.gz),e.Y36(o.qu),e.Y36(R._A),e.Y36(Z.sK),e.Y36(_.F0),e.Y36(F.M),e.Y36(g.uw),e.Y36(C.n2))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-view-branch-approvaldata"]],decls:32,vars:4,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","24px","border","2px solid #304254","border-radius","8px"],[2,"font-size","24px","margin-bottom","12px","font-family","'Inter', sans-serif","color","#304254"],[1,"form-field-full",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex","33.33","fxFlex.lt-sm","100"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","placeholder","Branch Name","formControlName","name","required","",2,"font-size","16px"],[4,"ngIf"],["readonly","","matInput","","placeholder","Code","formControlName","code","required","",2,"font-size","16px"],["matInput","","placeholder","Region","formControlName","region","required","",2,"font-size","16px"],["app","","formControlName","status",2,"font-size","16px","padding-top","20px","padding-bottom","20px",3,"checked","change"],[1,"d-flex","justify-content-between","flex-wrap",2,"margin-top","24px"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","font-size","14px","margin-right","10px",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title",3),e._uU(4," View Branch Details "),e.qZA(),e.TgZ(5,"form",4)(6,"div",5)(7,"div",6)(8,"mat-form-field",7)(9,"mat-label",8),e._uU(10,"Branch Name"),e.qZA(),e._UZ(11,"input",9),e.YNc(12,xt,3,3,"mat-error",10),e.qZA()(),e.TgZ(13,"div",6)(14,"mat-form-field",7)(15,"mat-label",8),e._uU(16,"Branch Code"),e.qZA(),e._UZ(17,"input",11),e.qZA()(),e.TgZ(18,"div",6)(19,"mat-form-field",7)(20,"mat-label",8),e._uU(21,"Region"),e.qZA(),e._UZ(22,"input",12),e.YNc(23,Zt,3,3,"mat-error",10),e.qZA()(),e.TgZ(24,"div",6)(25,"mat-checkbox",13),e.NdJ("change",function(r){return i.toggleStatus(r)}),e._uU(26," Activate/Deactivate "),e.qZA()()(),e.TgZ(27,"div",14)(28,"button",15),e.NdJ("click",function(){return i.return()}),e.TgZ(29,"mat-icon"),e._uU(30,"arrow_back"),e.qZA(),e._uU(31," Back "),e.qZA()()()()()()),2&t){let n,r,c;e.xp6(5),e.Q6J("formGroup",i.form),e.xp6(7),e.Q6J("ngIf",null==(n=i.form.get("name"))?null:n.invalid),e.xp6(11),e.Q6J("ngIf",null==(r=i.form.get("region"))?null:r.invalid),e.xp6(2),e.Q6J("checked",null==(c=i.form.get("status"))?null:c.value)}},dependencies:[w.O5,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u,T.lW,v.a8,v.n5,O.oG,u.TO,u.KE,u.hX,q.Hw,k.Nt,m.xw,m.SQ,m.yH,Z.X$]}),a})();var J=b(3848);const wt=[{path:"hierarchy",component:I},{path:"branch-list",component:Ee},{path:"region-list",component:$e},{path:"hierarchy",component:I},{path:"add-hierarchy",component:L},{path:"manage-hierarchy/:id",component:j},{path:"hierarchy-approve",component:he},{path:"hierarchy-reject",component:H},{path:"hierarchy-modifications-approve",component:Oe},{path:"create-branch",component:Ze},{path:"manage-hierarchy-approval/:id",component:Ce},{path:"manage-branch/:id",component:Re},{path:"approve-branch",component:bt},{path:"approve-branch-modification",component:ct},{path:"view-branchapproval/:id",component:At},{path:"view-hierarachy/:id",component:(()=>{class a{constructor(t,i,n,r,c,d,l){this.hierarchyservice=t,this.encryptionService=i,this.route=n,this.fb=r,this.dateAdapter=c,this.translate=d,this.router=l,this.isLoading=!0,this.regionsForm=this.fb.nonNullable.group({name:["",[o.kI.required,o.kI.maxLength(50)]],code:["",[o.kI.required,o.kI.maxLength(100)]],status:[""],country:[""]}),this.branchesForm=this.fb.nonNullable.group({branch:["",[o.kI.required,o.kI.maxLength(50)]],code:["",[o.kI.required,o.kI.maxLength(100)]],status:[""],region:[""]})}ngOnDestroy(){this.translateSubscription.unsubscribe()}ngOnInit(){this.branchId=this.route.snapshot.paramMap.get("id"),this.getHierarchyDetails(),this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)})}getHierarchyDetails(){const t=this.encryptionService.generateAesKey(),i=this.encryptionService.generatebase64Key(t),n=this.encryptionService.encryptWithRSA(i);this.hierarchyservice.getHierarchyData(this.branchId,n).subscribe(r=>{const c=JSON.parse(r);this.regiondata=this.encryptionService.decryptData(c?.body,i),this.regiondata&&(this.regiondata=this.regiondata,this.regionsForm.patchValue({name:this.regiondata?.region?.name||"",code:this.regiondata?.region?.code||"",status:this.regiondata?.region?.status,country:this.regiondata?.region?.organization?.country?.name}),this.branchesForm.patchValue({branch:this.regiondata?.name||"",code:this.regiondata?.code||"",status:this.regiondata?.status,region:this.regiondata?.region?.name})),this.isLoading=!1},r=>{console.error("Error fetching user profile:",r),this.isLoading=!1})}return(){this.router.navigateByUrl("/admin-configurations/hierarchy")}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(x),e.Y36(A.w),e.Y36(_.gz),e.Y36(o.qu),e.Y36(R._A),e.Y36(Z.sK),e.Y36(_.F0))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-view-hierarchy"]],decls:70,vars:2,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%","overflow-x","hidden"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","16px","overflow-x","hidden"],["label","Region Details"],[2,"font-size","24px","margin-bottom","4px","margin-top","5px","font-family","'Inter', sans-serif","color","#304254"],[2,"font-weight","normal","opacity","0.6","margin-top","0","padding","0"],[1,"form-field-full",2,"overflow-x","hidden",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","5px grid"],["fxFlex","33.33","fxFlex.lt-sm","100"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","readonly","","placeholder","Region Name","formControlName","name","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Region Code","formControlName","code","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Country","formControlName","country","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Region Status","formControlName","status","required","",2,"font-size","16px"],[1,"d-flex","justify-content-between","flex-wrap",2,"margin-top","24px"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","font-size","14px","margin-right","10px",3,"click"],["label","Branch Details"],["matInput","","readonly","","placeholder","Branch Name","formControlName","branch","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Branch Code","formControlName","code","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Region","formControlName","region","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Branch Status","formControlName","status","required","",2,"font-size","16px"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-tab-group")(4,"mat-tab",3)(5,"mat-card-title",4),e._uU(6," Region "),e.qZA(),e.TgZ(7,"h6",5),e._uU(8," View Region Details "),e.qZA(),e.TgZ(9,"mat-card-content")(10,"form",6)(11,"div",7)(12,"div",8)(13,"mat-form-field",9)(14,"mat-label",10),e._uU(15,"Region Name"),e.qZA(),e._UZ(16,"input",11),e.qZA()(),e.TgZ(17,"div",8)(18,"mat-form-field",9)(19,"mat-label",10),e._uU(20,"Region Code"),e.qZA(),e._UZ(21,"input",12),e.qZA()(),e.TgZ(22,"div",8)(23,"mat-form-field",9)(24,"mat-label",10),e._uU(25,"Country"),e.qZA(),e._UZ(26,"input",13),e.qZA()(),e.TgZ(27,"div",8)(28,"mat-form-field",9)(29,"mat-label",10),e._uU(30,"Region Status"),e.qZA(),e._UZ(31,"input",14),e.qZA()()(),e.TgZ(32,"div",15)(33,"button",16),e.NdJ("click",function(){return i.return()}),e.TgZ(34,"mat-icon"),e._uU(35,"arrow_back"),e.qZA(),e._uU(36," Back "),e.qZA()()()()(),e.TgZ(37,"mat-tab",17)(38,"mat-card-title",4),e._uU(39," Branch "),e.qZA(),e.TgZ(40,"h6",5),e._uU(41," Branch Details "),e.qZA(),e.TgZ(42,"mat-card-content")(43,"form",6)(44,"div",7)(45,"div",8)(46,"mat-form-field",9)(47,"mat-label",10),e._uU(48,"Branch Name"),e.qZA(),e._UZ(49,"input",18),e.qZA()(),e.TgZ(50,"div",8)(51,"mat-form-field",9)(52,"mat-label",10),e._uU(53,"Branch Code"),e.qZA(),e._UZ(54,"input",19),e.qZA()(),e.TgZ(55,"div",8)(56,"mat-form-field",9)(57,"mat-label",10),e._uU(58,"Region"),e.qZA(),e._UZ(59,"input",20),e.qZA()(),e.TgZ(60,"div",8)(61,"mat-form-field",9)(62,"mat-label",10),e._uU(63,"Branch Status"),e.qZA(),e._UZ(64,"input",21),e.qZA()()(),e.TgZ(65,"div",15)(66,"button",16),e.NdJ("click",function(){return i.return()}),e.TgZ(67,"mat-icon"),e._uU(68,"arrow_back"),e.qZA(),e._uU(69," Back "),e.qZA()()()()()()()()()),2&t&&(e.xp6(10),e.Q6J("formGroup",i.regionsForm),e.xp6(33),e.Q6J("formGroup",i.branchesForm))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u,T.lW,v.a8,v.dn,v.n5,u.KE,u.hX,q.Hw,k.Nt,J.SP,J.uX,m.xw,m.SQ,m.yH]}),a})()},{path:"view-region-modifications/:id",component:(()=>{class a{constructor(t,i,n,r,c,d,l){this.hierarchyservice=t,this.encryptionService=i,this.route=n,this.fb=r,this.dateAdapter=c,this.translate=d,this.router=l,this.isLoading=!0,this.regionsForm=this.fb.nonNullable.group({name:["",[o.kI.required,o.kI.maxLength(50)]],code:["",[o.kI.required,o.kI.maxLength(100)]],status:[""],country:[""],createdBy:[""],createdOn:[],approvalStatus:[""],checkedBy:[""],checkedOn:[""],modifiedBy:[""],modifiedOn:[""]}),this.oldregionsForm=this.fb.nonNullable.group({name:["",[o.kI.required,o.kI.maxLength(50)]],code:["",[o.kI.required,o.kI.maxLength(100)]],status:[""],country:[""],createdBy:[""],createdOn:[],approvalStatus:[""],checkedBy:[""],checkedOn:[""],modifiedBy:[""],modifiedOn:[""]})}ngOnDestroy(){this.translateSubscription.unsubscribe()}ngOnInit(){this.regionId=this.route.snapshot.paramMap.get("id"),this.getRegions(),this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)})}getRegions(){const t=this.encryptionService.generateAesKey(),i=this.encryptionService.generatebase64Key(t),n=this.encryptionService.encryptWithRSA(i);this.hierarchyservice.getRegionDetails(this.regionId,n).subscribe(r=>{const c=JSON.parse(r);this.region=this.encryptionService.decryptData(c?.body,i),console.log(this.region),this.region&&(this.region=this.region,this.newregion=JSON.parse(this.region?.changedValues),this.oldregionsForm.patchValue({name:this.region?.name||"",code:this.region?.code||"",status:this.region?.status,country:this.region?.organization?.country?.name,createdBy:this.region?.createdBy||"",createdOn:this.region?.createdOn||"",approvalStatus:this.region?.changeStatus||"",modifiedBy:this.region?.modifiedBy||"",modifiedOn:this.region?.modifiedOn||"",checkedBy:this.region?.checkedBy||"",checkedOn:this.region?.checkedOn||""}),this.regionsForm.patchValue({name:this.newregion?.name||"",code:this.newregion?.code||"",status:this.newregion?.status,country:this.newregion?.organization?.country?.name,createdBy:this.newregion?.createdBy||"",createdOn:this.newregion?.createdOn||"",approvalStatus:this.newregion?.changeStatus||"",modifiedBy:this.newregion?.modifiedBy||"",modifiedOn:this.newregion?.modifiedOn||"",checkedBy:this.newregion?.checkedBy||"",checkedOn:this.newregion?.checkedOn||""})),this.isLoading=!1},r=>{console.error("Error fetching Regions Data:",r),this.isLoading=!1})}return(){this.router.navigateByUrl("/admin-configurations/hierarchy-modifications-approve")}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(x),e.Y36(A.w),e.Y36(_.gz),e.Y36(o.qu),e.Y36(R._A),e.Y36(Z.sK),e.Y36(_.F0))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-view-region-modifications"]],decls:130,vars:2,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%","overflow-x","hidden"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","16px","overflow-x","hidden"],["label","New Region Details"],[2,"font-size","24px","margin-bottom","4px","margin-top","5px","font-family","'Inter', sans-serif","color","#304254"],[2,"font-weight","normal","opacity","0.6","margin-top","0","padding","0"],[1,"form-field-full",2,"overflow-x","hidden",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","5px grid"],["fxFlex","33.33","fxFlex.lt-sm","100"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","readonly","","placeholder","Region Name","formControlName","name","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Region Code","formControlName","code","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Country","formControlName","country","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Created By","formControlName","createdBy","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Date Created","formControlName","createdOn","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Approval Status","formControlName","approvalStatus","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Checker","formControlName","checkedBy","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Checked On","formControlName","checkedOn","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Modified By","formControlName","modifiedBy","required","",2,"font-size","16px"],[1,"d-flex","justify-content-between","flex-wrap",2,"margin-top","24px"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","font-size","14px","margin-right","10px",3,"click"],["label","Old Region Details"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-tab-group")(4,"mat-tab",3)(5,"mat-card-title",4),e._uU(6," Region Details After Modification "),e.qZA(),e.TgZ(7,"h6",5),e._uU(8," Review Region Modification Details "),e.qZA(),e.TgZ(9,"mat-card-content")(10,"form",6)(11,"div",7)(12,"div",8)(13,"mat-form-field",9)(14,"mat-label",10),e._uU(15,"Region Name"),e.qZA(),e._UZ(16,"input",11),e.qZA()(),e.TgZ(17,"div",8)(18,"mat-form-field",9)(19,"mat-label",10),e._uU(20,"Region Code"),e.qZA(),e._UZ(21,"input",12),e.qZA()(),e.TgZ(22,"div",8)(23,"mat-form-field",9)(24,"mat-label",10),e._uU(25,"Country"),e.qZA(),e._UZ(26,"input",13),e.qZA()(),e.TgZ(27,"div",8)(28,"mat-form-field",9)(29,"mat-label",10),e._uU(30,"Created By"),e.qZA(),e._UZ(31,"input",14),e.qZA()(),e.TgZ(32,"div",8)(33,"mat-form-field",9)(34,"mat-label",10),e._uU(35,"Date Created"),e.qZA(),e._UZ(36,"input",15),e.qZA()(),e.TgZ(37,"div",8)(38,"mat-form-field",9)(39,"mat-label",10),e._uU(40,"Approval Status"),e.qZA(),e._UZ(41,"input",16),e.qZA()(),e.TgZ(42,"div",8)(43,"mat-form-field",9)(44,"mat-label",10),e._uU(45,"Checker"),e.qZA(),e._UZ(46,"input",17),e.qZA()(),e.TgZ(47,"div",8)(48,"mat-form-field",9)(49,"mat-label",10),e._uU(50,"Checked On"),e.qZA(),e._UZ(51,"input",18),e.qZA()(),e.TgZ(52,"div",8)(53,"mat-form-field",9)(54,"mat-label",10),e._uU(55,"Modified By"),e.qZA(),e._UZ(56,"input",19),e.qZA()(),e.TgZ(57,"div",8)(58,"mat-form-field",9)(59,"mat-label",10),e._uU(60,"Modified By"),e.qZA(),e._UZ(61,"input",19),e.qZA()()(),e.TgZ(62,"div",20)(63,"button",21),e.NdJ("click",function(){return i.return()}),e.TgZ(64,"mat-icon"),e._uU(65,"arrow_back"),e.qZA(),e._uU(66," Back "),e.qZA()()()()(),e.TgZ(67,"mat-tab",22)(68,"mat-card-title",4),e._uU(69," Region Details Before Modification "),e.qZA(),e.TgZ(70,"h6",5),e._uU(71," Review Region Modification Details "),e.qZA(),e.TgZ(72,"mat-card-content")(73,"form",6)(74,"div",7)(75,"div",8)(76,"mat-form-field",9)(77,"mat-label",10),e._uU(78,"Region Name"),e.qZA(),e._UZ(79,"input",11),e.qZA()(),e.TgZ(80,"div",8)(81,"mat-form-field",9)(82,"mat-label",10),e._uU(83,"Region Code"),e.qZA(),e._UZ(84,"input",12),e.qZA()(),e.TgZ(85,"div",8)(86,"mat-form-field",9)(87,"mat-label",10),e._uU(88,"Country"),e.qZA(),e._UZ(89,"input",13),e.qZA()(),e.TgZ(90,"div",8)(91,"mat-form-field",9)(92,"mat-label",10),e._uU(93,"Created By"),e.qZA(),e._UZ(94,"input",14),e.qZA()(),e.TgZ(95,"div",8)(96,"mat-form-field",9)(97,"mat-label",10),e._uU(98,"Date Created"),e.qZA(),e._UZ(99,"input",15),e.qZA()(),e.TgZ(100,"div",8)(101,"mat-form-field",9)(102,"mat-label",10),e._uU(103,"Approval Status"),e.qZA(),e._UZ(104,"input",16),e.qZA()(),e.TgZ(105,"div",8)(106,"mat-form-field",9)(107,"mat-label",10),e._uU(108,"Checker"),e.qZA(),e._UZ(109,"input",17),e.qZA()(),e.TgZ(110,"div",8)(111,"mat-form-field",9)(112,"mat-label",10),e._uU(113,"Checked On"),e.qZA(),e._UZ(114,"input",18),e.qZA()(),e.TgZ(115,"div",8)(116,"mat-form-field",9)(117,"mat-label",10),e._uU(118,"Modified By"),e.qZA(),e._UZ(119,"input",19),e.qZA()(),e.TgZ(120,"div",8)(121,"mat-form-field",9)(122,"mat-label",10),e._uU(123,"Modified By"),e.qZA(),e._UZ(124,"input",19),e.qZA()()(),e.TgZ(125,"div",20)(126,"button",21),e.NdJ("click",function(){return i.return()}),e.TgZ(127,"mat-icon"),e._uU(128,"arrow_back"),e.qZA(),e._uU(129," Back "),e.qZA()()()()()()()()()),2&t&&(e.xp6(10),e.Q6J("formGroup",i.regionsForm),e.xp6(63),e.Q6J("formGroup",i.oldregionsForm))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u,T.lW,v.a8,v.dn,v.n5,u.KE,u.hX,q.Hw,k.Nt,J.SP,J.uX,m.xw,m.SQ,m.yH]}),a})()},{path:"view-branch-modifications/:id",component:(()=>{class a{constructor(t,i,n,r,c,d,l){this.hierarchyservice=t,this.encryptionService=i,this.route=n,this.fb=r,this.dateAdapter=c,this.translate=d,this.router=l,this.isLoading=!0,this.branchesForm=this.fb.nonNullable.group({name:["",[o.kI.required,o.kI.maxLength(50)]],code:["",[o.kI.required,o.kI.maxLength(100)]],status:[""],country:[""],createdBy:[""],createdOn:[],approvalStatus:[""],checkedBy:[""],checkedOn:[""],modifiedBy:[""],modifiedOn:[""]}),this.oldbranchesForm=this.fb.nonNullable.group({name:["",[o.kI.required,o.kI.maxLength(50)]],code:["",[o.kI.required,o.kI.maxLength(100)]],status:[""],country:[""],createdBy:[""],createdOn:[],approvalStatus:[""],checkedBy:[""],checkedOn:[""],modifiedBy:[""],modifiedOn:[""]})}ngOnDestroy(){this.translateSubscription.unsubscribe()}ngOnInit(){this.branchId=this.route.snapshot.paramMap.get("id"),this.getBranchDetails(),this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)})}getBranchDetails(){const t=this.encryptionService.generateAesKey(),i=this.encryptionService.generatebase64Key(t),n=this.encryptionService.encryptWithRSA(i);this.hierarchyservice.getBranchDetails(this.branchId,n).subscribe(r=>{const c=JSON.parse(r);this.branch=this.encryptionService.decryptData(c?.body,i),this.branch&&(this.branch=this.branch,this.newbranch=JSON.parse(this.branch?.changedValues),this.oldbranchesForm.patchValue({name:this.branch?.name||"",code:this.branch?.code||"",status:this.branch?.status,country:this.branch?.organization?.country?.name,createdBy:this.branch?.createdBy||"",createdOn:this.branch?.createdOn||"",approvalStatus:this.branch?.changeStatus||"",modifiedBy:this.branch?.modifiedBy||"",modifiedOn:this.branch?.modifiedOn||"",checkedBy:this.branch?.checkedBy||"",checkedOn:this.branch?.checkedOn||""}),this.branchesForm.patchValue({name:this.newbranch?.name||"",code:this.newbranch?.code||"",status:this.newbranch?.status,country:this.newbranch?.organization?.country?.name,createdBy:this.newbranch?.createdBy||"",createdOn:this.newbranch?.createdOn||"",approvalStatus:this.newbranch?.changeStatus||"",modifiedBy:this.newbranch?.modifiedBy||"",modifiedOn:this.newbranch?.modifiedOn||"",checkedBy:this.newbranch?.checkedBy||"",checkedOn:this.newbranch?.checkedOn||""})),this.isLoading=!1},r=>{console.error("Error fetching Regions Data:",r),this.isLoading=!1})}return(){window.history.back()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(x),e.Y36(A.w),e.Y36(_.gz),e.Y36(o.qu),e.Y36(R._A),e.Y36(Z.sK),e.Y36(_.F0))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-view-branch-modifications"]],decls:130,vars:2,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%","overflow-x","hidden"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","16px","overflow-x","hidden"],["label","New Branches Details"],[2,"font-size","24px","margin-bottom","4px","margin-top","5px","font-family","'Inter', sans-serif","color","#304254"],[2,"font-weight","normal","opacity","0.6","margin-top","0","padding","0"],[1,"form-field-full",2,"overflow-x","hidden",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","5px grid"],["fxFlex","33.33","fxFlex.lt-sm","100"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","readonly","","placeholder","Region Name","formControlName","name","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Region Code","formControlName","code","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Country","formControlName","country","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Created By","formControlName","createdBy","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Date Created","formControlName","createdOn","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Approval Status","formControlName","approvalStatus","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Checker","formControlName","checkedBy","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Checked On","formControlName","checkedOn","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Modified By","formControlName","modifiedBy","required","",2,"font-size","16px"],[1,"d-flex","justify-content-between","flex-wrap",2,"margin-top","24px"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","font-size","14px","margin-right","10px",3,"click"],["label","Old Branches Details"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-tab-group")(4,"mat-tab",3)(5,"mat-card-title",4),e._uU(6," Branch Details After Modification "),e.qZA(),e.TgZ(7,"h6",5),e._uU(8," Review Branch Modification Details "),e.qZA(),e.TgZ(9,"mat-card-content")(10,"form",6)(11,"div",7)(12,"div",8)(13,"mat-form-field",9)(14,"mat-label",10),e._uU(15,"Region Name"),e.qZA(),e._UZ(16,"input",11),e.qZA()(),e.TgZ(17,"div",8)(18,"mat-form-field",9)(19,"mat-label",10),e._uU(20,"Region Code"),e.qZA(),e._UZ(21,"input",12),e.qZA()(),e.TgZ(22,"div",8)(23,"mat-form-field",9)(24,"mat-label",10),e._uU(25,"Country"),e.qZA(),e._UZ(26,"input",13),e.qZA()(),e.TgZ(27,"div",8)(28,"mat-form-field",9)(29,"mat-label",10),e._uU(30,"Created By"),e.qZA(),e._UZ(31,"input",14),e.qZA()(),e.TgZ(32,"div",8)(33,"mat-form-field",9)(34,"mat-label",10),e._uU(35,"Date Created"),e.qZA(),e._UZ(36,"input",15),e.qZA()(),e.TgZ(37,"div",8)(38,"mat-form-field",9)(39,"mat-label",10),e._uU(40,"Approval Status"),e.qZA(),e._UZ(41,"input",16),e.qZA()(),e.TgZ(42,"div",8)(43,"mat-form-field",9)(44,"mat-label",10),e._uU(45,"Checker"),e.qZA(),e._UZ(46,"input",17),e.qZA()(),e.TgZ(47,"div",8)(48,"mat-form-field",9)(49,"mat-label",10),e._uU(50,"Checked On"),e.qZA(),e._UZ(51,"input",18),e.qZA()(),e.TgZ(52,"div",8)(53,"mat-form-field",9)(54,"mat-label",10),e._uU(55,"Modified By"),e.qZA(),e._UZ(56,"input",19),e.qZA()(),e.TgZ(57,"div",8)(58,"mat-form-field",9)(59,"mat-label",10),e._uU(60,"Modified By"),e.qZA(),e._UZ(61,"input",19),e.qZA()()(),e.TgZ(62,"div",20)(63,"button",21),e.NdJ("click",function(){return i.return()}),e.TgZ(64,"mat-icon"),e._uU(65,"arrow_back"),e.qZA(),e._uU(66," Back "),e.qZA()()()()(),e.TgZ(67,"mat-tab",22)(68,"mat-card-title",4),e._uU(69," Branch Details Before Modification "),e.qZA(),e.TgZ(70,"h6",5),e._uU(71," Review Branch Modification Details "),e.qZA(),e.TgZ(72,"mat-card-content")(73,"form",6)(74,"div",7)(75,"div",8)(76,"mat-form-field",9)(77,"mat-label",10),e._uU(78,"Region Name"),e.qZA(),e._UZ(79,"input",11),e.qZA()(),e.TgZ(80,"div",8)(81,"mat-form-field",9)(82,"mat-label",10),e._uU(83,"Region Code"),e.qZA(),e._UZ(84,"input",12),e.qZA()(),e.TgZ(85,"div",8)(86,"mat-form-field",9)(87,"mat-label",10),e._uU(88,"Country"),e.qZA(),e._UZ(89,"input",13),e.qZA()(),e.TgZ(90,"div",8)(91,"mat-form-field",9)(92,"mat-label",10),e._uU(93,"Created By"),e.qZA(),e._UZ(94,"input",14),e.qZA()(),e.TgZ(95,"div",8)(96,"mat-form-field",9)(97,"mat-label",10),e._uU(98,"Date Created"),e.qZA(),e._UZ(99,"input",15),e.qZA()(),e.TgZ(100,"div",8)(101,"mat-form-field",9)(102,"mat-label",10),e._uU(103,"Approval Status"),e.qZA(),e._UZ(104,"input",16),e.qZA()(),e.TgZ(105,"div",8)(106,"mat-form-field",9)(107,"mat-label",10),e._uU(108,"Checker"),e.qZA(),e._UZ(109,"input",17),e.qZA()(),e.TgZ(110,"div",8)(111,"mat-form-field",9)(112,"mat-label",10),e._uU(113,"Checked On"),e.qZA(),e._UZ(114,"input",18),e.qZA()(),e.TgZ(115,"div",8)(116,"mat-form-field",9)(117,"mat-label",10),e._uU(118,"Modified By"),e.qZA(),e._UZ(119,"input",19),e.qZA()(),e.TgZ(120,"div",8)(121,"mat-form-field",9)(122,"mat-label",10),e._uU(123,"Modified By"),e.qZA(),e._UZ(124,"input",19),e.qZA()()(),e.TgZ(125,"div",20)(126,"button",21),e.NdJ("click",function(){return i.return()}),e.TgZ(127,"mat-icon"),e._uU(128,"arrow_back"),e.qZA(),e._uU(129," Back "),e.qZA()()()()()()()()()),2&t&&(e.xp6(10),e.Q6J("formGroup",i.branchesForm),e.xp6(63),e.Q6J("formGroup",i.oldbranchesForm))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u,T.lW,v.a8,v.dn,v.n5,u.KE,u.hX,q.Hw,k.Nt,J.SP,J.uX,m.xw,m.SQ,m.yH]}),a})()}];let qt=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[_.Bz.forChild(wt),_.Bz]}),a})(),Ct=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[C.m8,qt]}),a})()}}]);