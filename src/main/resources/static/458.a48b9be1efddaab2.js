"use strict";(self.webpackChunkng_matero=self.webpackChunkng_matero||[]).push([[458],{11316:(V,Z,n)=>{n.r(Z),n.d(Z,{ProfileModule:()=>k});var S=n(39636),c=n(19132),P=n(17074),e=n(94650),i=n(1576);let h=(()=>{class t{constructor(r){this.auth=r}ngOnInit(){this.auth.user().subscribe(r=>this.user=r)}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(P.e8))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-profile-layout"]],decls:3,vars:0,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"]],template:function(r,l){1&r&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"router-outlet"),e.qZA()())},dependencies:[c.lC,i.xw,i.yH],encapsulation:2}),t})();var F=n(1999),v=n(88386),z=n(77613),o=n(24006),A=n(3238),J=n(13081),f=n(73546),s=n(59549),y=n(284);let U=(()=>{class t{constructor(r,l,u,m,p,d){this.fb=r,this.dateAdapter=l,this.translate=u,this.encryptionService=m,this.userService=p,this.storageService=d,this.form=this.fb.group({firstName:[""],otherNames:[""],emailAddress:[""],username:[""],phoneNumber:[""],gender:[""],createdBy:[""],createdOn:[""],accountType:[""],country:[""],organization:[""],region:[""],branch:[""],role:[""],userId:[""],status:[""],acctStatus:[!1]})}ngOnInit(){this.userId=this.storageService.get("user-entity")?.id,this.getUserProfile(),this.translateSubscription=this.translate.onLangChange.subscribe(r=>{this.dateAdapter.setLocale(r.lang)})}ngOnDestroy(){this.translateSubscription.unsubscribe()}getUserProfile(){const r=this.encryptionService.generateAesKey(),l=this.encryptionService.generatebase64Key(r),u=this.encryptionService.encryptWithRSA(l);this.userService.getUserProfile(this.userId,u).subscribe(m=>{const p=JSON.parse(m);this.profile=this.encryptionService.decryptData(p?.body,l),this.profile&&this.form.patchValue({firstName:this.profile?.firstName||"",otherNames:this.profile?.otherNames||"",emailAddress:this.profile?.emailAddress||"",username:this.profile?.username||"",phoneNumber:this.profile?.phoneNumber||"",gender:this.profile?.gender||"",createdBy:this.profile?.createdBy||"",createdOn:this.profile?.createdOn||"",accountType:this.profile?.accountType?.name||"",organization:this.profile?.organization?.name||"",country:this.profile?.organization?.country?.name||"",region:this.profile?.branch?.region?.name||"NA",branch:this.profile?.branch?.name||"NA",userId:this.profile?.userId||"",role:this.profile?.roles[0]?.name,status:this.profile?.status,acctStatus:"Active"===this.profile?.status})},m=>{console.error("Error fetching user profile:",m)})}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(o.qu),e.Y36(A._A),e.Y36(J.sK),e.Y36(F.w),e.Y36(v.K),e.Y36(z.n2))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-profile-overview"]],features:[e._Bn([v.K])],decls:87,vars:1,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","24px","border","2px solid #304254","border-radius","8px"],[2,"font-size","24px","margin-bottom","12px","font-family","'Inter', sans-serif","color","#304254"],[1,"form-field-full",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex","33.33","fxFlex.lt-sm","100"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","placeholder","First Name","formControlName","firstName","readonly","",2,"font-size","16px"],["matInput","","placeholder","Other Name","formControlName","otherNames","readonly","",2,"font-size","16px"],["matInput","","placeholder","Phone number","formControlName","phoneNumber","readonly","",2,"font-size","16px"],["matInput","","readonly","","placeholder","User Name","formControlName","username","readonly","",2,"font-size","16px"],["matInput","","placeholder","Email","formControlName","emailAddress","readonly","",2,"font-size","16px"],["matInput","","placeholder","Gender","formControlName","gender","readonly","",2,"font-size","16px"],["readonly","","matInput","","placeholder","User Id","formControlName","userId",2,"font-size","16px"],["readonly","","matInput","","placeholder","Created By","formControlName","createdBy",2,"font-size","16px"],["readonly","","matInput","","placeholder","Date Created","formControlName","createdOn",2,"font-size","16px"],["readonly","","matInput","","placeholder","Country","formControlName","country",2,"font-size","16px"],["readonly","","matInput","","placeholder","Organization","formControlName","organization",2,"font-size","16px"],["readonly","","matInput","","placeholder","Region","formControlName","region",2,"font-size","16px"],["readonly","","matInput","","placeholder","Branch","formControlName","branch",2,"font-size","16px"],["readonly","","matInput","","placeholder","User Account Type","formControlName","accountType",2,"font-size","16px"],["readonly","","matInput","","placeholder","Role","formControlName","role",2,"font-size","16px"],["readonly","","matInput","","placeholder","Account Status","formControlName","status",2,"font-size","16px"]],template:function(r,l){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title",3),e._uU(4," Profile Details "),e.qZA(),e.TgZ(5,"form",4)(6,"div",5)(7,"div",6)(8,"mat-form-field",7)(9,"mat-label",8),e._uU(10,"First Name"),e.qZA(),e._UZ(11,"input",9),e.qZA()(),e.TgZ(12,"div",6)(13,"mat-form-field",7)(14,"mat-label",8),e._uU(15,"Other Name"),e.qZA(),e._UZ(16,"input",10),e.qZA()(),e.TgZ(17,"div",6)(18,"mat-form-field",7)(19,"mat-label",8),e._uU(20,"Phone Number"),e.qZA(),e._UZ(21,"input",11),e.qZA()(),e.TgZ(22,"div",6)(23,"mat-form-field",7)(24,"mat-label",8),e._uU(25,"User Name"),e.qZA(),e._UZ(26,"input",12),e.qZA()(),e.TgZ(27,"div",6)(28,"mat-form-field",7)(29,"mat-label",8),e._uU(30,"Email"),e.qZA(),e._UZ(31,"input",13),e.qZA()(),e.TgZ(32,"div",6)(33,"mat-form-field",7)(34,"mat-label",8),e._uU(35,"Gender"),e.qZA(),e._UZ(36,"input",14),e.qZA()(),e.TgZ(37,"div",6)(38,"mat-form-field",7)(39,"mat-label",8),e._uU(40,"User Id"),e.qZA(),e._UZ(41,"input",15),e.qZA()(),e.TgZ(42,"div",6)(43,"mat-form-field",7)(44,"mat-label",8),e._uU(45,"Created By"),e.qZA(),e._UZ(46,"input",16),e.qZA()(),e.TgZ(47,"div",6)(48,"mat-form-field",7)(49,"mat-label",8),e._uU(50,"Date Created"),e.qZA(),e._UZ(51,"input",17),e.qZA()(),e.TgZ(52,"div",6)(53,"mat-form-field",7)(54,"mat-label",8),e._uU(55,"Country"),e.qZA(),e._UZ(56,"input",18),e.qZA()(),e.TgZ(57,"div",6)(58,"mat-form-field",7)(59,"mat-label",8),e._uU(60,"Organization"),e.qZA(),e._UZ(61,"input",19),e.qZA()(),e.TgZ(62,"div",6)(63,"mat-form-field",7)(64,"mat-label",8),e._uU(65,"Region"),e.qZA(),e._UZ(66,"input",20),e.qZA()(),e.TgZ(67,"div",6)(68,"mat-form-field",7)(69,"mat-label",8),e._uU(70,"Branch"),e.qZA(),e._UZ(71,"input",21),e.qZA()(),e.TgZ(72,"div",6)(73,"mat-form-field",7)(74,"mat-label",8),e._uU(75,"User Account Type"),e.qZA(),e._UZ(76,"input",22),e.qZA()(),e.TgZ(77,"div",6)(78,"mat-form-field",7)(79,"mat-label",8),e._uU(80,"Role"),e.qZA(),e._UZ(81,"input",23),e.qZA()(),e.TgZ(82,"div",6)(83,"mat-form-field",7)(84,"mat-label",8),e._uU(85,"Account Status"),e.qZA(),e._UZ(86,"input",24),e.qZA()()()()()()()),2&r&&(e.xp6(5),e.Q6J("formGroup",l.form))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,f.a8,f.n5,s.KE,s.hX,y.Nt,i.xw,i.SQ,i.yH],encapsulation:2}),t})();var O=n(36895),Y=n(4859),g=n(99602),Q=n(97392),w=n(84385);function M(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Please enter username "),e.qZA())}function L(t,a){if(1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.hij(" ",r.getErrorMessage(r.reactiveForm),"")}}function B(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Please select gender"),e.qZA())}function E(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Please enter city"),e.qZA())}function D(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Please enter address"),e.qZA())}function G(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Please enter company"),e.qZA())}function R(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Please enter mobile"),e.qZA())}function K(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Please enter tele"),e.qZA())}function j(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Please enter website"),e.qZA())}function W(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Please enter website"),e.qZA())}const X=[{path:"",component:h,children:[{path:"",redirectTo:"overview",pathMatch:"full"},{path:"overview",component:U},{path:"settings",component:(()=>{class t{constructor(r){this.fb=r,this.reactiveForm=this.fb.nonNullable.group({username:["",[o.kI.required]],email:["",[o.kI.required,o.kI.email]],gender:["",[o.kI.required]],city:["",[o.kI.required]],address:["",[o.kI.required]],company:["",[o.kI.required]],mobile:["",[o.kI.required]],tele:["",[o.kI.required]],website:["",[o.kI.required]],date:["",[o.kI.required]]})}ngOnInit(){}getErrorMessage(r){return r.get("email")?.hasError("required")?"You must enter a value":r.get("email")?.hasError("email")?"Not a valid email":""}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(o.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-profile-settings"]],decls:79,vars:13,consts:[[1,"form-field-full",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","8px grid"],["fxFlex","50","fxFlex.lt-md","100"],["matInput","","placeholder","Simple placeholder","formControlName","username","required",""],[4,"ngIf"],["matInput","","placeholder","Simple placeholder","formControlName","email","required",""],["formControlName","gender","required",""],["value","1"],["value","2"],["matInput","","placeholder","Simple placeholder","formControlName","city","required",""],["matInput","","placeholder","Simple placeholder","formControlName","address","required",""],["matInput","","placeholder","Simple placeholder","formControlName","company","required",""],["matInput","","placeholder","Simple placeholder","type","number","formControlName","mobile","required",""],["matSuffix",""],["matInput","","placeholder","Simple placeholder","type","number","formControlName","tele","required",""],["matInput","","placeholder","Simple placeholder","formControlName","website","required",""],["matInput","","placeholder","Choose a date","formControlName","date",3,"matDatepicker"],["matSuffix","",3,"for"],["picker2",""],["fxLayout","row","fxLayoutAlign","end center"],["mat-raised-button","","color","primary",1,"m-t-8"]],template:function(r,l){if(1&r&&(e.TgZ(0,"mat-card")(1,"mat-card-title"),e._uU(2,"Edit Profile"),e.qZA(),e.TgZ(3,"form",0)(4,"div",1)(5,"div",2)(6,"mat-form-field")(7,"mat-label"),e._uU(8,"Username"),e.qZA(),e._UZ(9,"input",3),e.YNc(10,M,2,0,"mat-error",4),e.qZA()(),e.TgZ(11,"div",2)(12,"mat-form-field")(13,"mat-label"),e._uU(14,"Email"),e.qZA(),e._UZ(15,"input",5),e.YNc(16,L,2,1,"mat-error",4),e.qZA()(),e.TgZ(17,"div",2)(18,"mat-form-field")(19,"mat-label"),e._uU(20,"Gender"),e.qZA(),e.TgZ(21,"mat-select",6)(22,"mat-option"),e._uU(23,"-- None --"),e.qZA(),e.TgZ(24,"mat-option",7),e._uU(25,"male"),e.qZA(),e.TgZ(26,"mat-option",8),e._uU(27,"female"),e.qZA()(),e.YNc(28,B,2,0,"mat-error",4),e.qZA()(),e.TgZ(29,"div",2)(30,"mat-form-field")(31,"mat-label"),e._uU(32,"City"),e.qZA(),e._UZ(33,"input",9),e.YNc(34,E,2,0,"mat-error",4),e.qZA()(),e.TgZ(35,"div",2)(36,"mat-form-field")(37,"mat-label"),e._uU(38,"Address"),e.qZA(),e._UZ(39,"input",10),e.YNc(40,D,2,0,"mat-error",4),e.qZA()(),e.TgZ(41,"div",2)(42,"mat-form-field")(43,"mat-label"),e._uU(44,"Company"),e.qZA(),e._UZ(45,"input",11),e.YNc(46,G,2,0,"mat-error",4),e.qZA()(),e.TgZ(47,"div",2)(48,"mat-form-field")(49,"mat-label"),e._uU(50,"Mobile"),e.qZA(),e._UZ(51,"input",12),e.TgZ(52,"mat-icon",13),e._uU(53,"smartphone"),e.qZA(),e.YNc(54,R,2,0,"mat-error",4),e.qZA()(),e.TgZ(55,"div",2)(56,"mat-form-field")(57,"mat-label"),e._uU(58,"Tele"),e.qZA(),e._UZ(59,"input",14),e.TgZ(60,"mat-icon",13),e._uU(61,"phone"),e.qZA(),e.YNc(62,K,2,0,"mat-error",4),e.qZA()(),e.TgZ(63,"div",2)(64,"mat-form-field")(65,"mat-label"),e._uU(66,"Website"),e.qZA(),e._UZ(67,"input",15),e.YNc(68,j,2,0,"mat-error",4),e.qZA()(),e.TgZ(69,"div",2)(70,"mat-form-field"),e._UZ(71,"input",16)(72,"mat-datepicker-toggle",17)(73,"mat-datepicker",null,18),e.YNc(75,W,2,0,"mat-error",4),e.qZA()()(),e.TgZ(76,"div",19)(77,"button",20),e._uU(78,"Save"),e.qZA()()()()),2&r){const u=e.MAs(74);let m,p,d,x,T,N,C,I,_,b;e.xp6(3),e.Q6J("formGroup",l.reactiveForm),e.xp6(7),e.Q6J("ngIf",null==(m=l.reactiveForm.get("username"))?null:m.invalid),e.xp6(6),e.Q6J("ngIf",null==(p=l.reactiveForm.get("email"))?null:p.invalid),e.xp6(12),e.Q6J("ngIf",null==(d=l.reactiveForm.get("gender"))?null:d.invalid),e.xp6(6),e.Q6J("ngIf",null==(x=l.reactiveForm.get("city"))?null:x.invalid),e.xp6(6),e.Q6J("ngIf",null==(T=l.reactiveForm.get("address"))?null:T.invalid),e.xp6(6),e.Q6J("ngIf",null==(N=l.reactiveForm.get("company"))?null:N.invalid),e.xp6(8),e.Q6J("ngIf",null==(C=l.reactiveForm.get("mobile"))?null:C.invalid),e.xp6(8),e.Q6J("ngIf",null==(I=l.reactiveForm.get("tele"))?null:I.invalid),e.xp6(6),e.Q6J("ngIf",null==(_=l.reactiveForm.get("website"))?null:_.invalid),e.xp6(3),e.Q6J("matDatepicker",u),e.xp6(1),e.Q6J("for",u),e.xp6(3),e.Q6J("ngIf",null==(b=l.reactiveForm.get("date"))?null:b.invalid)}},dependencies:[O.O5,o._Y,o.Fj,o.wV,o.JJ,o.JL,o.Q7,o.sg,o.u,A.ey,Y.lW,f.a8,f.n5,g.Mq,g.hl,g.nW,s.TO,s.KE,s.hX,s.R9,Q.Hw,y.Nt,w.gD,i.xw,i.SQ,i.Wh,i.yH],encapsulation:2}),t})()}]}];let H=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[c.Bz.forChild(X),c.Bz]}),t})(),k=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[S.m,H]}),t})()}}]);