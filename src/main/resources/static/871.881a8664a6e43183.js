"use strict";(self.webpackChunkng_matero=self.webpackChunkng_matero||[]).push([[871],{4871:(vo,E,U)=>{U.r(E),U.d(E,{UserManagementModule:()=>yo});var y=U(19132),A=U(1999),Z=U(88386),e=U(94650),b=U(13081),h=U(65938),Y=U(52445),v=U(36895),a=U(24006),T=U(3238),C=U(4859),f=U(73546),m=U(59549),x=U(97392),k=U(284),N=U(28255),I=U(84385),O=U(71195),g=U(1576),J=U(55829);const ce=["actionTemplate"],ue=["statusTemplate"];function pe(o,s){if(1&o&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function de(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",19)(1,"mat-icon"),e._uU(2,"more_horiz"),e.qZA()(),e.TgZ(3,"mat-menu",null,20)(5,"button",21),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.viewDetailedRecord(n))}),e.TgZ(6,"mat-icon"),e._uU(7,"edit"),e.qZA(),e._uU(8," Edit "),e.qZA()()}if(2&o){const t=e.MAs(4);e.Q6J("matMenuTriggerFor",t)}}function me(o,s){if(1&o&&(e.TgZ(0,"span",22),e._uU(1),e.qZA()),2&o){const t=s.$implicit,r=e.oxw();e.Q6J("ngStyle",r.getStatusColor(t.status)),e.xp6(1),e.hij(" ",t.status," ")}}const ge=function(){return[5,10,20,50,100]};let G=(()=>{class o{constructor(t,r,i,n,l,c,u){this.translate=t,this.remoteSrv=r,this.cdr=i,this.encryptionservice=n,this.router=l,this.dialog=c,this.diag1=u,this.columns=[],this.list=[],this.filters=[],this.selectedStatus="",this.total=0,this.isLoading=!0,this.query={q:"",sort:"",order:"",page:0,per_page:10}}ngAfterViewInit(){this.columns=[{header:this.translate.stream("users_table.number"),field:"number",width:"auto",resizable:!0},{header:this.translate.stream("users_table.first_name"),field:"firstName",width:"auto",resizable:!0},{header:this.translate.stream("users_table.last_name"),field:"otherNames",width:"auto",resizable:!0},{header:this.translate.stream("users_table.phone_number"),field:"phoneNumber",width:"auto",resizable:!0},{header:this.translate.stream("users_table.mail"),field:"emailAddress",width:"auto",resizable:!0},{header:this.translate.stream("users_table.country"),field:"country.name",width:"auto",resizable:!0},{header:this.translate.stream("users_table.gender"),field:"gender",width:"auto",resizable:!0},{header:this.translate.stream("users_table.user_name"),field:"username",width:"auto",resizable:!0},{header:"Status",field:"status",cellTemplate:this.statusTemplate,width:"auto",resizable:!0},{header:this.translate.stream("users_table.actions"),field:"actions",cellTemplate:this.actionTemplate}]}get params(){const t=Object.assign({},this.query);return t.page+=1,t}ngOnInit(){this.getUsers()}getStatusColor(t){switch(t){case"Active":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Inactive":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}getUsers(){const r=this.encryptionservice.encryptData({status:this.selectedStatus,page:this.query.page,size:this.query.per_page});this.remoteSrv.getSuperAdminUsers(r.split(":")[0],r.split(":")[1]).subscribe(i=>{const n=JSON.parse(i),l=this.encryptionservice.decryptData(n?.body,r.split(":")[2]);this.list=l.data.content,this.total=l.data.total,this.filters=l.statuses,this.isLoading=!1,this.list=this.list.map((c,u)=>({...c,number:this.query.page*this.query.per_page+u+1})),this.cdr.detectChanges()},i=>{console.error("Error fetching user accounts:",i)})}create(){this.router.navigateByUrl("/usermanagement/create-superadmin-user")}viewDetailedRecord(t){const r=t?.id;r?this.router.navigate(["/usermanagement/manage-account",r]):console.error("No ID found in rowData")}getNextPage(t){this.query.page=t.pageIndex,this.query.per_page=t.pageSize,this.getUsers()}search(){this.query.page=0,this.getUsers()}openBulkUsersUploadComponent(){this.router.navigateByUrl("/usermanagement/bulk-create-superadmin")}onStatusChange(t){this.selectedStatus=t.value,this.getUsers()}reset(){this.query.page=0,this.query.per_page=10,this.getUsers()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.sK),e.Y36(Z.K),e.Y36(e.sBO),e.Y36(A.w),e.Y36(y.F0),e.Y36(h.uw),e.Y36(Y.cP))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-user"]],viewQuery:function(t,r){if(1&t&&(e.Gf(ce,7),e.Gf(ue,7)),2&t){let i;e.iGM(i=e.CRH())&&(r.actionTemplate=i.first),e.iGM(i=e.CRH())&&(r.statusTemplate=i.first)}},features:[e._Bn([Z.K])],decls:31,vars:19,consts:[[2,"border","1px solid #ccc","padding","16px"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"col"],[2,"margin","0"],[1,"d-flex","flex-wrap","align-items-center"],["mat-raised-button","",2,"background-color","#74C84D","color","white",3,"click"],[1,"d-flex","justify-content-between","w-100","flex-wrap"],["fxFlex","33.33%","fxFlex.lt-sm","100%",1,"px-2"],["appearance","outline",2,"width","100%"],["name","selectedStatus",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","39.34%","fxFlex.lt-sm","100%",1,"d-flex","justify-content-between","align-items-center","px-2"],["fxFlex","27.33%","fxFlex.lt-sm","100%",1,"px-2"],["matPrefix",""],["matInput","","name","q","placeholder","Search",3,"ngModel","ngModelChange"],[3,"data","columns","length","loading","rowStriped","pageOnFront","pageIndex","pageSize","pageSizeOptions","page"],["actionTemplate",""],["statusTemplate",""],[3,"value"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[3,"ngStyle"]],template:function(t,r){1&t&&(e.TgZ(0,"div")(1,"mat-card",0)(2,"div",1)(3,"div",2)(4,"h2",3),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"div",4)(8,"button",5),e.NdJ("click",function(){return r.create()}),e.TgZ(9,"mat-icon"),e._uU(10,"add_circle"),e.qZA(),e._uU(11),e.ALo(12,"translate"),e.qZA()()()(),e.TgZ(13,"div",6)(14,"div",7)(15,"mat-form-field",8)(16,"mat-label"),e._uU(17,"Select Status"),e.qZA(),e.TgZ(18,"mat-select",9),e.NdJ("ngModelChange",function(n){return r.selectedStatus=n})("selectionChange",function(n){return r.onStatusChange(n)}),e.YNc(19,pe,2,2,"mat-option",10),e.qZA()()(),e._UZ(20,"div",11),e.TgZ(21,"div",12)(22,"mat-form-field",8)(23,"mat-icon",13),e._uU(24,"search"),e.qZA(),e.TgZ(25,"input",14),e.NdJ("ngModelChange",function(n){return r.query.q=n}),e.qZA()()()(),e.TgZ(26,"mtx-grid",15),e.NdJ("page",function(n){return r.getNextPage(n)}),e.qZA(),e.YNc(27,de,9,1,"ng-template",null,16,e.W1O),e.YNc(29,me,2,2,"ng-template",null,17,e.W1O),e.qZA()),2&t&&(e.xp6(5),e.Oqu(e.lcZ(6,14,"users_table.tittle")),e.xp6(6),e.hij(" ",e.lcZ(12,16,"users_table.add_superadmins")," "),e.xp6(7),e.Q6J("ngModel",r.selectedStatus),e.xp6(1),e.Q6J("ngForOf",r.filters),e.xp6(6),e.Q6J("ngModel",r.query.q),e.xp6(1),e.Q6J("data",r.list)("columns",r.columns)("length",r.total)("loading",r.isLoading)("rowStriped",!0)("pageOnFront",!1)("pageIndex",r.query.page)("pageSize",r.query.per_page)("pageSizeOptions",e.DdM(18,ge)))},dependencies:[v.sg,v.PC,a.Fj,a.JJ,a.On,T.ey,C.lW,f.a8,m.KE,m.hX,m.qo,x.Hw,k.Nt,N.VK,N.OP,N.p6,I.gD,O.CM,g.yH,J.Zl,b.X$],styles:["[_nghost-%COMP%]     .mtx-grid{height:500px}.mtx-grid[_ngcontent-%COMP%]{box-shadow:0 4px 12px #902f2766;border-radius:8px;padding:16px}.mtx-grid[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-collapse:collapse}.mtx-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#902f271a}.mtx-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}.mtx-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:2px solid rgba(144,47,39,.3)}.mtx-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.status-true[_ngcontent-%COMP%]{color:red;font-weight:700}.status-false[_ngcontent-%COMP%]{color:green;font-weight:700}.status-true[_ngcontent-%COMP%]{color:#fff;background-color:green}.status-false[_ngcontent-%COMP%]{color:#fff;background-color:red}button[_ngcontent-%COMP%]{display:inline-block!important;visibility:visible!important}"]}),o})();var S=U(80529),j=U(92340);let w=(()=>{class o{constructor(t){this.http=t,this.apiUrl=j.N.apiUrl}getAdminRoles(t,r){const i=new S.WM({key:t});return this.http.post(this.apiUrl+"Roles/AdminRoles?encrypted=true",r,{headers:i,responseType:"text"})}getRoles(t,r){const i=new S.WM({key:t});return this.http.post(this.apiUrl+"Roles/FilteredRoles?encrypted=true",r,{headers:i,responseType:"text"})}getRolesReviewList(t,r){const i=new S.WM({key:t});return this.http.post(this.apiUrl+"Roles/ReviewList?encrypted=true",r,{headers:i,responseType:"text"})}getRolesModificationsReviewList(t,r){const i=new S.WM({key:t});return this.http.post(this.apiUrl+"Roles/ModificationsReviewList?encrypted=true",r,{headers:i,responseType:"text"})}getpermissions(t){const r=new S.WM({key:t});return this.http.get(this.apiUrl+"Permissions/All",{headers:r,responseType:"text"})}addRole(t,r){const i=new S.WM({key:r});return this.http.post(`${this.apiUrl}Roles/Add?encrypted=true`,t,{headers:i,responseType:"text"})}approveRejectRole(t,r){const i=new S.WM({key:r});return this.http.post(`${this.apiUrl}Roles/ApproveReject?encrypted=true`,t,{headers:i,responseType:"text"})}approveRejectRoleEdit(t,r){const i=new S.WM({key:r});return this.http.post(`${this.apiUrl}Roles/ApproveRejectEdit?encrypted=true`,t,{headers:i,responseType:"text"})}allRoles(t){const r=new S.WM({key:t});return this.http.get(this.apiUrl+"Roles/All",{headers:r,responseType:"text"})}allRolesForAdmin(t,r){const i=new S.WM({key:t});return this.http.get(this.apiUrl+"Roles/AllByOrganization?id="+r,{headers:i,responseType:"text"})}activateDeactivateRole(t,r){const i=new S.WM({key:r});return this.http.post(`${this.apiUrl}Roles/ActivateDeactivate?encrypted=true`,t,{headers:i,responseType:"text"})}updateAdminRole(t,r){const i=new S.WM({key:r});return this.http.put(`${this.apiUrl}Roles/UpdateAdminRole?encrypted=true`,t,{headers:i,responseType:"text"})}updateRole(t,r){const i=new S.WM({key:r});return this.http.put(`${this.apiUrl}Roles/Update?encrypted=true`,t,{headers:i,responseType:"text"})}getRoleById(t,r){const i=new S.WM({key:r});return this.http.get(this.apiUrl+"Roles/FindById?id="+t,{headers:i,responseType:"text"})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(S.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var q=U(77613);const he=["actionTemplate"],fe=["statusTemplate"];function _e(o,s){if(1&o&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function ye(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",20)(1,"mat-icon"),e._uU(2,"more_horiz"),e.qZA()(),e.TgZ(3,"mat-menu",null,21)(5,"button",22),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.viewDetailedRecord(n))}),e.TgZ(6,"mat-icon",23),e._uU(7,"edit"),e.qZA(),e._uU(8," Edit "),e.qZA()()}if(2&o){const t=e.MAs(4);e.Q6J("matMenuTriggerFor",t)}}function Ze(o,s){if(1&o&&(e.TgZ(0,"span",24),e._uU(1),e.qZA()),2&o){const t=s.$implicit,r=e.oxw();e.Q6J("ngStyle",r.getStatusColor(t.status)),e.xp6(1),e.hij(" ",t.status," ")}}const ve=function(){return[5,10,20,50,100]};let H=(()=>{class o{constructor(t,r,i,n,l,c,u,p){this.remoteSrv=t,this.cdr=r,this.encryptionservice=i,this.router=n,this.translate=l,this.dialog=c,this.diag1=u,this.localStorage=p,this.columns=[],this.filters=[],this.selectedFilter="",this.list=[],this.total=0,this.isLoading=!0,this.query={q:"",sort:"",order:"",page:0,per_page:10}}ngAfterViewInit(){this.columns=[{header:"Role Name",field:"name"},{header:"Created Date",field:"createdOn"},{header:"Created By",field:"createdBy"},{header:"Status",field:"status",cellTemplate:this.statusTemplate},{header:this.translate.stream("table_kitchen_sink.actions"),field:"actions",cellTemplate:this.actionTemplate}]}getStatusColor(t){switch(t){case"Active":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Inactive":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}get params(){const t=Object.assign({},this.query);return t.page+=1,t}ngOnInit(){this.getRoles()}delete(t){this.diag1.alert(`You have deleted ${t.position}!`)}getRoles(){const r=this.localStorage.get("user-entity")?.organization?.id,n=this.encryptionservice.encryptData({status:this.selectedFilter,page:this.query.page,size:this.query.per_page,organization:r}),l=n.split(":")[2],c=n.split(":")[1],u=n.split(":")[0];this.remoteSrv.getRoles(u,c).subscribe(p=>{const d=JSON.parse(p),_=this.encryptionservice.decryptData(d?.body,l);this.list=_.data.content,this.total=_.data.total,this.filters=_.statuses,this.isLoading=!1,this.cdr.detectChanges()},p=>{console.error("Error fetching roles:",p),this.isLoading=!1})}viewDetailedRecord(t){var r=t?.id;r&&this.router.navigate(["/usermanagement/manage-role",r])}create(){this.router.navigateByUrl("/usermanagement/create-role")}getNextPage(t){this.query.page=t.pageIndex,this.query.per_page=t.pageSize,this.getRoles()}search(){this.query.page=0,this.getRoles()}onFilterChange(t){this.selectedFilter=t.value,this.getRoles()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(w),e.Y36(e.sBO),e.Y36(A.w),e.Y36(y.F0),e.Y36(b.sK),e.Y36(h.uw),e.Y36(Y.cP),e.Y36(q.n2))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-roles"]],viewQuery:function(t,r){if(1&t&&(e.Gf(he,7),e.Gf(fe,7)),2&t){let i;e.iGM(i=e.CRH())&&(r.actionTemplate=i.first),e.iGM(i=e.CRH())&&(r.statusTemplate=i.first)}},features:[e._Bn([w])],decls:30,vars:13,consts:[[2,"border","1px solid #ccc","padding","16px"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"col"],[2,"margin","0"],[1,"d-flex","flex-wrap","align-items-center"],["mat-raised-button","",2,"background-color","#74C84D","color","white",3,"click"],[1,"d-flex","justify-content-between","w-100","flex-wrap"],["fxFlex","33.33%","fxFlex.lt-sm","100%",1,"px-2"],["appearance","outline",2,"width","100%"],["name","selectedFilter",3,"ngModel","ngModelChange","selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["fxFlex","39.34%","fxFlex.lt-sm","100%",1,"d-flex","justify-content-between","align-items-center","px-2"],["fxFlex","27.33%","fxFlex.lt-sm","100%",1,"px-2"],["matPrefix",""],["matInput","","name","q","placeholder","Search",3,"ngModel","ngModelChange"],[3,"data","columns","length","loading","rowStriped","pageOnFront","pageIndex","pageSize","pageSizeOptions","page"],["actionTemplate",""],["statusTemplate",""],[3,"value"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["color","primary"],[3,"ngStyle"]],template:function(t,r){1&t&&(e.TgZ(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Roles Management"),e.qZA()(),e.TgZ(5,"div",4)(6,"button",5),e.NdJ("click",function(){return r.create()}),e.TgZ(7,"mat-icon"),e._uU(8,"add_circle"),e.qZA(),e._uU(9," Role "),e.qZA()()()(),e.TgZ(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),e._uU(14,"Select Filter"),e.qZA(),e.TgZ(15,"mat-select",9),e.NdJ("ngModelChange",function(n){return r.selectedFilter=n})("selectionChange",function(n){return r.onFilterChange(n)}),e.TgZ(16,"mat-option",10),e._uU(17,"All Roles"),e.qZA(),e.YNc(18,_e,2,2,"mat-option",11),e.qZA()()(),e._UZ(19,"div",12),e.TgZ(20,"div",13)(21,"mat-form-field",8)(22,"mat-icon",14),e._uU(23,"search"),e.qZA(),e.TgZ(24,"input",15),e.NdJ("ngModelChange",function(n){return r.query.q=n}),e.qZA()()()(),e.TgZ(25,"mtx-grid",16),e.NdJ("page",function(n){return r.getNextPage(n)}),e.qZA(),e.YNc(26,ye,9,1,"ng-template",null,17,e.W1O),e.YNc(28,Ze,2,2,"ng-template",null,18,e.W1O)),2&t&&(e.xp6(15),e.Q6J("ngModel",r.selectedFilter),e.xp6(3),e.Q6J("ngForOf",r.filters),e.xp6(6),e.Q6J("ngModel",r.query.q),e.xp6(1),e.Q6J("data",r.list)("columns",r.columns)("length",r.total)("loading",r.isLoading)("rowStriped",!0)("pageOnFront",!1)("pageIndex",r.query.page)("pageSize",r.query.per_page)("pageSizeOptions",e.DdM(12,ve)))},dependencies:[v.sg,v.PC,a.Fj,a.JJ,a.On,T.ey,C.lW,f.a8,m.KE,m.hX,m.qo,x.Hw,k.Nt,N.VK,N.OP,N.p6,I.gD,O.CM,g.yH,J.Zl],styles:["[_nghost-%COMP%]     .mtx-grid{height:500px}.mtx-grid[_ngcontent-%COMP%]{box-shadow:0 4px 12px #902f2766;border-radius:8px;padding:16px}.mtx-grid[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-collapse:collapse}.mtx-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#902f271a}.mtx-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}.mtx-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:2px solid rgba(144,47,39,.3)}.mtx-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}"]}),o})();var F=U(69140),D=U(56709);function be(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function xe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"mat-checkbox",22),e.NdJ("change",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.onCheckboxChange(i))}),e._uU(2),e.qZA()()}if(2&o){const t=s.$implicit,r=s.index,i=e.oxw();e.xp6(1),e.Q6J("value",t.id)("checked",i.permissions.at(r).value),e.xp6(1),e.hij(" ",t.name," ")}}let W=(()=>{class o{constructor(t,r,i,n,l,c,u,p){this.fb=t,this.dateAdapter=r,this.translate=i,this.router=n,this.roleservice=l,this.encryptionservice=c,this.toaster=u,this.localStorage=p,this.selectedPermissions=new Set,this.rolesForm=this.fb.group({name:[""],userName:[""],searchKey:[""],permissions:this.fb.array([])})}ngOnInit(){this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)}),this.getpermissions()}onCheckboxChange(t){const r=this.rolesForm.get("permissions");if(t.checked)r.push(this.fb.control(t.source.value)),this.selectedPermissions.add(t.source.value);else{const i=r.controls.findIndex(n=>n.value===t.source.value);r.removeAt(i),this.selectedPermissions.delete(t.source.value)}}ngOnDestroy(){this.translateSubscription.unsubscribe()}returnRole(){this.router.navigateByUrl("usermanagement/roles")}getpermissions(){const t=this.encryptionservice.generateAesKey(),r=this.encryptionservice.generatebase64Key(t),i=this.encryptionservice.encryptWithRSA(r);this.roleservice.getpermissions(i).subscribe(n=>{const l=JSON.parse(n),c=this.encryptionservice.decryptData(l?.body,r);this.permissions=c,this.originalPermissions=c})}searchPermissions(){const t=this.rolesForm.value.searchKey.trim();this.permissions=""===t?this.originalPermissions:this.originalPermissions.filter(r=>r.name.toLowerCase().includes(t.toLowerCase())),this.permissions.forEach(r=>{this.selectedPermissions.has(r.name)&&this.rolesForm.get("permissions").push(this.fb.control(r.name))})}onSubmit(){if(this.rolesForm.valid){const t={name:this.rolesForm.value.name,userName:this.localStorage.get("user-entity")?.username,organization:this.localStorage.get("user-entity")?.organization?.id,permissions:this.rolesForm.value.permissions},r=this.encryptionservice.encryptData(t),i=r.split(":")[0],n=r.split(":")[1],l=r.split(":")[2];this.roleservice.addRole(n,i).subscribe(c=>{const u=JSON.parse(c);if(200===u.code||201===u.code){const p=this.encryptionservice.decryptData(u?.body,l);p&&(this.toaster.showSuccess(p?.message),this.returnRole())}else this.toaster.showError(u?.body?.message)})}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.qu),e.Y36(T._A),e.Y36(b.sK),e.Y36(y.F0),e.Y36(w),e.Y36(A.w),e.Y36(F.M),e.Y36(q.n2))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-role"]],features:[e._Bn([w])],decls:34,vars:3,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","16px"],[2,"font-size","24px","margin-bottom","4px","font-family","'Inter', sans-serif","color","#304254"],[2,"font-weight","normal","opacity","0.6","margin-top","0","padding","0"],[1,"form-field-full",3,"formGroup"],["fxFlex","50","fxFlex.lt-sm","100"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex","90","fxFlex.lt-sm","100"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","placeholder","Role Name","formControlName","name","required","",2,"font-size","16px"],[4,"ngIf"],["fxLayout","row","fxLayoutGap","16px","fxFlex","100","fxFlex.lt-sm","100"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","font-size","18px","height","40px",3,"click"],["mat-raised-button","",2,"background-color","#74C84D","color","white","font-size","18px","height","40px",3,"click"],[2,"width","80%"],["matPrefix",""],["matInput","","formControlName","searchKey","name","searchKey","placeholder","Search ..."],["mat-raised-button","",2,"width","20%","background-color","#b60f20","color","white","font-size","14px",3,"click"],["formArrayName","permissions",2,"overflow","auto","max-height","300px"],[4,"ngFor","ngForOf"],[3,"value","checked","change"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title",3),e._uU(4," Add New Role "),e.qZA(),e.TgZ(5,"h6",4),e._uU(6,"Create Role & Manage Permissions"),e.qZA(),e.TgZ(7,"form",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"mat-form-field",9)(12,"mat-label",10),e._uU(13,"Role Name"),e.qZA(),e._UZ(14,"input",11),e.YNc(15,be,3,3,"mat-error",12),e.qZA()(),e.TgZ(16,"div",13)(17,"button",14),e.NdJ("click",function(){return r.returnRole()}),e.TgZ(18,"mat-icon"),e._uU(19,"arrow_back"),e.qZA(),e._uU(20," Back "),e.qZA(),e.TgZ(21,"button",15),e.NdJ("click",function(){return r.onSubmit()}),e._uU(22," Submit "),e.qZA()()()(),e.TgZ(23,"div",6)(24,"mat-form-field",16)(25,"mat-label",10),e._uU(26,"Search Permission"),e.qZA(),e.TgZ(27,"mat-icon",17),e._uU(28,"search"),e.qZA(),e._UZ(29,"input",18),e.qZA(),e.TgZ(30,"button",19),e.NdJ("click",function(){return r.searchPermissions()}),e._uU(31,"Search"),e.qZA(),e.TgZ(32,"div",20),e.YNc(33,xe,3,3,"div",21),e.qZA()()()()()()),2&t){let i;e.xp6(7),e.Q6J("formGroup",r.rolesForm),e.xp6(8),e.Q6J("ngIf",null==(i=r.rolesForm.get("name"))?null:i.invalid),e.xp6(18),e.Q6J("ngForOf",r.permissions)}},dependencies:[v.sg,v.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,a.CE,C.lW,f.a8,f.n5,D.oG,m.TO,m.KE,m.hX,m.qo,x.Hw,k.Nt,g.xw,g.SQ,g.yH,b.X$]}),o})();var M=U(31232);function Ae(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function Ce(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function qe(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function Ue(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function Te(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function we(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function ke(o,s){if(1&o&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function Se(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}let K=(()=>{class o{constructor(t,r,i,n,l,c,u,p,d){this.fb=t,this.dateAdapter=r,this.translate=i,this.router=n,this.encryptionService=l,this.toaster=c,this.userService=u,this.storageService=p,this.countriesService=d,this.q={username:"",email:"",gender:""},this.userForm=this.fb.nonNullable.group({firstName:["",[a.kI.required,a.kI.maxLength(50)]],otherNames:["",[a.kI.required,a.kI.maxLength(100)]],emailAddress:["",[a.kI.required,a.kI.email]],username:["",[a.kI.required,a.kI.maxLength(30)]],phoneNumber:["",[a.kI.required,a.kI.pattern("^[0-9]{10}$")]],gender:["",a.kI.required],adminName:[""],branch:[0],accountType:[0],organization:[0],roles:[[0]],country:[0,a.kI.required]})}ngOnInit(){this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)}),this.getCountries()}ngOnDestroy(){this.translateSubscription.unsubscribe()}getErrorMessage(t){return t.get("email")?.hasError("required")?"validations.required":t.get("email")?.hasError("email")?"validations.invalid_email":""}return(){this.router.navigateByUrl("/usermanagement/superadminusers")}adduser(){const t=this.storageService.get("user-entity"),r=t?.branch,i=t?.roles,n=t?.accountType;this.userForm.value.adminName=t?.username,this.userForm.value.branch=r?.id,this.userForm.value.accountType=n?.id,this.userForm.value.roles=i?.map(R=>R.id),this.userForm.value.organization=this.userForm.value.country;const u=this.encryptionService.encryptData(this.userForm.value),p=u.split(":")[0],d=u.split(":")[1],_=u.split(":")[2];this.userService.createSuperAdmin(d,p).subscribe(R=>{const z=JSON.parse(R);if(200==z.code||201==z.code){const Q=this.encryptionService.decryptData(z.body,_);Q&&(this.toaster.showSuccess(Q?.message),this.return())}else this.toaster.showError(z?.body?.message)},R=>{const z=JSON.parse(R.error),Zo=JSON.parse(z?.body)?.message;this.toaster.showError(Zo)})}onCountryChange(t){this.getOrganizations(t.value)}getOrganizations(t){const r=this.encryptionService.generateAesKey(),i=this.encryptionService.generatebase64Key(r),n=this.encryptionService.encryptWithRSA(i);this.countriesService.allOrganizationsByCountry(n,t).subscribe(l=>{const c=JSON.parse(l),u=this.encryptionService.decryptData(c?.body,i);this.regions=u},l=>{console.error("Error fetching organizations:",l)})}getCountries(){const t=this.encryptionService.generateAesKey(),r=this.encryptionService.generatebase64Key(t),i=this.encryptionService.encryptWithRSA(r);this.countriesService.allCountries(i).subscribe(n=>{const l=JSON.parse(n),c=this.encryptionService.decryptData(l?.body,r);this.countries=c},n=>{console.error("Error fetching countries:",n)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.qu),e.Y36(T._A),e.Y36(b.sK),e.Y36(y.F0),e.Y36(A.w),e.Y36(F.M),e.Y36(Z.K),e.Y36(q.n2),e.Y36(M.K))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-user"]],decls:79,vars:49,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","16px"],[2,"font-size","24px","margin-bottom","4px","font-family","'Inter', sans-serif","color","#304254"],[2,"font-weight","normal","opacity","0.6","margin-top","0","padding","0"],[1,"form-field-full",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex","33.33","fxFlex.lt-sm","100"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","placeholder","First Name","formControlName","firstName","required","",2,"font-size","16px"],[4,"ngIf"],["matInput","","placeholder","Other Names","formControlName","otherNames","required","",2,"font-size","16px"],["matInput","","placeholder","Phone number","formControlName","phoneNumber","required","",2,"font-size","16px"],["matInput","","placeholder","User Name","formControlName","username","required","",2,"font-size","16px"],["matInput","","placeholder","Email","formControlName","emailAddress","required","",2,"font-size","16px"],["required","","formControlName","gender",2,"font-size","16px"],["value","Male"],["value","Female"],["required","","formControlName","country",2,"font-size","16px"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","padding","4px 10px","font-size","18px","min-width","39px","height","40px","margin-bottom","16px",3,"click"],["mat-raised-button","",1,"m-t-8",2,"background-color","#74C84D","color","white","padding","4px 10px","font-size","18px","min-width","39px","height","40px","margin-bottom","16px","margin-left","6px",3,"disabled","click"],[3,"value"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"h6",4),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label",9),e._uU(14),e.ALo(15,"translate"),e.qZA(),e._UZ(16,"input",10),e.YNc(17,Ae,3,3,"mat-error",11),e.qZA()(),e.TgZ(18,"div",7)(19,"mat-form-field",8)(20,"mat-label",9),e._uU(21),e.ALo(22,"translate"),e.qZA(),e._UZ(23,"input",12),e.YNc(24,Ce,3,3,"mat-error",11),e.qZA()(),e.TgZ(25,"div",7)(26,"mat-form-field",8)(27,"mat-label",9),e._uU(28),e.ALo(29,"translate"),e.qZA(),e._UZ(30,"input",13),e.YNc(31,qe,3,3,"mat-error",11),e.qZA()(),e.TgZ(32,"div",7)(33,"mat-form-field",8)(34,"mat-label",9),e._uU(35),e.ALo(36,"translate"),e.qZA(),e._UZ(37,"input",14),e.YNc(38,Ue,3,3,"mat-error",11),e.qZA()(),e.TgZ(39,"div",7)(40,"mat-form-field",8)(41,"mat-label",9),e._uU(42),e.ALo(43,"translate"),e.qZA(),e._UZ(44,"input",15),e.YNc(45,Te,3,3,"mat-error",11),e.qZA()(),e.TgZ(46,"div",7)(47,"mat-form-field",8)(48,"mat-label",9),e._uU(49),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"mat-select",16)(52,"mat-option"),e._uU(53,"-- Select --"),e.qZA(),e.TgZ(54,"mat-option",17),e._uU(55),e.ALo(56,"translate"),e.qZA(),e.TgZ(57,"mat-option",18),e._uU(58),e.ALo(59,"translate"),e.qZA()(),e.YNc(60,we,3,3,"mat-error",11),e.qZA()(),e.TgZ(61,"div",7)(62,"mat-form-field",8)(63,"mat-label",9),e._uU(64),e.ALo(65,"translate"),e.qZA(),e.TgZ(66,"mat-select",19)(67,"mat-option"),e._uU(68,"-- Select --"),e.qZA(),e.YNc(69,ke,2,2,"mat-option",20),e.qZA(),e.YNc(70,Se,3,3,"mat-error",11),e.qZA()()(),e.TgZ(71,"button",21),e.NdJ("click",function(){return r.return()}),e.TgZ(72,"mat-icon"),e._uU(73,"arrow_back"),e.qZA(),e._uU(74),e.ALo(75,"translate"),e.qZA(),e.TgZ(76,"button",22),e.NdJ("click",function(){return r.adduser()}),e._uU(77),e.ALo(78,"translate"),e.qZA()()()()()),2&t){let i,n,l,c,u,p,d;e.xp6(4),e.hij(" ",e.lcZ(5,23,"users_table.add_newadmin_tittle")," "),e.xp6(3),e.Oqu(e.lcZ(8,25,"users_table.add_newadmin_subtittle")),e.xp6(2),e.Q6J("formGroup",r.userForm),e.xp6(5),e.Oqu(e.lcZ(15,27,"users_table.first_name")),e.xp6(3),e.Q6J("ngIf",null==(i=r.userForm.get("firstName"))?null:i.invalid),e.xp6(4),e.Oqu(e.lcZ(22,29,"users_table.last_name")),e.xp6(3),e.Q6J("ngIf",null==(n=r.userForm.get("otherNames"))?null:n.invalid),e.xp6(4),e.Oqu(e.lcZ(29,31,"users_table.phone_number")),e.xp6(3),e.Q6J("ngIf",null==(l=r.userForm.get("phoneNumber"))?null:l.invalid),e.xp6(4),e.Oqu(e.lcZ(36,33,"users_table.user_name")),e.xp6(3),e.Q6J("ngIf",null==(c=r.userForm.get("username"))?null:c.invalid),e.xp6(4),e.Oqu(e.lcZ(43,35,"users_table.mail")),e.xp6(3),e.Q6J("ngIf",null==(u=r.userForm.get("emailAddress"))?null:u.invalid),e.xp6(4),e.Oqu(e.lcZ(50,37,"users_table.gender")),e.xp6(6),e.Oqu(e.lcZ(56,39,"users_table.male")),e.xp6(3),e.Oqu(e.lcZ(59,41,"users_table.female")),e.xp6(2),e.Q6J("ngIf",null==(p=r.userForm.get("gender"))?null:p.invalid),e.xp6(4),e.Oqu(e.lcZ(65,43,"users_table.country")),e.xp6(5),e.Q6J("ngForOf",r.countries),e.xp6(1),e.Q6J("ngIf",null==(d=r.userForm.get("country"))?null:d.invalid),e.xp6(4),e.hij(" ",e.lcZ(75,45,"users_table.back")," "),e.xp6(2),e.Q6J("disabled",!r.userForm.valid),e.xp6(1),e.hij(" ",e.lcZ(78,47,"users_table.add")," ")}},dependencies:[v.sg,v.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,T.ey,C.lW,f.a8,f.n5,m.TO,m.KE,m.hX,x.Hw,k.Nt,I.gD,g.xw,g.SQ,g.yH,b.X$]}),o})();function Ne(o,s){if(1&o&&(e.TgZ(0,"p",4),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" Are you sure you want to DEACTIVATE | ",null==t.data?null:t.data.username,"? ")}}function Fe(o,s){if(1&o&&(e.TgZ(0,"p",5),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" Are you sure you want to ACTIVATE | ",null==t.data?null:t.data.username,"? ")}}let V=(()=>{class o{constructor(t,r,i,n,l,c){this.data=t,this.dialogRef=r,this.service=i,this.toaster=n,this.encryptionService=l,this.localService=c}onClose(){this.dialogRef.close()}ngOnInit(){}onSubmit(){const t={id:this.data?.id,userName:this.localService.get("user-entity")?.username,action:""};t.action=this.data.deleted?"Activate":"Deactivate";const r=this.encryptionService.encryptData(t),i=r.split(":")[0],n=r.split(":")[1],l=r.split(":")[2];this.service.activateDeactivateUserAccount(n,i).subscribe(c=>{const u=JSON.parse(c);if(200==u.code||201==u.code){const p=this.encryptionService.decryptData(u?.body,l);p&&(this.toaster.showSuccess(p?.message),this.onClose())}else this.toaster.showError(u?.body?.message)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.WI),e.Y36(h.so),e.Y36(Z.K),e.Y36(F.M),e.Y36(A.w),e.Y36(q.n2))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-activate-deactivate-user-account"]],features:[e._Bn([Z.K])],decls:11,vars:2,consts:[["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","font-size","18px","height","40px",3,"click"],["mat-raised-button","",2,"background-color","#74C84D","color","white","font-size","18px","height","40px",3,"click"],[1,"alert","alert-danger"],[1,"alert","alert-success"]],template:function(t,r){1&t&&(e.TgZ(0,"mat-card")(1,"mat-card-content"),e.YNc(2,Ne,2,1,"p",0),e.YNc(3,Fe,2,1,"p",1),e.qZA(),e.TgZ(4,"mat-card-actions")(5,"button",2),e.NdJ("click",function(){return r.onClose()}),e.TgZ(6,"mat-icon"),e._uU(7,"arrow_back"),e.qZA(),e._uU(8," Back "),e.qZA(),e.TgZ(9,"button",3),e.NdJ("click",function(){return r.onSubmit()}),e._uU(10," Submit "),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("ngIf",!1===(null==r.data?null:r.data.deleted)),e.xp6(1),e.Q6J("ngIf",!0===(null==r.data?null:r.data.deleted)))},dependencies:[v.O5,C.lW,f.a8,f.dn,f.hq,x.Hw]}),o})(),L=(()=>{class o{constructor(t){this.http=t,this.apiUrl=j.N.apiUrl}getUserTypes(t,r){const i=new S.WM({key:t});return this.http.post(this.apiUrl+"UserAccountTypes/Filtered?encrypted=true",r,{headers:i,responseType:"text"})}allUserTypes(t){const r=new S.WM({key:t});return this.http.get(this.apiUrl+"UserAccountTypes/All",{headers:r,responseType:"text"})}addUserType(t,r){const i=new S.WM({key:r});return this.http.post(`${this.apiUrl}UserAccountTypes/Add?encrypted=true`,t,{headers:i,responseType:"text"})}activateDeactivateUserType(t,r){const i=new S.WM({key:r});return this.http.post(`${this.apiUrl}UserAccountTypes/ActivateDeactivate?encrypted=true`,t,{headers:i,responseType:"text"})}updateUserType(t,r){const i=new S.WM({key:r});return this.http.put(`${this.apiUrl}UserAccountTypes/Update?encrypted=true`,t,{headers:i,responseType:"text"})}getUserTypeById(t,r){const i=new S.WM({key:r});return this.http.get(this.apiUrl+"UserAccountTypes/FindById?id="+t,{headers:i,responseType:"text"})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(S.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Re(o,s){if(1&o&&(e.TgZ(0,"mat-option",8),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}let $=(()=>{class o{constructor(t,r,i,n,l,c,u,p){this.data=t,this.dialogRef=r,this.service=i,this.toaster=n,this.encryptionService=l,this.userTypeService=c,this.fb=u,this.localService=p,this.form=this.fb.group({userType:[]})}onClose(){this.dialogRef.close()}ngOnInit(){this.getUserTypes()}getUserTypes(){const t=this.encryptionService.generateAesKey(),r=this.encryptionService.generatebase64Key(t),i=this.encryptionService.encryptWithRSA(r);this.userTypeService.allUserTypes(i).subscribe(n=>{const l=JSON.parse(n),c=this.encryptionService.decryptData(l?.body,r);this.userTypes=c},n=>{console.error("Error fetching user types:",n)})}onSubmit(){const t={userId:this.data?.id,adminName:this.localService.get("user-entity")?.username,userType:this.form.value.userType},r=this.encryptionService.encryptData(t),i=r.split(":")[0],n=r.split(":")[1],l=r.split(":")[2];this.service.changeUserType(n,i).subscribe(c=>{const u=JSON.parse(c);if(200==u.code||201==u.code){const p=this.encryptionService.decryptData(u?.body,l);p&&(this.toaster.showSuccess(p?.message),this.onClose())}else this.toaster.showError(u?.body?.message)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.WI),e.Y36(h.so),e.Y36(Z.K),e.Y36(F.M),e.Y36(A.w),e.Y36(L),e.Y36(a.qu),e.Y36(q.n2))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-change-user-type"]],features:[e._Bn([Z.K,L])],decls:18,vars:2,consts:[[1,"form-field-full",3,"formGroup"],["fxFlex","100","fxFlex.lt-sm","100"],[2,"width","100%"],[2,"font-size","16px"],["required","","formControlName","userType",2,"font-size","16px"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","font-size","18px","height","40px",3,"click"],["mat-raised-button","",2,"background-color","#74C84D","color","white","font-size","18px","height","40px",3,"click"],[3,"value"]],template:function(t,r){1&t&&(e.TgZ(0,"mat-card")(1,"mat-card-content")(2,"form",0)(3,"div",1)(4,"mat-form-field",2)(5,"mat-label",3),e._uU(6,"User Type"),e.qZA(),e.TgZ(7,"mat-select",4)(8,"mat-option"),e._uU(9,"-- Select --"),e.qZA(),e.YNc(10,Re,2,2,"mat-option",5),e.qZA()()()()(),e.TgZ(11,"mat-card-actions")(12,"button",6),e.NdJ("click",function(){return r.onClose()}),e.TgZ(13,"mat-icon"),e._uU(14,"arrow_back"),e.qZA(),e._uU(15," Back "),e.qZA(),e.TgZ(16,"button",7),e.NdJ("click",function(){return r.onSubmit()}),e._uU(17," Submit "),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("formGroup",r.form),e.xp6(8),e.Q6J("ngForOf",r.userTypes))},dependencies:[v.sg,a._Y,a.JJ,a.JL,a.Q7,a.sg,a.u,T.ey,C.lW,f.a8,f.dn,f.hq,m.KE,m.hX,x.Hw,I.gD,g.yH]}),o})();var Ie=U(97185);function Oe(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function Me(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function ze(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function Je(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function De(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function Ye(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function Le(o,s){if(1&o&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function Pe(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function Be(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.activateDeactivate())}),e.TgZ(1,"mat-icon"),e._uU(2,"lock_open"),e.qZA(),e._uU(3," Activate "),e.qZA()}}function je(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.activateDeactivate())}),e.TgZ(1,"mat-icon"),e._uU(2,"lock"),e.qZA(),e._uU(3," Deactivate "),e.qZA()}}let X=(()=>{class o{constructor(t,r,i,n,l,c,u,p,d,_){this.countriesService=t,this.userService=r,this.encryptionService=i,this.route=n,this.fb=l,this.dateAdapter=c,this.translate=u,this.router=p,this.toaster=d,this.dialog=_,this.isLoading=!0,this.userForm=this.fb.nonNullable.group({firstName:["",[a.kI.required,a.kI.maxLength(50)]],otherNames:["",[a.kI.required,a.kI.maxLength(100)]],emailAddress:["",[a.kI.required,a.kI.email]],username:["",[a.kI.required,a.kI.maxLength(30)]],phoneNumber:["",[a.kI.required,a.kI.pattern("^[0-9]{10}$")]],gender:["",a.kI.required],userId:[""],createdBy:[""],createdOn:[],role:[""],branch:[""],country:[""],department:[""],region:[""],status:[""],userType:[""]})}ngOnDestroy(){this.translateSubscription.unsubscribe()}ngOnInit(){this.userId=this.route.snapshot.paramMap.get("id"),this.getUserProfile(),this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)}),this.getCountries()}getCountries(){const t=this.encryptionService.generateAesKey(),r=this.encryptionService.generatebase64Key(t),i=this.encryptionService.encryptWithRSA(r);this.countriesService.allCountries(i).subscribe(n=>{const l=JSON.parse(n),c=this.encryptionService.decryptData(l?.body,r);this.countries=c},n=>{console.error("Error fetching countries:",n)})}getUserProfile(){const t=this.encryptionService.generateAesKey(),r=this.encryptionService.generatebase64Key(t),i=this.encryptionService.encryptWithRSA(r);this.userService.getUserProfile(this.userId,i).subscribe(n=>{const l=JSON.parse(n);this.profile=this.encryptionService.decryptData(l?.body,r),this.profile&&(this.userForm.patchValue({firstName:this.profile?.firstName||"",otherNames:this.profile?.otherNames||"",emailAddress:this.profile?.emailAddress||"",username:this.profile?.username||"",phoneNumber:this.profile?.phoneNumber||"",gender:this.profile?.gender||"",createdBy:this.profile?.createdBy||"",createdOn:this.profile?.createdOn||"",userId:this.profile?.userId||"",country:this.profile?.countries[0]?.name||"",region:this.profile?.branch?.region?.name||"",branch:this.profile?.branch?.name+" - "+this.profile?.branch?.code||"",department:this.profile?.department?.name||"",userType:this.profile?.accountType?.name||""}),this.userForm.patchValue(this.profile?.deleted?{status:"Inactive"}:{status:"Active"})),this.isLoading=!1},n=>{console.error("Error fetching user profile:",n),this.isLoading=!1})}activateDeactivate(){this.dialog.open(V,{data:this.profile,width:"35%",disableClose:!1,autoFocus:!0}).afterClosed().subscribe(()=>{this.getUserProfile()})}changeUserType(){this.dialog.open($,{data:this.profile,width:"35%",disableClose:!1,autoFocus:!0}).afterClosed().subscribe(()=>{this.getUserProfile()})}return(){this.router.navigateByUrl("/usermanagement/users")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(M.K),e.Y36(Z.K),e.Y36(A.w),e.Y36(y.gz),e.Y36(a.qu),e.Y36(T._A),e.Y36(b.sK),e.Y36(y.F0),e.Y36(Ie._W),e.Y36(h.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-edit-user"]],decls:109,vars:14,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","24px","border","2px solid #304254","border-radius","8px"],[2,"font-size","24px","margin-bottom","12px","font-family","'Inter', sans-serif","color","#304254"],[1,"form-field-full",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex","33.33","fxFlex.lt-sm","100"],[2,"width","100%"],[2,"font-size","16px"],["matInput","","placeholder","First Name","formControlName","firstName","required","",2,"font-size","16px"],[4,"ngIf"],["matInput","","placeholder","Other Name","formControlName","otherNames","required","",2,"font-size","16px"],["matInput","","placeholder","Phone number","formControlName","phoneNumber","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","User Name","formControlName","username","required","",2,"font-size","16px"],["matInput","","placeholder","Email","formControlName","emailAddress","required","",2,"font-size","16px"],["required","","formControlName","gender",2,"font-size","16px"],["value","Male"],["value","Female"],["readonly","","matInput","","placeholder","User Id","formControlName","userId","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Created By","formControlName","createdBy","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Date Created","formControlName","createdOn","required","",2,"font-size","16px"],["appearance","outline",2,"width","100%"],["required","","formControlName","country",2,"font-size","16px"],[3,"value",4,"ngFor","ngForOf"],["readonly","","matInput","","placeholder","Region","formControlName","region","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Branch","formControlName","branch","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","User Account Type","formControlName","userType","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Account Status","formControlName","status","required","",2,"font-size","16px"],[1,"d-flex","justify-content-between","flex-wrap",2,"margin-top","24px"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","font-size","14px","margin-right","10px",3,"click"],["mat-raised-button","",2,"background-color","#74C84D","color","white","font-size","14px","margin-right","10px",3,"click"],["mat-raised-button","",2,"background-color","#847f7e","color","white","font-size","14px","margin-right","10px",3,"click"],["mat-raised-button","","style","background-color: #064a16; color: white; font-size: 14px; margin-right: 10px",3,"click",4,"ngIf"],["mat-raised-button","","style","background-color: #f8011a; color: white; font-size: 14px; margin-right: 10px",3,"click",4,"ngIf"],[3,"value"],["mat-raised-button","",2,"background-color","#064a16","color","white","font-size","14px","margin-right","10px",3,"click"],["mat-raised-button","",2,"background-color","#f8011a","color","white","font-size","14px","margin-right","10px",3,"click"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title",3),e._uU(4," Manage User Account "),e.qZA(),e.TgZ(5,"form",4)(6,"div",5)(7,"div",6)(8,"mat-form-field",7)(9,"mat-label",8),e._uU(10,"First Name"),e.qZA(),e._UZ(11,"input",9),e.YNc(12,Oe,3,3,"mat-error",10),e.qZA()(),e.TgZ(13,"div",6)(14,"mat-form-field",7)(15,"mat-label",8),e._uU(16,"Other Name"),e.qZA(),e._UZ(17,"input",11),e.YNc(18,Me,3,3,"mat-error",10),e.qZA()(),e.TgZ(19,"div",6)(20,"mat-form-field",7)(21,"mat-label",8),e._uU(22,"Phone Number"),e.qZA(),e._UZ(23,"input",12),e.YNc(24,ze,3,3,"mat-error",10),e.qZA()(),e.TgZ(25,"div",6)(26,"mat-form-field",7)(27,"mat-label",8),e._uU(28,"User Name"),e.qZA(),e._UZ(29,"input",13),e.YNc(30,Je,3,3,"mat-error",10),e.qZA()(),e.TgZ(31,"div",6)(32,"mat-form-field",7)(33,"mat-label",8),e._uU(34,"Email"),e.qZA(),e._UZ(35,"input",14),e.YNc(36,De,3,3,"mat-error",10),e.qZA()(),e.TgZ(37,"div",6)(38,"mat-form-field",7)(39,"mat-label",8),e._uU(40,"Gender"),e.qZA(),e.TgZ(41,"mat-select",15)(42,"mat-option"),e._uU(43,"-- Select --"),e.qZA(),e.TgZ(44,"mat-option",16),e._uU(45,"Male"),e.qZA(),e.TgZ(46,"mat-option",17),e._uU(47,"Female"),e.qZA()(),e.YNc(48,Ye,3,3,"mat-error",10),e.qZA()(),e.TgZ(49,"div",6)(50,"mat-form-field",7)(51,"mat-label",8),e._uU(52,"System Generated User Id"),e.qZA(),e._UZ(53,"input",18),e.qZA()(),e.TgZ(54,"div",6)(55,"mat-form-field",7)(56,"mat-label",8),e._uU(57,"Created By"),e.qZA(),e._UZ(58,"input",19),e.qZA()(),e.TgZ(59,"div",6)(60,"mat-form-field",7)(61,"mat-label",8),e._uU(62,"Date Created"),e.qZA(),e._UZ(63,"input",20),e.qZA()(),e.TgZ(64,"div",6)(65,"mat-form-field",21)(66,"mat-label",8),e._uU(67),e.ALo(68,"translate"),e.qZA(),e.TgZ(69,"mat-select",22)(70,"mat-option"),e._uU(71,"-- Select --"),e.qZA(),e.YNc(72,Le,2,2,"mat-option",23),e.qZA(),e.YNc(73,Pe,3,3,"mat-error",10),e.qZA()(),e.TgZ(74,"div",6)(75,"mat-form-field",7)(76,"mat-label",8),e._uU(77,"Region"),e.qZA(),e._UZ(78,"input",24),e.qZA()(),e.TgZ(79,"div",6)(80,"mat-form-field",7)(81,"mat-label",8),e._uU(82,"Branch"),e.qZA(),e._UZ(83,"input",25),e.qZA()(),e.TgZ(84,"div",6)(85,"mat-form-field",7)(86,"mat-label",8),e._uU(87,"User Account Type"),e.qZA(),e._UZ(88,"input",26),e.qZA()(),e.TgZ(89,"div",6)(90,"mat-form-field",7)(91,"mat-label",8),e._uU(92,"Account Status"),e.qZA(),e._UZ(93,"input",27),e.qZA()()(),e.TgZ(94,"div",28)(95,"button",29),e.NdJ("click",function(){return r.return()}),e.TgZ(96,"mat-icon"),e._uU(97,"arrow_back"),e.qZA(),e._uU(98," Back "),e.qZA(),e.TgZ(99,"button",30),e.NdJ("click",function(){return r.return()}),e.TgZ(100,"mat-icon"),e._uU(101,"edit"),e.qZA(),e._uU(102," Update "),e.qZA(),e.TgZ(103,"button",31),e.NdJ("click",function(){return r.changeUserType()}),e.TgZ(104,"mat-icon"),e._uU(105,"edit"),e.qZA(),e._uU(106," User Type "),e.qZA(),e.YNc(107,Be,4,0,"button",32),e.YNc(108,je,4,0,"button",33),e.qZA()()()()()),2&t){let i,n,l,c,u,p,d;e.xp6(5),e.Q6J("formGroup",r.userForm),e.xp6(7),e.Q6J("ngIf",null==(i=r.userForm.get("firstName"))?null:i.invalid),e.xp6(6),e.Q6J("ngIf",null==(n=r.userForm.get("otherNames"))?null:n.invalid),e.xp6(6),e.Q6J("ngIf",null==(l=r.userForm.get("phoneNumber"))?null:l.invalid),e.xp6(6),e.Q6J("ngIf",null==(c=r.userForm.get("username"))?null:c.invalid),e.xp6(6),e.Q6J("ngIf",null==(u=r.userForm.get("emailAddress"))?null:u.invalid),e.xp6(12),e.Q6J("ngIf",null==(p=r.userForm.get("gender"))?null:p.invalid),e.xp6(19),e.Oqu(e.lcZ(68,12,"users_table.country")),e.xp6(5),e.Q6J("ngForOf",r.countries),e.xp6(1),e.Q6J("ngIf",null==(d=r.userForm.get("country"))?null:d.invalid),e.xp6(34),e.Q6J("ngIf",!0===(null==r.profile?null:r.profile.deleted)),e.xp6(1),e.Q6J("ngIf",!1===(null==r.profile?null:r.profile.deleted))}},dependencies:[v.sg,v.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,T.ey,C.lW,f.a8,f.n5,m.TO,m.KE,m.hX,x.Hw,k.Nt,I.gD,g.xw,g.SQ,g.yH,b.X$]}),o})(),ee=(()=>{class o{constructor(t){this.http=t,this.apiUrl=j.N.apiUrl}getpermissions(t){const r=new S.WM({key:t});return this.http.get(this.apiUrl+"Permissions/All",{headers:r,responseType:"text"})}getPermissionsPagenation(t,r,i){const n=new S.WM({key:t});return this.http.get(this.apiUrl+"Permissions/View?page="+r+"&size="+i,{headers:n,responseType:"text"})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(S.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Ke=["statusTemplate"];function Qe(o,s){if(1&o&&(e.TgZ(0,"span",10),e._uU(1),e.qZA()),2&o){const t=s.$implicit,r=e.oxw();e.Q6J("ngStyle",r.getStatusColor(t.status)),e.xp6(1),e.hij(" ",t.status," ")}}const Ee=function(){return[10,20,50,100]};let te=(()=>{class o{constructor(t,r,i,n){this.remoteSrv=t,this.cdr=r,this.encryptionservice=i,this.router=n,this.columns=[],this.list=[],this.total=0,this.isLoading=!0,this.query={q:"",sort:"",order:"",page:0,per_page:10}}ngAfterViewInit(){this.columns=[{header:"Permission Name",field:"name"},{header:"Description",field:"description"},{header:"Created Date",field:"createdOn"},{header:"Created By",field:"createdBy"},{header:"Status",field:"status",cellTemplate:this.statusTemplate}]}getStatusColor(t){switch(t){case"Active":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Inactive":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}get params(){const t=Object.assign({},this.query);return t.page+=1,t}ngOnInit(){this.getpermissions()}getpermissions(){const t=this.encryptionservice.generateAesKey(),r=this.encryptionservice.generatebase64Key(t),i=this.encryptionservice.encryptWithRSA(r);this.remoteSrv.getPermissionsPagenation(i,this.query.page,this.query.per_page).subscribe(n=>{const l=JSON.parse(n),c=this.encryptionservice.decryptData(l?.body,r);this.list=c.content,this.total=c.total,this.isLoading=!1,this.cdr.detectChanges()},n=>{console.error("Error fetching permissions",n),this.isLoading=!1})}getNextPage(t){this.query.page=t.pageIndex,this.query.per_page=t.pageSize,this.getpermissions()}search(){this.query.page=0,this.getpermissions()}reset(){this.query.page=0,this.query.per_page=10,this.getpermissions()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ee),e.Y36(e.sBO),e.Y36(A.w),e.Y36(y.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-user"]],viewQuery:function(t,r){if(1&t&&e.Gf(Ke,7),2&t){let i;e.iGM(i=e.CRH())&&(r.statusTemplate=i.first)}},features:[e._Bn([ee])],decls:14,vars:11,consts:[[2,"border","1px solid #ccc","padding","16px"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"col"],[2,"margin","0"],[1,"d-flex","flex-wrap","align-items-center"],["appearance","outline",2,"width","100%"],["matPrefix",""],["matInput","","name","q","placeholder","Search",3,"ngModel","ngModelChange"],[3,"data","columns","length","rowStriped","loading","pageOnFront","pageIndex","pageSize","pageSizeOptions","page"],["statusTemplate",""],[3,"ngStyle"]],template:function(t,r){1&t&&(e.TgZ(0,"div")(1,"mat-card",0)(2,"div",1)(3,"div",2)(4,"h2",3),e._uU(5,"Permissions Management"),e.qZA()(),e.TgZ(6,"div",4)(7,"mat-form-field",5)(8,"mat-icon",6),e._uU(9,"search"),e.qZA(),e.TgZ(10,"input",7),e.NdJ("ngModelChange",function(n){return r.query.q=n}),e.qZA()()()()()(),e.TgZ(11,"mtx-grid",8),e.NdJ("page",function(n){return r.getNextPage(n)}),e.qZA(),e.YNc(12,Qe,2,2,"ng-template",null,9,e.W1O)),2&t&&(e.xp6(10),e.Q6J("ngModel",r.query.q),e.xp6(1),e.Q6J("data",r.list)("columns",r.columns)("length",r.total)("rowStriped",!0)("loading",r.isLoading)("pageOnFront",!1)("pageIndex",r.query.page)("pageSize",r.query.per_page)("pageSizeOptions",e.DdM(10,Ee)))},dependencies:[v.PC,a.Fj,a.JJ,a.On,f.a8,m.KE,m.qo,x.Hw,k.Nt,O.CM,J.Zl],styles:["[_nghost-%COMP%]     .mtx-grid{height:500px}.mtx-grid[_ngcontent-%COMP%]{box-shadow:0 4px 12px #902f2766;border-radius:8px;padding:16px}.mtx-grid[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-collapse:collapse}.mtx-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#902f271a}.mtx-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}.mtx-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:2px solid rgba(144,47,39,.3)}.mtx-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}"]}),o})();function Ge(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function He(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function We(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function Ve(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function $e(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function Xe(o,s){if(1&o&&(e.TgZ(0,"mat-option",31),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function et(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function tt(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function rt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.activateDeactivate())}),e.TgZ(1,"mat-icon"),e._uU(2,"lock_open"),e.qZA(),e._uU(3," Activate "),e.qZA()}}function ot(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.activateDeactivate())}),e.TgZ(1,"mat-icon"),e._uU(2,"lock"),e.qZA(),e._uU(3," Deactivate "),e.qZA()}}let re=(()=>{class o{constructor(t,r,i,n,l,c,u,p,d,_,R){this.userService=t,this.encryptionService=r,this.route=i,this.fb=n,this.dateAdapter=l,this.translate=c,this.router=u,this.toaster=p,this.localStorage=d,this.dialog=_,this.countriesService=R,this.isLoading=!0,this.userForm=this.fb.nonNullable.group({firstName:["",[a.kI.required,a.kI.maxLength(50)]],otherNames:["",[a.kI.required,a.kI.maxLength(100)]],emailAddress:["",[a.kI.required,a.kI.email]],username:["",[a.kI.required,a.kI.maxLength(30)]],phoneNumber:["",[a.kI.required,a.kI.pattern("^[0-9]{10}$")]],gender:["",a.kI.required],userId:[""],country:[""],createdBy:[""],createdOn:[],role:[""],status:[""],userType:[""],acctStatus:[!1]})}ngOnDestroy(){this.translateSubscription.unsubscribe()}toggleAcctStatus(t){this.userForm.get("acctStatus")?.setValue(t.checked)}getCountries(){const t=this.encryptionService.generateAesKey(),r=this.encryptionService.generatebase64Key(t),i=this.encryptionService.encryptWithRSA(r);this.countriesService.allCountries(i).subscribe(n=>{const l=JSON.parse(n),c=this.encryptionService.decryptData(l?.body,r);this.countries=c},n=>{console.error("Error fetching countries:",n)})}ngOnInit(){this.userId=this.route.snapshot.paramMap.get("id"),this.getUserProfile(),this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)}),this.getCountries()}getUserProfile(){const t=this.encryptionService.generateAesKey(),r=this.encryptionService.generatebase64Key(t),i=this.encryptionService.encryptWithRSA(r);this.userService.getUserProfile(this.userId,i).subscribe(n=>{const l=JSON.parse(n);this.profile=this.encryptionService.decryptData(l?.body,r),this.profile&&this.userForm.patchValue({firstName:this.profile?.firstName||"",otherNames:this.profile?.otherNames||"",emailAddress:this.profile?.emailAddress||"",username:this.profile?.username||"",phoneNumber:this.profile?.phoneNumber||"",gender:this.profile?.gender||"",createdBy:this.profile?.createdBy||"",createdOn:this.profile?.createdOn||"",userId:this.profile?.userId||"",userType:this.profile?.accountType?.name||"",country:this.profile?.country?.id||"",role:this.profile?.roles[0]?.name,status:this.profile?.status,acctStatus:"Active"===this.profile?.status}),this.isLoading=!1},n=>{console.error("Error fetching user profile:",n),this.isLoading=!1})}activateDeactivate(){this.dialog.open(V,{data:this.profile,width:"35%",disableClose:!1,autoFocus:!0}).afterClosed().subscribe(()=>{this.getUserProfile()})}changeUserType(){this.dialog.open($,{data:this.profile,width:"35%",disableClose:!1,autoFocus:!0}).afterClosed().subscribe(()=>{this.getUserProfile()})}update(){var t=this.localStorage.get("user-entity");const i=this.encryptionService.encryptData({firstName:this.userForm.value.firstName,otherNames:this.userForm.value.otherNames,modifiedBy:t?.username,phoneNumber:this.userForm.value.phoneNumber,emailAddress:this.userForm.value.emailAddress,gender:this.userForm.value.gender,userId:this.userForm.value?.userId,country:this.userForm.value?.country,id:this.profile?.id,acctStatus:this.userForm.value.acctStatus}),n=i.split(":")[0],l=i.split(":")[1],c=i.split(":")[2];this.userService.adminUpdateUserDetails(l,n).subscribe(u=>{const p=JSON.parse(u);if(200==p.code||201==p.code){const d=this.encryptionService.decryptData(p.body,c);d&&(this.toaster.showSuccess(d?.message),this.return())}else this.toaster.showError(p?.body?.message)})}return(){this.router.navigateByUrl("/usermanagement/superadminusers")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z.K),e.Y36(A.w),e.Y36(y.gz),e.Y36(a.qu),e.Y36(T._A),e.Y36(b.sK),e.Y36(y.F0),e.Y36(F.M),e.Y36(q.n2),e.Y36(h.uw),e.Y36(M.K))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-view-user-account-details"]],decls:98,vars:15,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","24px","border","2px solid #304254","border-radius","8px"],[2,"font-size","24px","margin-bottom","12px","font-family","'Inter', sans-serif","color","#304254"],[1,"form-field-full",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex","33.33","fxFlex.lt-sm","100"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","placeholder","First Name","formControlName","firstName","required","",2,"font-size","16px"],[4,"ngIf"],["matInput","","placeholder","Other Name","formControlName","otherNames","required","",2,"font-size","16px"],["matInput","","placeholder","Phone number","formControlName","phoneNumber","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","User Name","formControlName","username","required","",2,"font-size","16px"],["matInput","","placeholder","Email","formControlName","emailAddress","required","",2,"font-size","16px"],["required","","formControlName","country",2,"font-size","16px"],[3,"value",4,"ngFor","ngForOf"],["required","","formControlName","gender",2,"font-size","16px"],["value","Male"],["value","Female"],["readonly","","matInput","","placeholder","User Id","formControlName","userId","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Created By","formControlName","createdBy","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Date Created","formControlName","createdOn","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","User Account Type","formControlName","userType","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Role","formControlName","role","required","",2,"font-size","16px"],["app","","formControlName","acctStatus",2,"font-size","16px","padding-top","20px","padding-bottom","20px",3,"checked","change"],[1,"d-flex","justify-content-between","flex-wrap",2,"margin-top","24px"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","font-size","14px","margin-right","10px",3,"click"],["mat-raised-button","",2,"background-color","#74C84D","color","white","font-size","14px","margin-right","10px",3,"click"],["mat-raised-button","","style","background-color: #064a16; color: white; font-size: 14px; margin-right: 10px",3,"click",4,"ngIf"],["mat-raised-button","","style","background-color: #f8011a; color: white; font-size: 14px; margin-right: 10px",3,"click",4,"ngIf"],[3,"value"],["mat-raised-button","",2,"background-color","#064a16","color","white","font-size","14px","margin-right","10px",3,"click"],["mat-raised-button","",2,"background-color","#f8011a","color","white","font-size","14px","margin-right","10px",3,"click"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title",3),e._uU(4," Manage User Account "),e.qZA(),e.TgZ(5,"form",4)(6,"div",5)(7,"div",6)(8,"mat-form-field",7)(9,"mat-label",8),e._uU(10,"First Name"),e.qZA(),e._UZ(11,"input",9),e.YNc(12,Ge,3,3,"mat-error",10),e.qZA()(),e.TgZ(13,"div",6)(14,"mat-form-field",7)(15,"mat-label",8),e._uU(16,"Other Name"),e.qZA(),e._UZ(17,"input",11),e.YNc(18,He,3,3,"mat-error",10),e.qZA()(),e.TgZ(19,"div",6)(20,"mat-form-field",7)(21,"mat-label",8),e._uU(22,"Phone Number"),e.qZA(),e._UZ(23,"input",12),e.YNc(24,We,3,3,"mat-error",10),e.qZA()(),e.TgZ(25,"div",6)(26,"mat-form-field",7)(27,"mat-label",8),e._uU(28,"User Name"),e.qZA(),e._UZ(29,"input",13),e.YNc(30,Ve,3,3,"mat-error",10),e.qZA()(),e.TgZ(31,"div",6)(32,"mat-form-field",7)(33,"mat-label",8),e._uU(34,"Email"),e.qZA(),e._UZ(35,"input",14),e.YNc(36,$e,3,3,"mat-error",10),e.qZA()(),e.TgZ(37,"div",6)(38,"mat-form-field",7)(39,"mat-label",8),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"mat-select",15)(43,"mat-option"),e._uU(44,"-- Select --"),e.qZA(),e.YNc(45,Xe,2,2,"mat-option",16),e.qZA(),e.YNc(46,et,3,3,"mat-error",10),e.qZA()(),e.TgZ(47,"div",6)(48,"mat-form-field",7)(49,"mat-label",8),e._uU(50,"Gender"),e.qZA(),e.TgZ(51,"mat-select",17)(52,"mat-option"),e._uU(53,"-- Select --"),e.qZA(),e.TgZ(54,"mat-option",18),e._uU(55,"Male"),e.qZA(),e.TgZ(56,"mat-option",19),e._uU(57,"Female"),e.qZA()(),e.YNc(58,tt,3,3,"mat-error",10),e.qZA()(),e.TgZ(59,"div",6)(60,"mat-form-field",7)(61,"mat-label",8),e._uU(62,"System Generated User Id"),e.qZA(),e._UZ(63,"input",20),e.qZA()(),e.TgZ(64,"div",6)(65,"mat-form-field",7)(66,"mat-label",8),e._uU(67,"Created By"),e.qZA(),e._UZ(68,"input",21),e.qZA()(),e.TgZ(69,"div",6)(70,"mat-form-field",7)(71,"mat-label",8),e._uU(72,"Date Created"),e.qZA(),e._UZ(73,"input",22),e.qZA()(),e.TgZ(74,"div",6)(75,"mat-form-field",7)(76,"mat-label",8),e._uU(77,"User Account Type"),e.qZA(),e._UZ(78,"input",23),e.qZA()(),e.TgZ(79,"div",6)(80,"mat-form-field",7)(81,"mat-label",8),e._uU(82,"Role"),e.qZA(),e._UZ(83,"input",24),e.qZA()(),e.TgZ(84,"div",6)(85,"mat-checkbox",25),e.NdJ("change",function(n){return r.toggleAcctStatus(n)}),e._uU(86," Activate/Deactivate "),e.qZA()()(),e.TgZ(87,"div",26)(88,"button",27),e.NdJ("click",function(){return r.return()}),e.TgZ(89,"mat-icon"),e._uU(90,"arrow_back"),e.qZA(),e._uU(91," Back "),e.qZA(),e.TgZ(92,"button",28),e.NdJ("click",function(){return r.update()}),e.TgZ(93,"mat-icon"),e._uU(94,"edit"),e.qZA(),e._uU(95," Submit "),e.qZA(),e.YNc(96,rt,4,0,"button",29),e.YNc(97,ot,4,0,"button",30),e.qZA()()()()()),2&t){let i,n,l,c,u,p,d,_;e.xp6(5),e.Q6J("formGroup",r.userForm),e.xp6(7),e.Q6J("ngIf",null==(i=r.userForm.get("firstName"))?null:i.invalid),e.xp6(6),e.Q6J("ngIf",null==(n=r.userForm.get("otherNames"))?null:n.invalid),e.xp6(6),e.Q6J("ngIf",null==(l=r.userForm.get("phoneNumber"))?null:l.invalid),e.xp6(6),e.Q6J("ngIf",null==(c=r.userForm.get("username"))?null:c.invalid),e.xp6(6),e.Q6J("ngIf",null==(u=r.userForm.get("emailAddress"))?null:u.invalid),e.xp6(4),e.Oqu(e.lcZ(41,13,"users_table.country")),e.xp6(5),e.Q6J("ngForOf",r.countries),e.xp6(1),e.Q6J("ngIf",null==(p=r.userForm.get("country"))?null:p.invalid),e.xp6(12),e.Q6J("ngIf",null==(d=r.userForm.get("gender"))?null:d.invalid),e.xp6(27),e.Q6J("checked",null==(_=r.userForm.get("acctStatus"))?null:_.value),e.xp6(11),e.Q6J("ngIf",!0===(null==r.profile?null:r.profile.deleted)),e.xp6(1),e.Q6J("ngIf",!1===(null==r.profile?null:r.profile.deleted))}},dependencies:[v.sg,v.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,T.ey,C.lW,f.a8,f.n5,D.oG,m.TO,m.KE,m.hX,x.Hw,k.Nt,I.gD,g.xw,g.SQ,g.yH,b.X$]}),o})();function it(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function nt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"mat-checkbox",28),e.NdJ("change",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.onCheckboxChange(i))}),e._uU(2),e.qZA()()}if(2&o){const t=s.$implicit,r=s.index,i=e.oxw();e.xp6(1),e.Q6J("value",t.id)("checked",i.permissions.at(r).value),e.xp6(1),e.hij(" ",t.name," ")}}let oe=(()=>{class o{constructor(t,r,i,n,l,c,u,p,d,_){this.dialog=t,this.roleService=r,this.encryptionService=i,this.route=n,this.fb=l,this.dateAdapter=c,this.translate=u,this.router=p,this.toaster=d,this.localStorage=_,this.selectedPrivilegeIds=[],this.rolesForm=this.fb.group({name:[""],createdBy:[""],status:[!1],createdOn:[""],checkedBy:[""],checkedOn:[""],searchKey:[""],permissions:this.fb.array([])})}ngOnDestroy(){this.translateSubscription.unsubscribe()}ngOnInit(){this.roleId=this.route.snapshot.paramMap.get("id"),this.getRoleDetails(),this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)})}getpermissions(){const t=this.encryptionService.generateAesKey(),r=this.encryptionService.generatebase64Key(t),i=this.encryptionService.encryptWithRSA(r);this.roleService.getpermissions(i).subscribe(n=>{const l=JSON.parse(n),c=this.encryptionService.decryptData(l?.body,r);this.allPermissions=c,this.originalPermissions=c,this.filteredPermissions=c,this.initializePermissions(),this.setExistingPermissions(this.role.permissions)})}initializePermissions(){this.allPermissions.forEach(()=>this.permissions.push(this.fb.control(!1)))}get permissions(){return this.rolesForm.get("permissions")}setExistingPermissions(t){t.forEach(r=>{const i=this.allPermissions.findIndex(n=>n.id===r.id);-1!==i&&(this.permissions.at(i).setValue(!0),this.selectedPrivilegeIds.push(r.id))})}onCheckboxChange(t){const r=this.rolesForm.get("permissions"),i=Number(t.source.value),n=this.allPermissions.findIndex(l=>l.id===i);-1!==n&&(t.source.checked?(r.at(n).setValue(!0),this.selectedPrivilegeIds.push(i)):(r.at(n).setValue(!1),this.selectedPrivilegeIds=this.selectedPrivilegeIds.filter(l=>l!==i)))}returnRole(){this.router.navigateByUrl("/usermanagement/roles")}getRoleDetails(){const t=this.encryptionService.generateAesKey(),r=this.encryptionService.generatebase64Key(t),i=this.encryptionService.encryptWithRSA(r);this.roleService.getRoleById(this.roleId,i).subscribe(n=>{const l=JSON.parse(n);this.role=this.encryptionService.decryptData(l?.body,r),this.role&&(this.getpermissions(),this.rolesForm.patchValue({name:this.role?.name||"",createdBy:this.role?.createdBy||"",createdOn:this.role?.createdOn||"",checkedBy:this.role?.checkedBy||"",checkedOn:this.role?.checkedOn||"",status:"Active"==this.role.status,validityStatus:"Pending"==this.role.validityStatus}))},n=>{console.error("Error fetching role details:",n)})}toggleStatus(t){this.rolesForm.get("status")?.setValue(t.checked)}searchPermissions(){const t=this.rolesForm.value.searchKey.trim();this.filteredPermissions=""===t?this.allPermissions:this.originalPermissions.filter(r=>r.name.toLowerCase().includes(t.toLowerCase())),this.filteredPermissions.forEach((r,i)=>{const l=this.selectedPrivilegeIds.includes(r.id);this.permissions.at(i).setValue(l)})}onSubmit(){if(this.rolesForm.valid){const t={id:this.role.id,name:this.rolesForm.value.name,status:this.rolesForm.value.status,userName:this.localStorage.get("user-entity")?.username,organization:this.localStorage.get("user-entity")?.organization?.id,permissions:this.selectedPrivilegeIds},r=this.encryptionService.encryptData(t),i=r.split(":")[0],n=r.split(":")[1],l=r.split(":")[2];this.roleService.updateRole(n,i).subscribe(c=>{const u=JSON.parse(c);if(200==u.code||201==u.code){const p=this.encryptionService.decryptData(u.body,l);p&&(this.toaster.showSuccess(p?.message),this.returnRole())}else this.toaster.showError(u?.body?.message)})}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.uw),e.Y36(w),e.Y36(A.w),e.Y36(y.gz),e.Y36(a.qu),e.Y36(T._A),e.Y36(b.sK),e.Y36(y.F0),e.Y36(F.M),e.Y36(q.n2))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-manage-role-details"]],features:[e._Bn([w])],decls:52,vars:5,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","16px"],[2,"font-size","24px","margin-bottom","4px","font-family","'Inter', sans-serif","color","#304254"],[2,"font-weight","normal","opacity","0.6","margin-top","0","padding","0"],[1,"form-field-full",3,"formGroup"],["fxFlex","50","fxFlex.lt-sm","100"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex","90","fxFlex.lt-sm","100"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","placeholder","Role Name","formControlName","name","required","",2,"font-size","16px"],[4,"ngIf"],["appearance","outline",2,"width","50%"],["matInput","","readonly","","placeholder","Created By","formControlName","createdBy",2,"font-size","16px"],["matInput","","readonly","","placeholder","Created On","formControlName","createdOn",2,"font-size","16px"],["matInput","","readonly","","placeholder","Checked By","formControlName","checkedBy",2,"font-size","16px"],["matInput","","readonly","","placeholder","Checked On","formControlName","checkedOn",2,"font-size","16px"],["appearence","outline","formControlName","status",2,"font-size","16px","padding-top","20px","padding-bottom","20px",3,"checked","change"],["fxLayout","row","fxLayoutGap","16px","fxFlex","100","fxFlex.lt-sm","100"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","font-size","18px","height","40px",3,"click"],["mat-raised-button","",2,"background-color","#74C84D","color","white","font-size","18px","height","40px",3,"disabled","click"],[2,"width","80%"],["matPrefix",""],["matInput","","formControlName","searchKey","name","searchKey","placeholder","Search ..."],["mat-raised-button","",2,"width","20%","background-color","#b60f20","color","white","font-size","14px",3,"click"],["formArrayName","permissions",2,"overflow","auto","max-height","300px"],[4,"ngFor","ngForOf"],[3,"value","checked","change"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title",3),e._uU(4," Manage Role "),e.qZA(),e.TgZ(5,"h6",4),e._uU(6,"Activate/Deactivate/Edit Role"),e.qZA(),e.TgZ(7,"form",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"mat-form-field",9)(12,"mat-label",10),e._uU(13,"Role Name"),e.qZA(),e._UZ(14,"input",11),e.YNc(15,it,3,3,"mat-error",12),e.qZA(),e.TgZ(16,"mat-form-field",13)(17,"mat-label",10),e._uU(18,"Created By"),e.qZA(),e._UZ(19,"input",14),e.qZA(),e.TgZ(20,"mat-form-field",13)(21,"mat-label",10),e._uU(22,"Created On"),e.qZA(),e._UZ(23,"input",15),e.qZA(),e.TgZ(24,"mat-form-field",13)(25,"mat-label",10),e._uU(26,"Checked By"),e.qZA(),e._UZ(27,"input",16),e.qZA(),e.TgZ(28,"mat-form-field",13)(29,"mat-label",10),e._uU(30,"Checked On"),e.qZA(),e._UZ(31,"input",17),e.qZA(),e.TgZ(32,"mat-checkbox",18),e.NdJ("change",function(n){return r.toggleStatus(n)}),e._uU(33," Activate/Deactivate "),e.qZA()(),e.TgZ(34,"div",19)(35,"button",20),e.NdJ("click",function(){return r.returnRole()}),e.TgZ(36,"mat-icon"),e._uU(37,"arrow_back"),e.qZA(),e._uU(38," Back "),e.qZA(),e.TgZ(39,"button",21),e.NdJ("click",function(){return r.onSubmit()}),e._uU(40," Submit "),e.qZA()()()(),e.TgZ(41,"div",6)(42,"mat-form-field",22)(43,"mat-label",10),e._uU(44,"Search Permission"),e.qZA(),e.TgZ(45,"mat-icon",23),e._uU(46,"search"),e.qZA(),e._UZ(47,"input",24),e.qZA(),e.TgZ(48,"button",25),e.NdJ("click",function(){return r.searchPermissions()}),e._uU(49,"Search"),e.qZA(),e.TgZ(50,"div",26),e.YNc(51,nt,3,3,"div",27),e.qZA()()()()()()),2&t){let i,n,l;e.xp6(7),e.Q6J("formGroup",r.rolesForm),e.xp6(8),e.Q6J("ngIf",null==(i=r.rolesForm.get("name"))?null:i.invalid),e.xp6(17),e.Q6J("checked",null==(n=r.rolesForm.get("status"))?null:n.value),e.xp6(7),e.Q6J("disabled",null==(l=r.rolesForm.get("validityStatus"))?null:l.value),e.xp6(12),e.Q6J("ngForOf",r.filteredPermissions)}},dependencies:[v.sg,v.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,a.CE,C.lW,f.a8,f.n5,D.oG,m.TO,m.KE,m.hX,m.qo,x.Hw,k.Nt,g.xw,g.SQ,g.yH,b.X$]}),o})();var P=U(14261);const at=["actionTemplate"],st=["statusTemplate"];function lt(o,s){if(1&o&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function ct(o,s){if(1&o&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function ut(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",19)(1,"mat-icon"),e._uU(2,"more_horiz"),e.qZA()(),e.TgZ(3,"mat-menu",null,20)(5,"button",21),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.viewDetailedRecord(n))}),e.TgZ(6,"mat-icon"),e._uU(7,"edit"),e.qZA(),e._uU(8," Edit "),e.qZA()()}if(2&o){const t=e.MAs(4);e.Q6J("matMenuTriggerFor",t)}}function pt(o,s){if(1&o&&(e.TgZ(0,"span",22),e._uU(1),e.qZA()),2&o){const t=s.$implicit,r=e.oxw();e.Q6J("ngStyle",r.getStatusColor(t.status)),e.xp6(1),e.hij(" ",t.status," ")}}const dt=function(){return[5,10,20,50,100]};let ie=(()=>{class o{constructor(t,r,i,n,l,c,u){this.remoteSrv=t,this.organizationService=r,this.cdr=i,this.encryptionservice=n,this.router=l,this.translate=c,this.dialog=u,this.columns=[],this.list=[],this.selectedOrganization=0,this.filters=[],this.selectedFilter="",this.total=0,this.isLoading=!0,this.query={q:"",sort:"",order:"",page:0,per_page:10}}ngAfterViewInit(){this.columns=[{header:"First Name",field:"firstName"},{header:"Last Name",field:"otherNames"},{header:"Phone Nuber",field:"phoneNumber"},{header:"Email",field:"emailAddress"},{header:"Gender",field:"gender"},{header:"User Name",field:"username"},{header:"Status",field:"status",cellTemplate:this.statusTemplate},{header:this.translate.stream("table_kitchen_sink.actions"),field:"actions",cellTemplate:this.actionTemplate}]}get params(){const t=Object.assign({},this.query);return t.page+=1,t}ngOnInit(){this.getUsers(),this.getOrganizations()}getStatusColor(t){switch(t){case"Active":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Inactive":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}getOrganizations(){const t=this.encryptionservice.generateAesKey(),r=this.encryptionservice.generatebase64Key(t),i=this.encryptionservice.encryptWithRSA(r);this.organizationService.allOrganizations(i).subscribe(n=>{const l=JSON.parse(n),c=this.encryptionservice.decryptData(l?.body,r);this.organizations=c},n=>{console.error("Error fetching organizations:",n)})}onOrgChange(t){this.selectedOrganization=t.value,this.getUsers()}getUsers(){const r=this.encryptionservice.encryptData({status:this.selectedFilter,page:this.query.page,size:this.query.per_page,organization:this.selectedOrganization});this.remoteSrv.getAdminUsers(r.split(":")[0],r.split(":")[1]).subscribe(i=>{const n=JSON.parse(i),l=this.encryptionservice.decryptData(n?.body,r.split(":")[2]);this.list=l.data.content,this.total=l.data.total,this.filters=l.statuses,this.isLoading=!1,this.cdr.detectChanges()},i=>{console.error("Error fetching user accounts:",i)})}create(){this.router.navigateByUrl("/usermanagement/create-country-admin")}viewDetailedRecord(t){var r=t?.id;r&&this.router.navigate(["/usermanagement/manage-admin",r])}getNextPage(t){this.query.page=t.pageIndex,this.query.per_page=t.pageSize,this.getUsers()}search(){this.query.page=0,this.getUsers()}openBulkUsersUploadComponent(){this.router.navigateByUrl("/usermanagement/country-admin-bulk")}onFilterChange(t){this.selectedFilter=t.value,"Country"!=this.selectedFilter&&this.getUsers()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z.K),e.Y36(P.w),e.Y36(e.sBO),e.Y36(A.w),e.Y36(y.F0),e.Y36(b.sK),e.Y36(h.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-country-admins-list"]],viewQuery:function(t,r){if(1&t&&(e.Gf(at,7),e.Gf(st,7)),2&t){let i;e.iGM(i=e.CRH())&&(r.actionTemplate=i.first),e.iGM(i=e.CRH())&&(r.statusTemplate=i.first)}},features:[e._Bn([Z.K,M.K])],decls:33,vars:15,consts:[[2,"border","1px solid #ccc","padding","16px"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"col"],[2,"margin","0"],[1,"d-flex","justify-content-between","w-100","flex-wrap"],["fxFlex","33.33%","fxFlex.lt-sm","100%",1,"px-2"],["appearance","outline",2,"width","100%"],["name","selectedFilter",3,"ngModel","ngModelChange","selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["fxFlex","39.34%","fxFlex.lt-sm","100%",1,"d-flex","justify-content-between","align-items-center","px-2"],["name","selectedCountry",3,"ngModel","ngModelChange","selectionChange"],["fxFlex","27.33%","fxFlex.lt-sm","100%",1,"px-2"],["matPrefix",""],["matInput","","name","q","placeholder","Search",3,"ngModel","ngModelChange"],[3,"data","columns","length","loading","rowStriped","pageOnFront","pageIndex","pageSize","pageSizeOptions","rowClick","page"],["actionTemplate",""],["statusTemplate",""],[3,"value"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[3,"ngStyle"]],template:function(t,r){1&t&&(e.TgZ(0,"div")(1,"mat-card",0)(2,"div",1)(3,"div",2)(4,"h2",3),e._uU(5,"Administrators"),e.qZA()()()(),e.TgZ(6,"div",4)(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),e._uU(10,"Status"),e.qZA(),e.TgZ(11,"mat-select",7),e.NdJ("ngModelChange",function(n){return r.selectedFilter=n})("selectionChange",function(n){return r.onFilterChange(n)}),e.TgZ(12,"mat-option",8),e._uU(13,"-- Select --"),e.qZA(),e.YNc(14,lt,2,2,"mat-option",9),e.qZA()()(),e.TgZ(15,"div",10)(16,"mat-form-field",6)(17,"mat-label"),e._uU(18,"Select Organization"),e.qZA(),e.TgZ(19,"mat-select",11),e.NdJ("ngModelChange",function(n){return r.selectedOrganization=n})("selectionChange",function(n){return r.onOrgChange(n)}),e.TgZ(20,"mat-option",8),e._uU(21,"-- Select --"),e.qZA(),e.YNc(22,ct,2,2,"mat-option",9),e.qZA()()(),e.TgZ(23,"div",12)(24,"mat-form-field",6)(25,"mat-icon",13),e._uU(26,"search"),e.qZA(),e.TgZ(27,"input",14),e.NdJ("ngModelChange",function(n){return r.query.q=n}),e.qZA()()()(),e.TgZ(28,"mtx-grid",15),e.NdJ("rowClick",function(n){return r.viewDetailedRecord(n)})("page",function(n){return r.getNextPage(n)}),e.qZA(),e.YNc(29,ut,9,1,"ng-template",null,16,e.W1O),e.YNc(31,pt,2,2,"ng-template",null,17,e.W1O),e.qZA()),2&t&&(e.xp6(11),e.Q6J("ngModel",r.selectedFilter),e.xp6(3),e.Q6J("ngForOf",r.filters),e.xp6(5),e.Q6J("ngModel",r.selectedOrganization),e.xp6(3),e.Q6J("ngForOf",r.organizations),e.xp6(5),e.Q6J("ngModel",r.query.q),e.xp6(1),e.Q6J("data",r.list)("columns",r.columns)("length",r.total)("loading",r.isLoading)("rowStriped",!0)("pageOnFront",!1)("pageIndex",r.query.page)("pageSize",r.query.per_page)("pageSizeOptions",e.DdM(14,dt)))},dependencies:[v.sg,v.PC,a.Fj,a.JJ,a.On,T.ey,C.lW,f.a8,m.KE,m.hX,m.qo,x.Hw,k.Nt,N.VK,N.OP,N.p6,I.gD,O.CM,g.yH,J.Zl],styles:["[_nghost-%COMP%]     .mtx-grid{height:500px}.mtx-grid[_ngcontent-%COMP%]{box-shadow:0 4px 12px #902f2766;border-radius:8px;padding:16px}.mtx-grid[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-collapse:collapse}.mtx-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#902f271a}.mtx-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}.mtx-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:2px solid rgba(144,47,39,.3)}.mtx-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.status-true[_ngcontent-%COMP%]{color:red;font-weight:700}.status-false[_ngcontent-%COMP%]{color:green;font-weight:700}"]}),o})();function mt(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function gt(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function ht(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function ft(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function _t(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function yt(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function Zt(o,s){if(1&o&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function vt(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function bt(o,s){if(1&o&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function xt(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}let ne=(()=>{class o{constructor(t,r,i,n,l,c,u,p,d){this.fb=t,this.dateAdapter=r,this.translate=i,this.router=n,this.encryptionService=l,this.toaster=c,this.userService=u,this.countriesService=p,this.storageService=d,this.form=this.fb.nonNullable.group({firstName:["",[a.kI.required,a.kI.maxLength(50)]],otherNames:["",[a.kI.required,a.kI.maxLength(100)]],emailAddress:["",[a.kI.required,a.kI.email]],username:["",[a.kI.required,a.kI.maxLength(30)]],phoneNumber:["",[a.kI.required,a.kI.pattern("^[0-9]{10}$")]],gender:["",a.kI.required],adminName:[""],organization:[0,a.kI.required],country:[0,a.kI.required],role:[0,a.kI.required]})}ngOnInit(){this.getCountries(),this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)})}ngOnDestroy(){this.translateSubscription.unsubscribe()}getCountries(){const t=this.encryptionService.generateAesKey(),r=this.encryptionService.generatebase64Key(t),i=this.encryptionService.encryptWithRSA(r);this.countriesService.allCountries(i).subscribe(n=>{const l=JSON.parse(n),c=this.encryptionService.decryptData(l?.body,r);this.countries=c},n=>{console.error("Error fetching countries:",n)})}onCountryChange(t){this.getOrganizations(t.value)}getOrganizations(t){const r=this.encryptionService.generateAesKey(),i=this.encryptionService.generatebase64Key(r),n=this.encryptionService.encryptWithRSA(i);this.countriesService.allOrganizationsByCountry(n,t).subscribe(l=>{const c=JSON.parse(l),u=this.encryptionService.decryptData(c?.body,i);this.regions=u},l=>{console.error("Error fetching organizations:",l)})}return(){this.router.navigateByUrl("/usermanagement/adminusers")}create(){const t=this.storageService.get("user-entity"),r=this.form.value,n=this.encryptionService.encryptData({firstName:r?.firstName,otherNames:r?.otherNames,emailAddress:r?.emailAddress,username:r?.username,phoneNumber:r?.phoneNumber,gender:r?.gender,adminName:t?.username,roles:[r?.role],branch:0,accountType:0,organization:r?.organization}),l=n.split(":")[0],c=n.split(":")[1],u=n.split(":")[2];this.userService.addAdminUser(c,l).subscribe(p=>{const d=JSON.parse(p);if(200==d.code||201==d.code){const _=this.encryptionService.decryptData(d.body,u);_&&(this.toaster.showSuccess(_?.message),this.return())}else this.toaster.showError(d?.body?.message)},p=>{const d=JSON.parse(p.error),R=JSON.parse(d?.body)?.message;this.toaster.showError(R)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.qu),e.Y36(T._A),e.Y36(b.sK),e.Y36(y.F0),e.Y36(A.w),e.Y36(F.M),e.Y36(Z.K),e.Y36(M.K),e.Y36(q.n2))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-country-admin"]],features:[e._Bn([Z.K,L,M.K,w])],decls:76,vars:12,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","24px","border","2px solid #304254","border-radius","8px"],[2,"font-size","24px","margin-bottom","4px","font-family","'Inter', sans-serif","color","#304254"],[2,"font-weight","normal","opacity","0.6","margin-top","0","padding","0"],[1,"form-field-full",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex","33.33","fxFlex.lt-sm","100"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","placeholder","First Name","formControlName","firstName","required","",2,"font-size","16px"],[4,"ngIf"],["matInput","","placeholder","Other Names","formControlName","otherNames","required","",2,"font-size","16px"],["matInput","","placeholder","User Name","formControlName","username","required","",2,"font-size","16px"],["matInput","","placeholder","Phone number","formControlName","phoneNumber","required","",2,"font-size","16px"],["matInput","","type","email","placeholder","Email","formControlName","emailAddress","required","",2,"font-size","16px"],["required","","formControlName","gender",2,"font-size","16px"],["value","Male"],["value","Female"],["required","","formControlName","country",2,"font-size","16px",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["required","","formControlName","organization",2,"font-size","16px"],[1,"d-flex","justify-content-between","flex-wrap",2,"margin-top","24px"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","font-size","14px","margin-right","10px",3,"click"],["mat-raised-button","",2,"background-color","#74C84D","color","white","font-size","14px","margin-right","10px",3,"disabled","click"],[3,"value"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title",3),e._uU(4," Add New Administrator "),e.qZA(),e.TgZ(5,"h6",4),e._uU(6,"Add New Admin"),e.qZA(),e.TgZ(7,"form",5)(8,"div",6)(9,"div",7)(10,"mat-form-field",8)(11,"mat-label",9),e._uU(12,"First Name"),e.qZA(),e._UZ(13,"input",10),e.YNc(14,mt,3,3,"mat-error",11),e.qZA()(),e.TgZ(15,"div",7)(16,"mat-form-field",8)(17,"mat-label",9),e._uU(18,"Other Names"),e.qZA(),e._UZ(19,"input",12),e.YNc(20,gt,3,3,"mat-error",11),e.qZA()(),e.TgZ(21,"div",7)(22,"mat-form-field",8)(23,"mat-label",9),e._uU(24,"User Name"),e.qZA(),e._UZ(25,"input",13),e.YNc(26,ht,3,3,"mat-error",11),e.qZA()(),e.TgZ(27,"div",7)(28,"mat-form-field",8)(29,"mat-label",9),e._uU(30,"Phone Number"),e.qZA(),e._UZ(31,"input",14),e.YNc(32,ft,3,3,"mat-error",11),e.qZA()(),e.TgZ(33,"div",7)(34,"mat-form-field",8)(35,"mat-label",9),e._uU(36,"Email"),e.qZA(),e._UZ(37,"input",15),e.YNc(38,_t,3,3,"mat-error",11),e.qZA()(),e.TgZ(39,"div",7)(40,"mat-form-field",8)(41,"mat-label",9),e._uU(42,"Gender"),e.qZA(),e.TgZ(43,"mat-select",16)(44,"mat-option"),e._uU(45,"-- Select --"),e.qZA(),e.TgZ(46,"mat-option",17),e._uU(47,"Male"),e.qZA(),e.TgZ(48,"mat-option",18),e._uU(49,"Female"),e.qZA()(),e.YNc(50,yt,3,3,"mat-error",11),e.qZA()(),e.TgZ(51,"div",7)(52,"mat-form-field",8)(53,"mat-label",9),e._uU(54,"Select Country"),e.qZA(),e.TgZ(55,"mat-select",19),e.NdJ("selectionChange",function(n){return r.onCountryChange(n)}),e.TgZ(56,"mat-option"),e._uU(57,"-- Select --"),e.qZA(),e.YNc(58,Zt,2,2,"mat-option",20),e.qZA(),e.YNc(59,vt,3,3,"mat-error",11),e.qZA()(),e.TgZ(60,"div",7)(61,"mat-form-field",8)(62,"mat-label",9),e._uU(63,"Select Organization"),e.qZA(),e.TgZ(64,"mat-select",21)(65,"mat-option"),e._uU(66,"-- Select --"),e.qZA(),e.YNc(67,bt,2,2,"mat-option",20),e.qZA(),e.YNc(68,xt,3,3,"mat-error",11),e.qZA()()(),e.TgZ(69,"div",22)(70,"button",23),e.NdJ("click",function(){return r.return()}),e.TgZ(71,"mat-icon"),e._uU(72,"arrow_back"),e.qZA(),e._uU(73," Back "),e.qZA(),e.TgZ(74,"button",24),e.NdJ("click",function(){return r.create()}),e._uU(75," Submit "),e.qZA()()()()()()),2&t){let i,n,l,c,u,p,d,_;e.xp6(7),e.Q6J("formGroup",r.form),e.xp6(7),e.Q6J("ngIf",null==(i=r.form.get("firstName"))?null:i.invalid),e.xp6(6),e.Q6J("ngIf",null==(n=r.form.get("otherNames"))?null:n.invalid),e.xp6(6),e.Q6J("ngIf",null==(l=r.form.get("username"))?null:l.invalid),e.xp6(6),e.Q6J("ngIf",null==(c=r.form.get("phoneNumber"))?null:c.invalid),e.xp6(6),e.Q6J("ngIf",null==(u=r.form.get("emailAddress"))?null:u.invalid),e.xp6(12),e.Q6J("ngIf",null==(p=r.form.get("gender"))?null:p.invalid),e.xp6(8),e.Q6J("ngForOf",r.countries),e.xp6(1),e.Q6J("ngIf",null==(d=r.form.get("country"))?null:d.invalid),e.xp6(8),e.Q6J("ngForOf",r.regions),e.xp6(1),e.Q6J("ngIf",null==(_=r.form.get("organization"))?null:_.invalid),e.xp6(6),e.Q6J("disabled",r.form.invalid)}},dependencies:[v.sg,v.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,T.ey,C.lW,f.a8,f.n5,m.TO,m.KE,m.hX,x.Hw,k.Nt,I.gD,g.xw,g.SQ,g.yH,b.X$]}),o})();function At(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function Ct(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function qt(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function Ut(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function Tt(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function wt(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}let ae=(()=>{class o{constructor(t,r,i,n,l,c,u,p,d,_){this.userService=t,this.encryptionService=r,this.route=i,this.fb=n,this.dateAdapter=l,this.translate=c,this.router=u,this.toaster=p,this.dialog=d,this.localStorage=_,this.isLoading=!0,this.userForm=this.fb.nonNullable.group({firstName:["",[a.kI.required,a.kI.maxLength(50)]],otherNames:["",[a.kI.required,a.kI.maxLength(100)]],emailAddress:["",[a.kI.required,a.kI.email]],username:["",[a.kI.required,a.kI.maxLength(30)]],phoneNumber:["",[a.kI.required,a.kI.pattern("^[0-9]{10}$")]],gender:["",a.kI.required],userId:[""],createdBy:[""],createdOn:[],role:[""],status:[""],userType:[""],country:[""],organization:[""],acctStatus:[!1]})}ngOnDestroy(){this.translateSubscription.unsubscribe()}ngOnInit(){this.userId=this.route.snapshot.paramMap.get("id"),this.getUserProfile(),this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)})}getUserProfile(){const t=this.encryptionService.generateAesKey(),r=this.encryptionService.generatebase64Key(t),i=this.encryptionService.encryptWithRSA(r);this.userService.getUserProfile(this.userId,i).subscribe(n=>{const l=JSON.parse(n);this.profile=this.encryptionService.decryptData(l?.body,r),this.profile&&this.userForm.patchValue({firstName:this.profile?.firstName||"",otherNames:this.profile?.otherNames||"",emailAddress:this.profile?.emailAddress||"",username:this.profile?.username||"",phoneNumber:this.profile?.phoneNumber||"",gender:this.profile?.gender||"",createdBy:this.profile?.createdBy||"",createdOn:this.profile?.createdOn||"",userId:this.profile?.userId||"",userType:this.profile?.accountType?.name||"",role:this.profile?.roles[0]?.name,status:this.profile?.status,country:this.profile?.organization?.country?.name,organization:this.profile?.organization?.name,acctStatus:"Active"===this.profile?.status}),this.isLoading=!1},n=>{console.error("Error fetching user profile:",n),this.isLoading=!1})}toggleAcctStatus(t){this.userForm.get("acctStatus")?.setValue(t.checked)}update(){var t=this.localStorage.get("user-entity");const i=this.encryptionService.encryptData({firstName:this.userForm.value.firstName,otherNames:this.userForm.value.otherNames,modifiedBy:t?.username,phoneNumber:this.userForm.value.phoneNumber,emailAddress:this.userForm.value.emailAddress,gender:this.userForm.value.gender,userId:this.profile?.id,id:this.profile?.id,acctStatus:this.userForm.value.acctStatus,country:0}),n=i.split(":")[0],l=i.split(":")[1],c=i.split(":")[2];this.userService.adminUpdateUserDetails(l,n).subscribe(u=>{const p=JSON.parse(u);if(200==p.code||201==p.code){const d=this.encryptionService.decryptData(p.body,c);d&&(this.toaster.showSuccess(d?.message),this.return())}else this.toaster.showError(p?.body?.message)})}return(){this.router.navigateByUrl("/usermanagement/adminusers")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z.K),e.Y36(A.w),e.Y36(y.gz),e.Y36(a.qu),e.Y36(T._A),e.Y36(b.sK),e.Y36(y.F0),e.Y36(F.M),e.Y36(h.uw),e.Y36(q.n2))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-manage-country-admin"]],features:[e._Bn([Z.K])],decls:98,vars:8,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","24px","border","2px solid #304254","border-radius","8px"],[2,"font-size","24px","margin-bottom","4px","font-family","'Inter', sans-serif","color","#304254"],[2,"font-weight","normal","opacity","0.6","margin-top","0","padding","0"],[1,"form-field-full",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex","33.33","fxFlex.lt-sm","100"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","placeholder","First Name","formControlName","firstName","required","",2,"font-size","16px"],[4,"ngIf"],["matInput","","placeholder","Other Name","formControlName","otherNames","required","",2,"font-size","16px"],["matInput","","placeholder","Phone number","formControlName","phoneNumber","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","User Name","formControlName","username","required","",2,"font-size","16px"],["matInput","","placeholder","Email","formControlName","emailAddress","required","",2,"font-size","16px"],["required","","formControlName","gender",2,"font-size","16px"],["value","Male"],["value","Female"],["readonly","","matInput","","placeholder","User Id","formControlName","userId","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Created By","formControlName","createdBy","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Date Created","formControlName","createdOn","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Country","formControlName","country","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Organization","formControlName","organization","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","User Account Type","formControlName","userType","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Role","formControlName","role","required","",2,"font-size","16px"],["appearence","outline","formControlName","acctStatus",2,"font-size","16px","padding-top","20px","padding-bottom","20px",3,"checked","change"],[1,"d-flex","justify-content-between","flex-wrap",2,"margin-top","24px"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","font-size","14px","margin-right","10px",3,"click"],["mat-raised-button","",2,"background-color","#74C84D","color","white","font-size","14px","margin-right","10px",3,"click"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title",3),e._uU(4," Activate/Deactivate Administrators "),e.qZA(),e.TgZ(5,"h3",4),e._uU(6,"Edit and Manage Admin"),e.qZA(),e.TgZ(7,"form",5)(8,"div",6)(9,"div",7)(10,"mat-form-field",8)(11,"mat-label",9),e._uU(12,"First Name"),e.qZA(),e._UZ(13,"input",10),e.YNc(14,At,3,3,"mat-error",11),e.qZA()(),e.TgZ(15,"div",7)(16,"mat-form-field",8)(17,"mat-label",9),e._uU(18,"Other Name"),e.qZA(),e._UZ(19,"input",12),e.YNc(20,Ct,3,3,"mat-error",11),e.qZA()(),e.TgZ(21,"div",7)(22,"mat-form-field",8)(23,"mat-label",9),e._uU(24,"Phone Number"),e.qZA(),e._UZ(25,"input",13),e.YNc(26,qt,3,3,"mat-error",11),e.qZA()(),e.TgZ(27,"div",7)(28,"mat-form-field",8)(29,"mat-label",9),e._uU(30,"User Name"),e.qZA(),e._UZ(31,"input",14),e.YNc(32,Ut,3,3,"mat-error",11),e.qZA()(),e.TgZ(33,"div",7)(34,"mat-form-field",8)(35,"mat-label",9),e._uU(36,"Email"),e.qZA(),e._UZ(37,"input",15),e.YNc(38,Tt,3,3,"mat-error",11),e.qZA()(),e.TgZ(39,"div",7)(40,"mat-form-field",8)(41,"mat-label",9),e._uU(42,"Gender"),e.qZA(),e.TgZ(43,"mat-select",16)(44,"mat-option"),e._uU(45,"-- Select --"),e.qZA(),e.TgZ(46,"mat-option",17),e._uU(47,"Male"),e.qZA(),e.TgZ(48,"mat-option",18),e._uU(49,"Female"),e.qZA()(),e.YNc(50,wt,3,3,"mat-error",11),e.qZA()(),e.TgZ(51,"div",7)(52,"mat-form-field",8)(53,"mat-label",9),e._uU(54,"System Generated User Id"),e.qZA(),e._UZ(55,"input",19),e.qZA()(),e.TgZ(56,"div",7)(57,"mat-form-field",8)(58,"mat-label",9),e._uU(59,"Created By"),e.qZA(),e._UZ(60,"input",20),e.qZA()(),e.TgZ(61,"div",7)(62,"mat-form-field",8)(63,"mat-label",9),e._uU(64,"Date Created"),e.qZA(),e._UZ(65,"input",21),e.qZA()(),e.TgZ(66,"div",7)(67,"mat-form-field",8)(68,"mat-label",9),e._uU(69,"Country"),e.qZA(),e._UZ(70,"input",22),e.qZA()(),e.TgZ(71,"div",7)(72,"mat-form-field",8)(73,"mat-label",9),e._uU(74,"Organization"),e.qZA(),e._UZ(75,"input",23),e.qZA()(),e.TgZ(76,"div",7)(77,"mat-form-field",8)(78,"mat-label",9),e._uU(79,"User Account Type"),e.qZA(),e._UZ(80,"input",24),e.qZA()(),e.TgZ(81,"div",7)(82,"mat-form-field",8)(83,"mat-label",9),e._uU(84,"Role"),e.qZA(),e._UZ(85,"input",25),e.qZA()(),e.TgZ(86,"div",7)(87,"mat-checkbox",26),e.NdJ("change",function(n){return r.toggleAcctStatus(n)}),e._uU(88," Activate/Deactivate "),e.qZA()()(),e.TgZ(89,"div",27)(90,"button",28),e.NdJ("click",function(){return r.return()}),e.TgZ(91,"mat-icon"),e._uU(92,"arrow_back"),e.qZA(),e._uU(93," Back "),e.qZA(),e.TgZ(94,"button",29),e.NdJ("click",function(){return r.update()}),e.TgZ(95,"mat-icon"),e._uU(96,"edit"),e.qZA(),e._uU(97," Update "),e.qZA()()()()()()),2&t){let i,n,l,c,u,p,d;e.xp6(7),e.Q6J("formGroup",r.userForm),e.xp6(7),e.Q6J("ngIf",null==(i=r.userForm.get("firstName"))?null:i.invalid),e.xp6(6),e.Q6J("ngIf",null==(n=r.userForm.get("otherNames"))?null:n.invalid),e.xp6(6),e.Q6J("ngIf",null==(l=r.userForm.get("phoneNumber"))?null:l.invalid),e.xp6(6),e.Q6J("ngIf",null==(c=r.userForm.get("username"))?null:c.invalid),e.xp6(6),e.Q6J("ngIf",null==(u=r.userForm.get("emailAddress"))?null:u.invalid),e.xp6(12),e.Q6J("ngIf",null==(p=r.userForm.get("gender"))?null:p.invalid),e.xp6(37),e.Q6J("checked",null==(d=r.userForm.get("acctStatus"))?null:d.value)}},dependencies:[v.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,T.ey,C.lW,f.a8,f.n5,D.oG,m.TO,m.KE,m.hX,x.Hw,k.Nt,I.gD,g.xw,g.SQ,g.yH,b.X$]}),o})(),kt=(()=>{class o{constructor(t,r,i,n,l,c,u){this.data=t,this.dialogRef=r,this.router=i,this.localStorage=n,this.rolesService=l,this.encryptionService=c,this.toaster=u}ngOnInit(){}onReview(){this.dialogRef.close("review"),this.router.navigate(["/usermanagement/review-role",this.data?.id])}onApprove(){const t={recordId:this.data.id,checkerName:this.localStorage.get("user-entity")?.username,remarks:"",approve:!0},r=this.encryptionService.encryptData(t),i=r.split(":")[0],n=r.split(":")[1],l=r.split(":")[2];this.rolesService.approveRejectRole(n,i).subscribe(c=>{const u=JSON.parse(c);if(200==u.code||201==u.code){const p=this.encryptionService.decryptData(u?.body,l);p&&(this.toaster.showSuccess(p?.message),this.dialogRef.close("approve"))}else this.toaster.showError(u?.body?.message)})}onClose(){this.dialogRef.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.WI),e.Y36(h.so),e.Y36(y.F0),e.Y36(q.n2),e.Y36(w),e.Y36(A.w),e.Y36(F.M))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-approve-role"]],features:[e._Bn([w])],decls:23,vars:1,consts:[["mat-dialog-title","",2,"display","flex","justify-content","space-between","align-items","center"],[2,"flex","1","font-size","20px"],["mat-icon-button","","aria-label","Close dialog",2,"margin","0",3,"click"],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-stroked-button","","color","warn",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2,"Approve Role"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return r.onClose()}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA()()(),e.TgZ(6,"div",3)(7,"p"),e._uU(8,"Are you sure you want to Approve "),e.TgZ(9,"strong"),e._uU(10),e.qZA(),e._uU(11,"? Click "),e.TgZ(12,"strong"),e._uU(13,"Approve Role"),e.qZA(),e._uU(14," to Approve or "),e.TgZ(15,"strong"),e._uU(16,"Review Role"),e.qZA(),e._uU(17," to view role details. "),e.qZA()(),e.TgZ(18,"div",4)(19,"button",5),e.NdJ("click",function(){return r.onReview()}),e._uU(20,"Review Role"),e.qZA(),e.TgZ(21,"button",6),e.NdJ("click",function(){return r.onApprove()}),e._uU(22,"Approve Role"),e.qZA()()),2&t&&(e.xp6(10),e.Oqu(r.data.name))},dependencies:[C.lW,h.uh,h.xY,h.H8,x.Hw]}),o})();function St(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}let Nt=(()=>{class o{constructor(t,r,i,n,l,c,u,p){this.data=t,this.dialogRef=r,this.fb=i,this.router=n,this.localStorage=l,this.rolesService=c,this.encryptionService=u,this.toaster=p,this.rolesForm=this.fb.group({remarks:["",a.kI.required]})}ngOnInit(){}onReview(){this.dialogRef.close("review"),this.router.navigate(["/usermanagement/review-role",this.data?.id])}onClose(){this.dialogRef.close()}onSubmit(){const t={recordId:this.data.id,checkerName:this.localStorage.get("user-entity")?.username,remarks:this.rolesForm.value.remarks,approve:!1},r=this.encryptionService.encryptData(t),i=r.split(":")[0],n=r.split(":")[1],l=r.split(":")[2];this.rolesService.approveRejectRole(n,i).subscribe(c=>{const u=JSON.parse(c);if(200==u.code||201==u.code){const p=this.encryptionService.decryptData(u?.body,l);p&&(this.toaster.showSuccess(p?.message),this.dialogRef.close("reject"))}else this.toaster.showError(u?.body?.message)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.WI),e.Y36(h.so),e.Y36(a.qu),e.Y36(y.F0),e.Y36(q.n2),e.Y36(w),e.Y36(A.w),e.Y36(F.M))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-reject-role"]],features:[e._Bn([w])],decls:32,vars:3,consts:[["mat-dialog-title","",2,"display","flex","justify-content","space-between","align-items","center"],[2,"flex","1","font-size","20px"],["mat-icon-button","","aria-label","Close dialog",2,"margin","0",3,"click"],["mat-dialog-content",""],[1,"form-field-full",3,"formGroup"],["fxFlex","100","fxFlex.lt-sm","100"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","placeholder","Remarks","formControlName","remarks","required","",2,"font-size","16px"],[4,"ngIf"],["mat-dialog-actions",""],["mat-stroked-button","","color","warn",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2,"Reject Role"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return r.onClose()}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA()()(),e.TgZ(6,"div",3)(7,"p"),e._uU(8,"Are you sure you want to Reject "),e.TgZ(9,"strong"),e._uU(10),e.qZA(),e._uU(11,"? Enter Remarks below and Click "),e.TgZ(12,"strong"),e._uU(13,"Reject Role"),e.qZA(),e._uU(14," to Approve or "),e.TgZ(15,"strong"),e._uU(16,"Review Role"),e.qZA(),e._uU(17," to view role details. "),e.qZA(),e.TgZ(18,"form",4)(19,"div",5)(20,"div",6)(21,"div",5)(22,"mat-form-field",7)(23,"mat-label",8),e._uU(24,"Remarks"),e.qZA(),e._UZ(25,"textarea",9),e.YNc(26,St,3,3,"mat-error",10),e.qZA()()()()()(),e.TgZ(27,"div",11)(28,"button",12),e.NdJ("click",function(){return r.onReview()}),e._uU(29,"Review Role"),e.qZA(),e.TgZ(30,"button",13),e.NdJ("click",function(){return r.onSubmit()}),e._uU(31,"Reject Role"),e.qZA()()),2&t){let i;e.xp6(10),e.Oqu(r.data.name),e.xp6(8),e.Q6J("formGroup",r.rolesForm),e.xp6(8),e.Q6J("ngIf",null==(i=r.rolesForm.get("remarks"))?null:i.invalid)}},dependencies:[v.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,C.lW,h.uh,h.xY,h.H8,m.TO,m.KE,m.hX,x.Hw,k.Nt,g.xw,g.SQ,g.yH,b.X$]}),o})();const Ft=["actionTemplate"],Rt=["statusTemplate"],It=["validityStatusTemplate"];function Ot(o,s){if(1&o&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Mt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",18)(1,"mat-icon"),e._uU(2,"more_horiz"),e.qZA()(),e.TgZ(3,"mat-menu",null,19)(5,"button",20),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.viewDetailedRecord(n))}),e.TgZ(6,"mat-icon",21),e._uU(7,"visibility"),e.qZA(),e._uU(8," View "),e.qZA(),e.TgZ(9,"button",22),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.openApproveDialog(n))}),e.TgZ(10,"mat-icon",23),e._uU(11,"check_circle"),e.qZA(),e._uU(12," Approve "),e.qZA(),e.TgZ(13,"button",22),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.openRejectDialog(n))}),e.TgZ(14,"mat-icon",24),e._uU(15,"block"),e.qZA(),e._uU(16," Reject "),e.qZA()()}if(2&o){const t=s.$implicit,r=e.MAs(4),i=e.oxw();e.Q6J("matMenuTriggerFor",r),e.xp6(9),e.Q6J("disabled",t.createdBy===i.username||"Approved"===t.validityStatus),e.xp6(4),e.Q6J("disabled",t.createdBy===i.username||"Approved"===t.validityStatus)}}function zt(o,s){if(1&o&&(e.TgZ(0,"span",25),e._uU(1),e.qZA()),2&o){const t=s.$implicit,r=e.oxw();e.Q6J("ngStyle",r.getStatusColor(t.status)),e.xp6(1),e.hij(" ",t.status," ")}}function Jt(o,s){if(1&o&&(e.TgZ(0,"span",25),e._uU(1),e.qZA()),2&o){const t=s.$implicit,r=e.oxw();e.Q6J("ngStyle",r.getValidityStatusColor(t.validityStatus)),e.xp6(1),e.hij(" ",t.validityStatus," ")}}const Dt=function(){return[5,10,20,50,100]};let Yt=(()=>{class o{constructor(t,r,i,n,l,c,u,p){this.remoteSrv=t,this.cdr=r,this.encryptionservice=i,this.router=n,this.translate=l,this.dialog=c,this.diag1=u,this.localStorage=p,this.columns=[],this.filters=[],this.selectedFilter="",this.list=[],this.total=0,this.isLoading=!0,this.query={q:"",sort:"",order:"",page:0,per_page:10}}ngAfterViewInit(){this.columns=[{header:"Role Name",field:"name"},{header:"Created Date",field:"createdOn"},{header:"Created By",field:"createdBy"},{header:"Validity Status",field:"validityStatus",cellTemplate:this.validityStatusTemplate},{header:"Status",field:"status",cellTemplate:this.statusTemplate},{header:this.translate.stream("table_kitchen_sink.actions"),field:"actions",cellTemplate:this.actionTemplate}]}getStatusColor(t){switch(t){case"Active":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Inactive":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}getValidityStatusColor(t){switch(t){case"Pending":return{color:"goldenrod","background-color":"#FFF8E1","border-radius":"12px",padding:"4px 8px"};case"Approved":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Disapproved":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};case"Returned":return{color:"blue","background-color":"#E6F4FD","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}get params(){const t=Object.assign({},this.query);return t.page+=1,t}ngOnInit(){this.getRoles()}getRoles(){const t=this.localStorage.get("user-entity");this.username=t?.username;const r=t?.organization?.id,n=this.encryptionservice.encryptData({status:this.selectedFilter,page:this.query.page,size:this.query.per_page,organization:r}),l=n.split(":")[2],c=n.split(":")[1],u=n.split(":")[0];this.remoteSrv.getRolesReviewList(u,c).subscribe(p=>{const d=JSON.parse(p),_=this.encryptionservice.decryptData(d?.body,l);this.list=_.data.content,this.total=_.data.total,this.filters=_.validityStatuses,this.isLoading=!1,this.cdr.detectChanges()},p=>{console.error("Error fetching roles:",p),this.isLoading=!1})}viewDetailedRecord(t){var r=t?.id;r&&this.router.navigate(["/usermanagement/review-role",r])}getNextPage(t){this.query.page=t.pageIndex,this.query.per_page=t.pageSize,this.getRoles()}search(){this.query.page=0,this.getRoles()}onFilterChange(t){this.selectedFilter=t.value,this.getRoles()}openApproveDialog(t){this.dialog.open(kt,{width:"400px",data:t}).afterClosed().subscribe(()=>{this.getRoles()})}openRejectDialog(t){this.dialog.open(Nt,{width:"400px",data:t}).afterClosed().subscribe(()=>{this.getRoles()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(w),e.Y36(e.sBO),e.Y36(A.w),e.Y36(y.F0),e.Y36(b.sK),e.Y36(h.uw),e.Y36(Y.cP),e.Y36(q.n2))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-roles-review-list"]],viewQuery:function(t,r){if(1&t&&(e.Gf(Ft,7),e.Gf(Rt,7),e.Gf(It,7)),2&t){let i;e.iGM(i=e.CRH())&&(r.actionTemplate=i.first),e.iGM(i=e.CRH())&&(r.statusTemplate=i.first),e.iGM(i=e.CRH())&&(r.validityStatusTemplate=i.first)}},features:[e._Bn([w])],decls:25,vars:13,consts:[[2,"border","1px solid #ccc","padding","16px"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"col"],[2,"margin","0"],[1,"d-flex","justify-content-between","w-100","flex-wrap"],["fxFlex","33.33%","fxFlex.lt-sm","100%",1,"px-2"],["appearance","outline",2,"width","100%"],["name","selectedFilter",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","39.34%","fxFlex.lt-sm","100%",1,"d-flex","justify-content-between","align-items-center","px-2"],["fxFlex","27.33%","fxFlex.lt-sm","100%",1,"px-2"],["matPrefix",""],["matInput","","name","q","placeholder","Search",3,"ngModel","ngModelChange"],[3,"data","columns","length","loading","rowStriped","pageOnFront","pageIndex","pageSize","pageSizeOptions","page"],["actionTemplate",""],["statusTemplate",""],["validityStatusTemplate",""],[3,"value"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["color","primary"],["mat-menu-item","",3,"disabled","click"],["color","accent"],["color","warn"],[3,"ngStyle"]],template:function(t,r){1&t&&(e.TgZ(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Roles Approval"),e.qZA()()()(),e.TgZ(5,"div",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),e._uU(9,"Select Filter"),e.qZA(),e.TgZ(10,"mat-select",7),e.NdJ("ngModelChange",function(n){return r.selectedFilter=n})("selectionChange",function(n){return r.onFilterChange(n)}),e.YNc(11,Ot,2,2,"mat-option",8),e.qZA()()(),e._UZ(12,"div",9),e.TgZ(13,"div",10)(14,"mat-form-field",6)(15,"mat-icon",11),e._uU(16,"search"),e.qZA(),e.TgZ(17,"input",12),e.NdJ("ngModelChange",function(n){return r.query.q=n}),e.qZA()()()(),e.TgZ(18,"mtx-grid",13),e.NdJ("page",function(n){return r.getNextPage(n)}),e.qZA(),e.YNc(19,Mt,17,3,"ng-template",null,14,e.W1O),e.YNc(21,zt,2,2,"ng-template",null,15,e.W1O),e.YNc(23,Jt,2,2,"ng-template",null,16,e.W1O)),2&t&&(e.xp6(10),e.Q6J("ngModel",r.selectedFilter),e.xp6(1),e.Q6J("ngForOf",r.filters),e.xp6(6),e.Q6J("ngModel",r.query.q),e.xp6(1),e.Q6J("data",r.list)("columns",r.columns)("length",r.total)("loading",r.isLoading)("rowStriped",!0)("pageOnFront",!1)("pageIndex",r.query.page)("pageSize",r.query.per_page)("pageSizeOptions",e.DdM(12,Dt)))},dependencies:[v.sg,v.PC,a.Fj,a.JJ,a.On,T.ey,C.lW,f.a8,m.KE,m.hX,m.qo,x.Hw,k.Nt,N.VK,N.OP,N.p6,I.gD,O.CM,g.yH,J.Zl]}),o})();function Lt(o,s){if(1&o&&(e.TgZ(0,"div")(1,"mat-checkbox",22),e._uU(2),e.qZA()()),2&o){const t=s.$implicit,r=s.index,i=e.oxw();e.xp6(1),e.Q6J("value",t.id)("checked",i.permissions.at(r).value),e.xp6(1),e.hij(" ",t.name," ")}}let Pt=(()=>{class o{constructor(t,r,i,n,l,c,u){this.roleService=t,this.encryptionService=r,this.route=i,this.fb=n,this.dateAdapter=l,this.translate=c,this.router=u,this.selectedPrivilegeIds=[],this.rolesForm=this.fb.group({name:[""],createdBy:[""],status:[""],createdOn:[""],checkedBy:[""],checkedOn:[""],permissions:this.fb.array([])})}ngOnDestroy(){this.translateSubscription.unsubscribe()}ngOnInit(){this.roleId=this.route.snapshot.paramMap.get("id"),this.getRoleDetails(),this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)})}initializePermissions(){this.allPermissions.forEach(()=>this.permissions.push(this.fb.control(!0)))}get permissions(){return this.rolesForm.get("permissions")}setExistingPermissions(t){t.forEach(r=>{const i=this.allPermissions.findIndex(n=>n.id===r.id);-1!==i&&(this.permissions.at(i).setValue(!0),this.selectedPrivilegeIds.push(r.id))})}returnRole(){this.router.navigateByUrl("/usermanagement/roles-review")}getRoleDetails(){const t=this.encryptionService.generateAesKey(),r=this.encryptionService.generatebase64Key(t),i=this.encryptionService.encryptWithRSA(r);this.roleService.getRoleById(this.roleId,i).subscribe(n=>{const l=JSON.parse(n);this.role=this.encryptionService.decryptData(l?.body,r),this.role&&(this.rolesForm.patchValue({name:this.role?.name||"",createdBy:this.role?.createdBy||"",createdOn:this.role?.createdOn||"",checkedBy:this.role?.checkedBy||"",checkedOn:this.role?.checkedOn||"",status:this.role.validityStatus}),this.allPermissions=this.role.permissions,this.initializePermissions(),this.setExistingPermissions(this.allPermissions))},n=>{console.error("Error fetching role details:",n)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(w),e.Y36(A.w),e.Y36(y.gz),e.Y36(a.qu),e.Y36(T._A),e.Y36(b.sK),e.Y36(y.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-view-role-details"]],features:[e._Bn([w])],decls:45,vars:2,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","16px"],[2,"font-size","24px","margin-bottom","4px","font-family","'Inter', sans-serif","color","#304254"],[2,"font-weight","normal","opacity","0.6","margin-top","0","padding","0"],[1,"form-field-full",3,"formGroup"],["fxFlex","50","fxFlex.lt-sm","100"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex","90","fxFlex.lt-sm","100"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","readonly","","placeholder","Role Name","formControlName","name","required","",2,"font-size","16px"],["appearance","outline",2,"width","50%"],["matInput","","readonly","","placeholder","Created By","formControlName","createdBy","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Created On","formControlName","createdOn","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Checked By","formControlName","checkedBy","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Checked On","formControlName","checkedOn","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Role Status","formControlName","status","required","",2,"font-size","16px"],["fxLayout","row","fxLayoutGap","16px","fxFlex","100","fxFlex.lt-sm","100"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","font-size","18px","height","40px",3,"click"],["formArrayName","permissions",2,"overflow","auto","max-height","400px"],[4,"ngFor","ngForOf"],[3,"value","checked"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title",3),e._uU(4," Review Role Details "),e.qZA(),e.TgZ(5,"h6",4),e._uU(6,"Review Role Details"),e.qZA(),e.TgZ(7,"form",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"mat-form-field",9)(12,"mat-label",10),e._uU(13,"Role Name"),e.qZA(),e._UZ(14,"input",11),e.qZA(),e.TgZ(15,"mat-form-field",12)(16,"mat-label",10),e._uU(17,"Created By"),e.qZA(),e._UZ(18,"input",13),e.qZA(),e.TgZ(19,"mat-form-field",12)(20,"mat-label",10),e._uU(21,"Created On"),e.qZA(),e._UZ(22,"input",14),e.qZA(),e.TgZ(23,"mat-form-field",12)(24,"mat-label",10),e._uU(25,"Checked By"),e.qZA(),e._UZ(26,"input",15),e.qZA(),e.TgZ(27,"mat-form-field",12)(28,"mat-label",10),e._uU(29,"Checked On"),e.qZA(),e._UZ(30,"input",16),e.qZA(),e.TgZ(31,"mat-form-field",9)(32,"mat-label",10),e._uU(33,"Role Status"),e.qZA(),e._UZ(34,"input",17),e.qZA()(),e.TgZ(35,"div",18)(36,"button",19),e.NdJ("click",function(){return r.returnRole()}),e.TgZ(37,"mat-icon"),e._uU(38,"arrow_back"),e.qZA(),e._uU(39," Back "),e.qZA()()()(),e.TgZ(40,"div",6)(41,"div",20)(42,"h3"),e._uU(43,"Role Permissions:"),e.qZA(),e.YNc(44,Lt,3,3,"div",21),e.qZA()()()()()()),2&t&&(e.xp6(7),e.Q6J("formGroup",r.rolesForm),e.xp6(37),e.Q6J("ngForOf",r.allPermissions))},dependencies:[v.sg,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,a.CE,C.lW,f.a8,f.n5,D.oG,m.KE,m.hX,x.Hw,k.Nt,g.xw,g.SQ,g.yH]}),o})(),Bt=(()=>{class o{constructor(t,r,i,n,l,c,u){this.data=t,this.dialogRef=r,this.router=i,this.localStorage=n,this.rolesService=l,this.encryptionService=c,this.toaster=u}ngOnInit(){}onReview(){this.dialogRef.close("review"),this.router.navigate(["/usermanagement/view-role-modifications",this.data?.id])}onApprove(){const t={recordId:this.data.id,checkerName:this.localStorage.get("user-entity")?.username,remarks:"",approve:!0},r=this.encryptionService.encryptData(t),i=r.split(":")[0],n=r.split(":")[1],l=r.split(":")[2];this.rolesService.approveRejectRoleEdit(n,i).subscribe(c=>{const u=JSON.parse(c);if(200==u.code||201==u.code){const p=this.encryptionService.decryptData(u?.body,l);p&&(this.toaster.showSuccess(p?.message),this.dialogRef.close("approve"))}else this.toaster.showError(u?.body?.message)})}onClose(){this.dialogRef.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.WI),e.Y36(h.so),e.Y36(y.F0),e.Y36(q.n2),e.Y36(w),e.Y36(A.w),e.Y36(F.M))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-approve-role-modifications"]],features:[e._Bn([w])],decls:23,vars:1,consts:[["mat-dialog-title","",2,"display","flex","justify-content","space-between","align-items","center"],[2,"flex","1","font-size","20px"],["mat-icon-button","","aria-label","Close dialog",2,"margin","0",3,"click"],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-stroked-button","","color","warn",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2,"Approve Role Modifications"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return r.onClose()}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA()()(),e.TgZ(6,"div",3)(7,"p"),e._uU(8,"Are you sure you want to Approve "),e.TgZ(9,"strong"),e._uU(10),e.qZA(),e._uU(11," modifications? Click "),e.TgZ(12,"strong"),e._uU(13,"Approve Role"),e.qZA(),e._uU(14," to Approve or "),e.TgZ(15,"strong"),e._uU(16,"Review Role"),e.qZA(),e._uU(17," to view role details. "),e.qZA()(),e.TgZ(18,"div",4)(19,"button",5),e.NdJ("click",function(){return r.onReview()}),e._uU(20,"Review Role"),e.qZA(),e.TgZ(21,"button",6),e.NdJ("click",function(){return r.onApprove()}),e._uU(22,"Approve Changes"),e.qZA()()),2&t&&(e.xp6(10),e.Oqu(r.data.name))},dependencies:[C.lW,h.uh,h.xY,h.H8,x.Hw]}),o})();function jt(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}let Kt=(()=>{class o{constructor(t,r,i,n,l,c,u,p){this.data=t,this.dialogRef=r,this.fb=i,this.router=n,this.localStorage=l,this.rolesService=c,this.encryptionService=u,this.toaster=p,this.rolesForm=this.fb.group({remarks:["",a.kI.required]})}ngOnInit(){}onReview(){this.dialogRef.close("review"),this.router.navigate(["/usermanagement/view-role-modifications",this.data?.id])}onClose(){this.dialogRef.close()}onSubmit(){const t={recordId:this.data.id,checkerName:this.localStorage.get("user-entity")?.username,remarks:this.rolesForm.value.remarks,approve:!1},r=this.encryptionService.encryptData(t),i=r.split(":")[0],n=r.split(":")[1],l=r.split(":")[2];this.rolesService.approveRejectRoleEdit(n,i).subscribe(c=>{const u=JSON.parse(c);if(200==u.code||201==u.code){const p=this.encryptionService.decryptData(u?.body,l);p&&(this.toaster.showSuccess(p?.message),this.dialogRef.close("reject"))}else this.toaster.showError(u?.body?.message)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.WI),e.Y36(h.so),e.Y36(a.qu),e.Y36(y.F0),e.Y36(q.n2),e.Y36(w),e.Y36(A.w),e.Y36(F.M))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-reject-role-modifications"]],features:[e._Bn([w])],decls:32,vars:3,consts:[["mat-dialog-title","",2,"display","flex","justify-content","space-between","align-items","center"],[2,"flex","1","font-size","20px"],["mat-icon-button","","aria-label","Close dialog",2,"margin","0",3,"click"],["mat-dialog-content",""],[1,"form-field-full",3,"formGroup"],["fxFlex","100","fxFlex.lt-sm","100"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","placeholder","Remarks","formControlName","remarks","required","",2,"font-size","16px"],[4,"ngIf"],["mat-dialog-actions",""],["mat-stroked-button","","color","warn",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2,"Reject Role Modifications"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return r.onClose()}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA()()(),e.TgZ(6,"div",3)(7,"p"),e._uU(8,"Are you sure you want to Reject "),e.TgZ(9,"strong"),e._uU(10),e.qZA(),e._uU(11," modifications ? Enter Remarks below and Click "),e.TgZ(12,"strong"),e._uU(13,"Reject Role"),e.qZA(),e._uU(14," to Approve or "),e.TgZ(15,"strong"),e._uU(16,"Review Role"),e.qZA(),e._uU(17," to view role details. "),e.qZA(),e.TgZ(18,"form",4)(19,"div",5)(20,"div",6)(21,"div",5)(22,"mat-form-field",7)(23,"mat-label",8),e._uU(24,"Remarks"),e.qZA(),e._UZ(25,"textarea",9),e.YNc(26,jt,3,3,"mat-error",10),e.qZA()()()()()(),e.TgZ(27,"div",11)(28,"button",12),e.NdJ("click",function(){return r.onReview()}),e._uU(29,"Review Role"),e.qZA(),e.TgZ(30,"button",13),e.NdJ("click",function(){return r.onSubmit()}),e._uU(31,"Reject Changes"),e.qZA()()),2&t){let i;e.xp6(10),e.Oqu(r.data.name),e.xp6(8),e.Q6J("formGroup",r.rolesForm),e.xp6(8),e.Q6J("ngIf",null==(i=r.rolesForm.get("remarks"))?null:i.invalid)}},dependencies:[v.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,C.lW,h.uh,h.xY,h.H8,m.TO,m.KE,m.hX,x.Hw,k.Nt,g.xw,g.SQ,g.yH,b.X$]}),o})();const Qt=["actionTemplate"],Et=["statusTemplate"],Gt=["changeStatusTemplate"];function Ht(o,s){if(1&o&&(e.TgZ(0,"mat-option",14),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}const Wt=function(){return[5,10,20,50,100]};let Vt=(()=>{class o{constructor(t,r,i,n,l,c,u,p){this.remoteSrv=t,this.cdr=r,this.encryptionservice=i,this.router=n,this.translate=l,this.dialog=c,this.diag1=u,this.localStorage=p,this.columns=[],this.filters=[],this.selectedFilter="",this.list=[],this.total=0,this.isLoading=!0,this.query={q:"",sort:"",order:"",page:0,per_page:10}}ngAfterViewInit(){this.columns=[{header:"Role Name",field:"name"},{header:"Modified On",field:"modifiedOn"},{header:"Modified By",field:"modifiedBy"},{header:"Status",field:"status"},{header:"Validity Status",field:"validityStatus"},{header:"Change Status",field:"changeStatus"},{header:this.translate.stream("table_kitchen_sink.actions"),field:"actions",pinned:"right",type:"button",buttons:[{type:"icon",icon:"visibility",color:"primary",tooltip:this.translate.stream("table_kitchen_sink.view_details"),click:t=>this.viewDetailedRecord(t)},{type:"icon",color:"accent",icon:"check_circle",tooltip:this.translate.stream("table_kitchen_sink.approve"),click:t=>this.openApproveDialog(t),disabled:t=>t.modifiedBy==this.username||"Approved"==t.changeStatus},{type:"icon",icon:"cancel",color:"warn",tooltip:this.translate.stream("table_kitchen_sink.reject"),click:t=>this.openRejectDialog(t),disabled:t=>t.modifiedBy==this.username||"Approved"==t.changeStatus}]}]}get params(){const t=Object.assign({},this.query);return t.page+=1,t}ngOnInit(){this.getRoles()}getStatusColor(t){switch(t){case"Active":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Inactive":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}getChangeStatusColor(t){switch(t){case"Pending":return{color:"goldenrod","background-color":"#FFF8E1","border-radius":"12px",padding:"4px 8px"};case"Approved":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Disapproved":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};case"Returned":return{color:"blue","background-color":"#E6F4FD","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}getRoles(){const t=this.localStorage.get("user-entity");this.username=t?.username;const r=t?.organization?.id,n=this.encryptionservice.encryptData({status:this.selectedFilter,page:this.query.page,size:this.query.per_page,organization:r}),l=n.split(":")[2],c=n.split(":")[1],u=n.split(":")[0];this.remoteSrv.getRolesModificationsReviewList(u,c).subscribe(p=>{const d=JSON.parse(p),_=this.encryptionservice.decryptData(d?.body,l);this.list=_.data.content,this.total=_.data.total,this.filters=_.changeStatuses,this.isLoading=!1,this.cdr.detectChanges()},p=>{console.error("Error fetching roles:",p),this.isLoading=!1})}viewDetailedRecord(t){var r=t?.id;r&&this.router.navigate(["/usermanagement/view-role-modifications",r])}getNextPage(t){this.query.page=t.pageIndex,this.query.per_page=t.pageSize,this.getRoles()}search(){this.query.page=0,this.getRoles()}onFilterChange(t){this.selectedFilter=t.value,this.getRoles()}openApproveDialog(t){this.dialog.open(Bt,{width:"400px",data:t}).afterClosed().subscribe(()=>{this.getRoles()})}openRejectDialog(t){this.dialog.open(Kt,{width:"400px",data:t}).afterClosed().subscribe(()=>{this.getRoles()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(w),e.Y36(e.sBO),e.Y36(A.w),e.Y36(y.F0),e.Y36(b.sK),e.Y36(h.uw),e.Y36(Y.cP),e.Y36(q.n2))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-roles-modifications-review-list"]],viewQuery:function(t,r){if(1&t&&(e.Gf(Qt,7),e.Gf(Et,7),e.Gf(Gt,7)),2&t){let i;e.iGM(i=e.CRH())&&(r.actionTemplate=i.first),e.iGM(i=e.CRH())&&(r.statusTemplate=i.first),e.iGM(i=e.CRH())&&(r.changeStatusTemplate=i.first)}},features:[e._Bn([w])],decls:19,vars:13,consts:[[2,"border","1px solid #ccc","padding","16px"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"col"],[2,"margin","0"],[1,"d-flex","justify-content-between","w-100","flex-wrap"],["fxFlex","33.33%","fxFlex.lt-sm","100%",1,"px-2"],["appearance","outline",2,"width","100%"],["name","selectedFilter",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","39.34%","fxFlex.lt-sm","100%",1,"d-flex","justify-content-between","align-items-center","px-2"],["fxFlex","27.33%","fxFlex.lt-sm","100%",1,"px-2"],["matPrefix",""],["matInput","","name","q","placeholder","Search",3,"ngModel","ngModelChange"],[3,"data","columns","length","loading","rowStriped","pageOnFront","pageIndex","pageSize","pageSizeOptions","page"],[3,"value"]],template:function(t,r){1&t&&(e.TgZ(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Roles Changes Management"),e.qZA()()()(),e.TgZ(5,"div",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),e._uU(9,"Select Filter"),e.qZA(),e.TgZ(10,"mat-select",7),e.NdJ("ngModelChange",function(n){return r.selectedFilter=n})("selectionChange",function(n){return r.onFilterChange(n)}),e.YNc(11,Ht,2,2,"mat-option",8),e.qZA()()(),e._UZ(12,"div",9),e.TgZ(13,"div",10)(14,"mat-form-field",6)(15,"mat-icon",11),e._uU(16,"search"),e.qZA(),e.TgZ(17,"input",12),e.NdJ("ngModelChange",function(n){return r.query.q=n}),e.qZA()()()(),e.TgZ(18,"mtx-grid",13),e.NdJ("page",function(n){return r.getNextPage(n)}),e.qZA()),2&t&&(e.xp6(10),e.Q6J("ngModel",r.selectedFilter),e.xp6(1),e.Q6J("ngForOf",r.filters),e.xp6(6),e.Q6J("ngModel",r.query.q),e.xp6(1),e.Q6J("data",r.list)("columns",r.columns)("length",r.total)("loading",r.isLoading)("rowStriped",!0)("pageOnFront",!1)("pageIndex",r.query.page)("pageSize",r.query.per_page)("pageSizeOptions",e.DdM(12,Wt)))},dependencies:[v.sg,a.Fj,a.JJ,a.On,T.ey,f.a8,m.KE,m.hX,m.qo,x.Hw,k.Nt,I.gD,O.CM,g.yH]}),o})();var B=U(3848);function $t(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function Xt(o,s){if(1&o&&(e.TgZ(0,"div")(1,"mat-checkbox",28),e._uU(2),e.qZA()()),2&o){const t=s.$implicit,r=s.index,i=e.oxw();e.xp6(1),e.Q6J("value",t.id)("checked",i.permissionsNew.at(r).value),e.xp6(1),e.hij(" ",t.name," ")}}function er(o,s){if(1&o&&(e.TgZ(0,"div")(1,"mat-checkbox",28),e._uU(2),e.qZA()()),2&o){const t=s.$implicit,r=s.index,i=e.oxw();e.xp6(1),e.Q6J("value",t.id)("checked",i.permissions.at(r).value),e.xp6(1),e.hij(" ",t.name," ")}}let tr=(()=>{class o{constructor(t,r,i,n,l,c,u){this.roleService=t,this.encryptionService=r,this.route=i,this.fb=n,this.dateAdapter=l,this.translate=c,this.router=u,this.oldSelectedPrivilegeIds=[],this.newSelectedPrivilegeIds=[],this.rolesForm=this.fb.group({name:[""],createdBy:[""],approvalStatus:[""],status:[""],createdOn:[""],checkedBy:[""],checkedOn:[""],modifiedBy:[""],modifiedOn:[""],permissions:this.fb.array([])}),this.oldRolesForm=this.fb.group({name:[""],createdBy:[""],approvalStatus:[""],status:[""],createdOn:[""],checkedBy:[""],checkedOn:[""],modifiedBy:[""],modifiedOn:[""],permissions:this.fb.array([])})}ngOnInit(){this.roleId=this.route.snapshot.paramMap.get("id"),this.getRoleDetails(),this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)})}ngOnDestroy(){this.translateSubscription&&this.translateSubscription.unsubscribe()}initializePermissions(){this.oldPermissions.forEach(()=>this.permissions.push(this.fb.control(!1))),this.newPermissions.forEach(()=>this.permissionsNew.push(this.fb.control(!1)))}get permissions(){return this.oldRolesForm.get("permissions")}get permissionsNew(){return this.rolesForm.get("permissions")}setExistingPermissions(t){t.forEach(r=>{const i=this.oldPermissions.findIndex(n=>n.id===r.id);-1!==i&&(this.permissions.at(i).setValue(!0),this.oldSelectedPrivilegeIds.push(r.id))})}setExistingNewPermissions(t){t.forEach(r=>{const i=this.newPermissions.findIndex(n=>n.id===r.id);-1!==i&&(this.permissionsNew.at(i).setValue(!0),this.newSelectedPrivilegeIds.push(r.id))})}returnRole(){this.router.navigateByUrl("/usermanagement/roles-modifications-review")}getRoleDetails(){const t=this.encryptionService.generateAesKey(),r=this.encryptionService.generatebase64Key(t),i=this.encryptionService.encryptWithRSA(r);this.roleService.getRoleById(this.roleId,i).subscribe(n=>{try{const l=JSON.parse(n);this.role=this.encryptionService.decryptData(l?.body,r),this.role&&(this.newRole=JSON.parse(this.role.changedValues),this.rolesForm.patchValue({name:this.newRole?.name||"",createdBy:this.newRole?.createdBy||"",createdOn:this.newRole?.createdOn||"",checkedBy:this.newRole?.checkedBy||"",checkedOn:this.newRole?.checkedOn||"",modifiedBy:this.newRole?.modifiedBy||"",modifiedOn:this.newRole?.modifiedOn||"",status:this.newRole?.status,approvalStatus:this.newRole?.changeStatus}),this.oldRolesForm.patchValue({name:this.role?.name||"",createdBy:this.role?.createdBy||"",createdOn:this.role?.createdOn||"",checkedBy:this.role?.checkedBy||"",checkedOn:this.role?.checkedOn||"",modifiedBy:this.role?.modifiedBy||"",modifiedOn:this.role?.modifiedOn||"",status:this.role?.status,approvalStatus:this.role?.changeStatus}),this.newPermissions=this.newRole.permissions,this.oldPermissions=this.role.permissions,this.initializePermissions(),this.setExistingPermissions(this.oldPermissions),this.setExistingNewPermissions(this.newPermissions))}catch(l){console.error("Error processing role details:",l)}},n=>{console.error("Error fetching role details:",n)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(w),e.Y36(A.w),e.Y36(y.gz),e.Y36(a.qu),e.Y36(T._A),e.Y36(b.sK),e.Y36(y.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-view-role-modifications-details"]],features:[e._Bn([w])],decls:115,vars:5,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","16px"],["label","New Role Details"],[2,"font-size","24px","margin-bottom","4px","margin-top","5px","font-family","'Inter', sans-serif","color","#304254"],[2,"font-weight","normal","opacity","0.6","margin-top","0","padding","0"],[1,"form-field-full",3,"formGroup"],["fxFlex","50","fxFlex.lt-sm","100"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex","90","fxFlex.lt-sm","100"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","readonly","","placeholder","Role Name","formControlName","name","required","",2,"font-size","16px"],[4,"ngIf"],["appearance","outline",2,"width","50%"],["matInput","","readonly","","placeholder","Created By","formControlName","createdBy","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Created On","formControlName","createdOn","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Checked By","formControlName","checkedBy","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Checked On","formControlName","checkedOn","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Modified By","formControlName","modifiedBy","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Modified On","formControlName","modifiedOn","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Role Status","formControlName","status","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Role Modifications Status","formControlName","approvalStatus","required","",2,"font-size","16px"],["fxLayout","row","fxLayoutGap","16px","fxFlex","100","fxFlex.lt-sm","100"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","font-size","18px","height","40px",3,"click"],["formArrayName","permissions",2,"overflow","auto","max-height","400px"],[4,"ngFor","ngForOf"],["label","Old Role Details"],[3,"value","checked"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-tab-group")(4,"mat-tab",3)(5,"mat-card-title",4),e._uU(6," Role Details After Modification "),e.qZA(),e.TgZ(7,"h6",5),e._uU(8," Review Role Modification Details "),e.qZA(),e.TgZ(9,"form",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"mat-form-field",10)(14,"mat-label",11),e._uU(15,"Role Name"),e.qZA(),e._UZ(16,"input",12),e.YNc(17,$t,3,3,"mat-error",13),e.qZA(),e.TgZ(18,"mat-form-field",14)(19,"mat-label",11),e._uU(20,"Created By"),e.qZA(),e._UZ(21,"input",15),e.qZA(),e.TgZ(22,"mat-form-field",14)(23,"mat-label",11),e._uU(24,"Created On"),e.qZA(),e._UZ(25,"input",16),e.qZA(),e.TgZ(26,"mat-form-field",14)(27,"mat-label",11),e._uU(28,"Checked By"),e.qZA(),e._UZ(29,"input",17),e.qZA(),e.TgZ(30,"mat-form-field",14)(31,"mat-label",11),e._uU(32,"Checked On"),e.qZA(),e._UZ(33,"input",18),e.qZA(),e.TgZ(34,"mat-form-field",14)(35,"mat-label",11),e._uU(36,"Modified By"),e.qZA(),e._UZ(37,"input",19),e.qZA(),e.TgZ(38,"mat-form-field",14)(39,"mat-label",11),e._uU(40,"Modified On"),e.qZA(),e._UZ(41,"input",20),e.qZA(),e.TgZ(42,"mat-form-field",14)(43,"mat-label",11),e._uU(44,"Role Status"),e.qZA(),e._UZ(45,"input",21),e.qZA(),e.TgZ(46,"mat-form-field",14)(47,"mat-label",11),e._uU(48,"Role Modifications Status"),e.qZA(),e._UZ(49,"input",22),e.qZA()(),e.TgZ(50,"div",23)(51,"button",24),e.NdJ("click",function(){return r.returnRole()}),e.TgZ(52,"mat-icon"),e._uU(53,"arrow_back"),e.qZA(),e._uU(54," Back "),e.qZA()()()(),e.TgZ(55,"div",7)(56,"div",25)(57,"h3"),e._uU(58,"Role Permissions:"),e.qZA(),e.YNc(59,Xt,3,3,"div",26),e.qZA()()()(),e.TgZ(60,"mat-tab",27)(61,"mat-card-title",4),e._uU(62," Role Details Before Modification "),e.qZA(),e.TgZ(63,"h6",5),e._uU(64," Review Role Modification Details "),e.qZA(),e.TgZ(65,"form",6)(66,"div",7)(67,"div",8)(68,"div",9)(69,"mat-form-field",10)(70,"mat-label",11),e._uU(71,"Role Name"),e.qZA(),e._UZ(72,"input",12),e.qZA(),e.TgZ(73,"mat-form-field",14)(74,"mat-label",11),e._uU(75,"Created By"),e.qZA(),e._UZ(76,"input",15),e.qZA(),e.TgZ(77,"mat-form-field",14)(78,"mat-label",11),e._uU(79,"Created On"),e.qZA(),e._UZ(80,"input",16),e.qZA(),e.TgZ(81,"mat-form-field",14)(82,"mat-label",11),e._uU(83,"Checked By"),e.qZA(),e._UZ(84,"input",17),e.qZA(),e.TgZ(85,"mat-form-field",14)(86,"mat-label",11),e._uU(87,"Checked On"),e.qZA(),e._UZ(88,"input",18),e.qZA(),e.TgZ(89,"mat-form-field",14)(90,"mat-label",11),e._uU(91,"Modified By"),e.qZA(),e._UZ(92,"input",19),e.qZA(),e.TgZ(93,"mat-form-field",14)(94,"mat-label",11),e._uU(95,"Modified On"),e.qZA(),e._UZ(96,"input",20),e.qZA(),e.TgZ(97,"mat-form-field",14)(98,"mat-label",11),e._uU(99,"Role Status"),e.qZA(),e._UZ(100,"input",21),e.qZA(),e.TgZ(101,"mat-form-field",14)(102,"mat-label",11),e._uU(103,"Role Modifications Status"),e.qZA(),e._UZ(104,"input",22),e.qZA()(),e.TgZ(105,"div",23)(106,"button",24),e.NdJ("click",function(){return r.returnRole()}),e.TgZ(107,"mat-icon"),e._uU(108,"arrow_back"),e.qZA(),e._uU(109," Back "),e.qZA()()()(),e.TgZ(110,"div",7)(111,"div",25)(112,"h3"),e._uU(113,"Role Permissions:"),e.qZA(),e.YNc(114,er,3,3,"div",26),e.qZA()()()()()()()()),2&t){let i;e.xp6(9),e.Q6J("formGroup",r.rolesForm),e.xp6(8),e.Q6J("ngIf",null==(i=r.rolesForm.get("name"))?null:i.invalid),e.xp6(42),e.Q6J("ngForOf",r.newPermissions),e.xp6(6),e.Q6J("formGroup",r.oldRolesForm),e.xp6(49),e.Q6J("ngForOf",r.oldPermissions)}},dependencies:[v.sg,v.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,a.CE,C.lW,f.a8,f.n5,D.oG,m.TO,m.KE,m.hX,x.Hw,k.Nt,B.SP,B.uX,g.xw,g.SQ,g.yH,b.X$]}),o})();const rr=["actionTemplate"],or=["statusTemplate"];function ir(o,s){if(1&o&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function nr(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",21)(1,"mat-icon"),e._uU(2,"more_horiz"),e.qZA()(),e.TgZ(3,"mat-menu",null,22)(5,"button",23),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.viewDetailedRecord(n))}),e.TgZ(6,"mat-icon"),e._uU(7,"edit"),e.qZA(),e._uU(8," Edit "),e.qZA()()}if(2&o){const t=s.$implicit,r=e.MAs(4);e.Q6J("matMenuTriggerFor",r),e.xp6(5),e.Q6J("disabled","Pending"===t.validityStatus)}}function ar(o,s){if(1&o&&(e.TgZ(0,"span",24),e._uU(1),e.qZA()),2&o){const t=s.$implicit,r=e.oxw();e.Q6J("ngStyle",r.getStatusColor(t.status)),e.xp6(1),e.hij(" ",t.status," ")}}const sr=function(){return[5,10,20,50,100]};let lr=(()=>{class o{constructor(t,r,i,n,l,c,u,p){this.remoteSrv=t,this.organizationService=r,this.localStorage=i,this.cdr=n,this.encryptionservice=l,this.router=c,this.translate=u,this.dialog=p,this.columns=[],this.list=[],this.selectedRegion=0,this.filters=[],this.selectedFilter="",this.total=0,this.isLoading=!0,this.query={q:"",sort:"",order:"",page:0,per_page:10}}ngAfterViewInit(){this.columns=[{header:this.translate.stream("users_table.first_name"),field:"firstName",width:"auto",resizable:!0},{header:this.translate.stream("users_table.last_name"),field:"otherNames",width:"auto",resizable:!0},{header:this.translate.stream("users_table.phone_number"),field:"phoneNumber",width:"auto",resizable:!0},{header:this.translate.stream("users_table.mail"),field:"emailAddress",width:"auto",resizable:!0},{header:this.translate.stream("accounts.user_type"),field:"accountType.name",width:"auto",resizable:!0},{header:this.translate.stream("users_table.gender"),field:"gender",width:"auto",resizable:!0},{header:this.translate.stream("users_table.user_name"),field:"username",width:"auto",resizable:!0},{header:this.translate.stream("users_table.status"),field:"status",width:"auto",resizable:!0,cellTemplate:this.statusTemplate},{header:this.translate.stream("table_kitchen_sink.actions"),field:"actions",cellTemplate:this.actionTemplate}]}getStatusColor(t){switch(t){case"Active":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Inactive":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}get params(){const t=Object.assign({},this.query);return t.page+=1,t}ngOnInit(){this.getUsers(),this.getRegions()}getRegions(){const t=this.encryptionservice.generateAesKey(),r=this.encryptionservice.generatebase64Key(t),i=this.encryptionservice.encryptWithRSA(r);this.organizationService.allOrganizations(i).subscribe(n=>{const l=JSON.parse(n),c=this.encryptionservice.decryptData(l?.body,r);this.regions=c},n=>{console.error("Error fetching regions:",n)})}onRegionChange(t){this.selectedRegion=t.value,this.getUsers()}getUsers(){const t=this.localStorage.get("user-entity");this.organization=t?.organization?.id;const i=this.encryptionservice.encryptData({status:this.selectedFilter,page:this.query.page,size:this.query.per_page,branch:0,accountType:0,organization:this.organization});this.remoteSrv.getCountryUsers(i.split(":")[0],i.split(":")[1]).subscribe(n=>{const l=JSON.parse(n),c=this.encryptionservice.decryptData(l?.body,i.split(":")[2]);this.list=c.data.content,this.total=c.data.total,this.filters=c.statuses,this.isLoading=!1,this.cdr.detectChanges()},n=>{console.error("Error fetching user accounts:",n)})}create(){this.router.navigateByUrl("/usermanagement/create-user-account")}viewDetailedRecord(t){var r=t?.id;r&&this.router.navigate(["/usermanagement/manage-user-account",r])}getNextPage(t){this.query.page=t.pageIndex,this.query.per_page=t.pageSize,this.getUsers()}search(){this.query.page=0,this.getUsers()}openBulkUsersUploadComponent(){this.router.navigateByUrl("/usermanagement/bulk-create-user-account")}onFilterChange(t){this.selectedFilter=t.value,"Country"!=this.selectedFilter&&this.getUsers()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z.K),e.Y36(P.w),e.Y36(q.n2),e.Y36(e.sBO),e.Y36(A.w),e.Y36(y.F0),e.Y36(b.sK),e.Y36(h.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-country-users-list"]],viewQuery:function(t,r){if(1&t&&(e.Gf(rr,7),e.Gf(or,7)),2&t){let i;e.iGM(i=e.CRH())&&(r.actionTemplate=i.first),e.iGM(i=e.CRH())&&(r.statusTemplate=i.first)}},features:[e._Bn([Z.K,M.K])],decls:35,vars:13,consts:[[2,"border","1px solid #ccc","padding","16px"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"col"],[2,"margin","0"],[1,"d-flex","flex-wrap","align-items-center"],["mat-raised-button","",2,"background-color","#74C84D","color","white","margin-right","8px",3,"click"],["mat-raised-button","",2,"background-color","#74C84D","color","white",3,"click"],[1,"d-flex","justify-content-between","w-100","flex-wrap"],["fxFlex","33.33%","fxFlex.lt-sm","100%",1,"px-2"],["appearance","outline",2,"width","100%"],["name","selectedFilter",3,"ngModel","ngModelChange","selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["fxFlex","39.34%","fxFlex.lt-sm","100%",1,"d-flex","justify-content-between","align-items-center","px-2"],["fxFlex","27.33%","fxFlex.lt-sm","100%",1,"px-2"],["matPrefix",""],["matInput","","name","q","placeholder","Search",3,"ngModel","ngModelChange"],[3,"data","columns","length","loading","rowStriped","pageOnFront","pageIndex","pageSize","pageSizeOptions","rowClick","page"],["actionTemplate",""],["statusTemplate",""],[3,"value"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"disabled","click"],[3,"ngStyle"]],template:function(t,r){1&t&&(e.TgZ(0,"div")(1,"mat-card",0)(2,"div",1)(3,"div",2)(4,"h2",3),e._uU(5,"User Accounts"),e.qZA()(),e.TgZ(6,"div",4)(7,"button",5),e.NdJ("click",function(){return r.openBulkUsersUploadComponent()}),e.TgZ(8,"mat-icon"),e._uU(9,"attachment"),e.qZA(),e._uU(10," Bulk Upload "),e.qZA(),e.TgZ(11,"button",6),e.NdJ("click",function(){return r.create()}),e.TgZ(12,"mat-icon"),e._uU(13,"add_circle"),e.qZA(),e._uU(14," User Account "),e.qZA()()()(),e.TgZ(15,"div",7)(16,"div",8)(17,"mat-form-field",9)(18,"mat-label"),e._uU(19,"Status"),e.qZA(),e.TgZ(20,"mat-select",10),e.NdJ("ngModelChange",function(n){return r.selectedFilter=n})("selectionChange",function(n){return r.onFilterChange(n)}),e.TgZ(21,"mat-option",11),e._uU(22,"-- Select --"),e.qZA(),e.YNc(23,ir,2,2,"mat-option",12),e.qZA()()(),e._UZ(24,"div",13),e.TgZ(25,"div",14)(26,"mat-form-field",9)(27,"mat-icon",15),e._uU(28,"search"),e.qZA(),e.TgZ(29,"input",16),e.NdJ("ngModelChange",function(n){return r.query.q=n}),e.qZA()()()(),e.TgZ(30,"mtx-grid",17),e.NdJ("rowClick",function(n){return r.viewDetailedRecord(n)})("page",function(n){return r.getNextPage(n)}),e.qZA(),e.YNc(31,nr,9,2,"ng-template",null,18,e.W1O),e.YNc(33,ar,2,2,"ng-template",null,19,e.W1O),e.qZA()),2&t&&(e.xp6(20),e.Q6J("ngModel",r.selectedFilter),e.xp6(3),e.Q6J("ngForOf",r.filters),e.xp6(6),e.Q6J("ngModel",r.query.q),e.xp6(1),e.Q6J("data",r.list)("columns",r.columns)("length",r.total)("loading",r.isLoading)("rowStriped",!0)("pageOnFront",!1)("pageIndex",r.query.page)("pageSize",r.query.per_page)("pageSizeOptions",e.DdM(12,sr)))},dependencies:[v.sg,v.PC,a.Fj,a.JJ,a.On,T.ey,C.lW,f.a8,m.KE,m.hX,m.qo,x.Hw,k.Nt,N.VK,N.OP,N.p6,I.gD,O.CM,g.yH,J.Zl]}),o})();function cr(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function ur(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function pr(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function dr(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function mr(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function gr(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function hr(o,s){if(1&o&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function fr(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function _r(o,s){if(1&o&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function yr(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function Zr(o,s){if(1&o&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function vr(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function br(o,s){if(1&o&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function xr(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}let Ar=(()=>{class o{constructor(t,r,i,n,l,c,u,p,d,_,R){this.fb=t,this.dateAdapter=r,this.translate=i,this.router=n,this.organizationService=l,this.encryptionService=c,this.toaster=u,this.userService=p,this.accountTypeService=d,this.rolesService=_,this.storageService=R,this.form=this.fb.group({firstName:["",[a.kI.required,a.kI.maxLength(50)]],otherNames:["",[a.kI.required,a.kI.maxLength(100)]],emailAddress:["",[a.kI.required,a.kI.email]],username:["",[a.kI.required,a.kI.maxLength(30)]],phoneNumber:["",[a.kI.required,a.kI.pattern("^[0-9]{10}$")]],gender:["",a.kI.required],adminName:[""],country:[0,a.kI.required],organization:[0,a.kI.required],branch:[0,a.kI.required],accountType:[0,a.kI.required],region:[0,a.kI.required],role:[0,a.kI.required]})}ngOnInit(){this.getRoles(),this.getRegions(),this.getUserTypes(),this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)})}ngOnDestroy(){this.translateSubscription.unsubscribe()}getRoles(){const t=this.storageService.get("user-entity");this.organization=t?.organization?.id;const r=this.encryptionService.generateAesKey(),i=this.encryptionService.generatebase64Key(r),n=this.encryptionService.encryptWithRSA(i);this.rolesService.allRolesForAdmin(n,this.organization).subscribe(l=>{const c=JSON.parse(l),u=this.encryptionService.decryptData(c?.body,i);this.roles=u})}getRegions(){const t=this.encryptionService.generateAesKey(),r=this.encryptionService.generatebase64Key(t),i=this.encryptionService.encryptWithRSA(r);this.organizationService.allRegionsByCountry(i,this.organization).subscribe(n=>{const l=JSON.parse(n),c=this.encryptionService.decryptData(l?.body,r);this.regions=c},n=>{console.error("Error fetching regions:",n)})}getUserTypes(){const t=this.encryptionService.generateAesKey(),r=this.encryptionService.generatebase64Key(t),i=this.encryptionService.encryptWithRSA(r);this.accountTypeService.allUserTypes(i).subscribe(n=>{const l=JSON.parse(n),c=this.encryptionService.decryptData(l?.body,r);this.userTypes=c,this.userTypes=c.filter(u=>"Superadmin"!==u.name&&"Agent"!==u.name&&"Admin"!==u.name&&"Country-Admin"!==u.name)},n=>{console.error("Error fetching user types:",n)})}onRegionChange(t){this.getBranches(t.value)}getBranches(t){const r=this.encryptionService.generateAesKey(),i=this.encryptionService.generatebase64Key(r),n=this.encryptionService.encryptWithRSA(i);this.organizationService.allBranchesByRegion(n,t).subscribe(l=>{const c=JSON.parse(l),u=this.encryptionService.decryptData(c?.body,i);this.branches=u},l=>{console.error("Error fetching branches:",l)})}return(){this.router.navigateByUrl("/usermanagement/country-users")}create1(){const t=this.storageService.get("user-entity"),r=this.form.value;if(this.form.invalid)return void this.toaster.showError("Please fill in all required fields.");const n=this.encryptionService.encryptData({firstName:r?.firstName,otherNames:r?.otherNames,emailAddress:r?.emailAddress,username:r?.username,phoneNumber:r?.phoneNumber,gender:r?.gender,adminName:t?.username,userId:r?.userId,roles:[r?.role],branch:r?.branch,region:r?.region,accountType:r?.accountType,organization:this.organization}),[l,c,u]=n.split(":");this.userService.createCountryUser(c,l).subscribe(p=>{const d=JSON.parse(p);if(200===d.code||201===d.code){const _=this.encryptionService.decryptData(d.body,u);_&&(this.toaster.showSuccess(_?.message),this.return())}else this.toaster.showError(d?.body?.message)},p=>{const d=JSON.parse(p.error),R=JSON.parse(d?.body)?.message;this.toaster.showError(R)})}create(){const t=this.storageService.get("user-entity"),r=this.form.value,n=this.encryptionService.encryptData({firstName:r?.firstName,otherNames:r?.otherNames,emailAddress:r?.emailAddress,username:r?.username,phoneNumber:r?.phoneNumber,gender:r?.gender,adminName:t?.username,userId:r?.userId,roles:[r?.role],branch:r?.branch,region:r?.region,accountType:r?.accountType,organization:this.organization}),l=n.split(":")[0],c=n.split(":")[1],u=n.split(":")[2];this.userService.createCountryUser(c,l).subscribe(p=>{const d=JSON.parse(p);if(200==d.code||201==d.code){const _=this.encryptionService.decryptData(d.body,u);_&&(this.toaster.showSuccess(_?.message),this.return())}else this.toaster.showError(d?.body?.message)},p=>{const d=JSON.parse(p.error),R=JSON.parse(d?.body)?.message;this.toaster.showError(R)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.qu),e.Y36(T._A),e.Y36(b.sK),e.Y36(y.F0),e.Y36(P.w),e.Y36(A.w),e.Y36(F.M),e.Y36(Z.K),e.Y36(L),e.Y36(w),e.Y36(q.n2))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-country-user-account"]],features:[e._Bn([Z.K,L,M.K,w])],decls:120,vars:94,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","24px","border","2px solid #304254","border-radius","8px"],[2,"font-size","24px","margin-bottom","4px","font-family","'Inter', sans-serif","color","#304254"],[2,"font-weight","normal","opacity","0.6","margin-top","0","padding","0"],[1,"form-field-full",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex","33.33","fxFlex.lt-sm","100"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","formControlName","firstName","required","",2,"font-size","16px",3,"placeholder"],[4,"ngIf"],["matInput","","formControlName","otherNames","required","",2,"font-size","16px",3,"placeholder"],["matInput","","formControlName","username","required","",2,"font-size","16px",3,"placeholder"],["matInput","","formControlName","phoneNumber","required","",2,"font-size","16px",3,"placeholder"],["matInput","","formControlName","emailAddress","required","",2,"font-size","16px",3,"placeholder"],["required","","formControlName","gender",2,"font-size","16px"],["value","Male"],["value","Female"],["required","","formControlName","role",2,"font-size","16px"],[3,"value",4,"ngFor","ngForOf"],["required","","formControlName","accountType",2,"font-size","16px"],["required","","formControlName","organization",2,"font-size","16px",3,"selectionChange"],["formControlName","branch","required","",2,"font-size","16px"],["value","","disabled",""],[1,"d-flex","justify-content-between","flex-wrap",2,"margin-top","24px"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","font-size","14px","margin-right","10px",3,"click"],["mat-raised-button","",2,"background-color","#74C84D","color","white","font-size","14px","margin-right","10px",3,"disabled","click"],[3,"value"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"h6",4),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label",9),e._uU(14),e.ALo(15,"translate"),e.qZA(),e._UZ(16,"input",10),e.ALo(17,"translate"),e.YNc(18,cr,3,3,"mat-error",11),e.qZA()(),e.TgZ(19,"div",7)(20,"mat-form-field",8)(21,"mat-label",9),e._uU(22),e.ALo(23,"translate"),e.qZA(),e._UZ(24,"input",12),e.ALo(25,"translate"),e.YNc(26,ur,3,3,"mat-error",11),e.qZA()(),e.TgZ(27,"div",7)(28,"mat-form-field",8)(29,"mat-label",9),e._uU(30),e.ALo(31,"translate"),e.qZA(),e._UZ(32,"input",13),e.ALo(33,"translate"),e.YNc(34,pr,3,3,"mat-error",11),e.qZA()(),e.TgZ(35,"div",7)(36,"mat-form-field",8)(37,"mat-label",9),e._uU(38),e.ALo(39,"translate"),e.qZA(),e._UZ(40,"input",14),e.ALo(41,"translate"),e.YNc(42,dr,3,3,"mat-error",11),e.qZA()(),e.TgZ(43,"div",7)(44,"mat-form-field",8)(45,"mat-label",9),e._uU(46),e.ALo(47,"translate"),e.qZA(),e._UZ(48,"input",15),e.ALo(49,"translate"),e.YNc(50,mr,3,3,"mat-error",11),e.qZA()(),e.TgZ(51,"div",7)(52,"mat-form-field",8)(53,"mat-label",9),e._uU(54),e.ALo(55,"translate"),e.qZA(),e.TgZ(56,"mat-select",16)(57,"mat-option"),e._uU(58),e.ALo(59,"translate"),e.qZA(),e.TgZ(60,"mat-option",17),e._uU(61),e.ALo(62,"translate"),e.qZA(),e.TgZ(63,"mat-option",18),e._uU(64),e.ALo(65,"translate"),e.qZA()(),e.YNc(66,gr,3,3,"mat-error",11),e.qZA()(),e.TgZ(67,"div",7)(68,"mat-form-field",8)(69,"mat-label",9),e._uU(70),e.ALo(71,"translate"),e.qZA(),e.TgZ(72,"mat-select",19)(73,"mat-option"),e._uU(74),e.ALo(75,"translate"),e.qZA(),e.YNc(76,hr,2,2,"mat-option",20),e.qZA(),e.YNc(77,fr,3,3,"mat-error",11),e.qZA()(),e.TgZ(78,"div",7)(79,"mat-form-field",8)(80,"mat-label",9),e._uU(81),e.ALo(82,"translate"),e.qZA(),e.TgZ(83,"mat-select",21)(84,"mat-option"),e._uU(85),e.ALo(86,"translate"),e.qZA(),e.YNc(87,_r,2,2,"mat-option",20),e.qZA(),e.YNc(88,yr,3,3,"mat-error",11),e.qZA()(),e.TgZ(89,"div",7)(90,"mat-form-field",8)(91,"mat-label",9),e._uU(92),e.ALo(93,"translate"),e.qZA(),e.TgZ(94,"mat-select",22),e.NdJ("selectionChange",function(n){return r.onRegionChange(n)}),e.TgZ(95,"mat-option"),e._uU(96),e.ALo(97,"translate"),e.qZA(),e.YNc(98,Zr,2,2,"mat-option",20),e.qZA(),e.YNc(99,vr,3,3,"mat-error",11),e.qZA()(),e.TgZ(100,"div",7)(101,"mat-form-field",8)(102,"mat-label",9),e._uU(103),e.ALo(104,"translate"),e.qZA(),e.TgZ(105,"mat-select",23)(106,"mat-option",24),e._uU(107),e.ALo(108,"translate"),e.qZA(),e.YNc(109,br,2,2,"mat-option",20),e.qZA(),e.YNc(110,xr,3,3,"mat-error",11),e.qZA()()(),e.TgZ(111,"div",25)(112,"button",26),e.NdJ("click",function(){return r.return()}),e.TgZ(113,"mat-icon"),e._uU(114,"arrow_back"),e.qZA(),e._uU(115),e.ALo(116,"translate"),e.qZA(),e.TgZ(117,"button",27),e.NdJ("click",function(){return r.create1()}),e._uU(118),e.ALo(119,"translate"),e.qZA()()()()()()),2&t){let i,n,l,c,u,p,d,_,R,z;e.xp6(4),e.hij(" ",e.lcZ(5,42,"translation.add_user_tittle")," "),e.xp6(3),e.Oqu(e.lcZ(8,44,"translation.add_user_subtittle")),e.xp6(2),e.Q6J("formGroup",r.form),e.xp6(5),e.Oqu(e.lcZ(15,46,"translation.firstName")),e.xp6(2),e.s9C("placeholder",e.lcZ(17,48,"translation.firstName")),e.xp6(2),e.Q6J("ngIf",null==(i=r.form.get("firstName"))?null:i.invalid),e.xp6(4),e.Oqu(e.lcZ(23,50,"translation.otherNames")),e.xp6(2),e.s9C("placeholder",e.lcZ(25,52,"translation.otherNames")),e.xp6(2),e.Q6J("ngIf",null==(n=r.form.get("otherNames"))?null:n.invalid),e.xp6(4),e.Oqu(e.lcZ(31,54,"translation.userName")),e.xp6(2),e.s9C("placeholder",e.lcZ(33,56,"translation.userName")),e.xp6(2),e.Q6J("ngIf",null==(l=r.form.get("username"))?null:l.invalid),e.xp6(4),e.Oqu(e.lcZ(39,58,"translation.phone_number")),e.xp6(2),e.s9C("placeholder",e.lcZ(41,60,"translation.phone_number")),e.xp6(2),e.Q6J("ngIf",null==(c=r.form.get("phoneNumber"))?null:c.invalid),e.xp6(4),e.Oqu(e.lcZ(47,62,"translation.email")),e.xp6(2),e.s9C("placeholder",e.lcZ(49,64,"translation.email")),e.xp6(2),e.Q6J("ngIf",null==(u=r.form.get("emailAddress"))?null:u.invalid),e.xp6(4),e.Oqu(e.lcZ(55,66,"translation.gender")),e.xp6(4),e.hij("-- ",e.lcZ(59,68,"translation.select")," --"),e.xp6(3),e.Oqu(e.lcZ(62,70,"translation.male")),e.xp6(3),e.Oqu(e.lcZ(65,72,"translation.female")),e.xp6(2),e.Q6J("ngIf",null==(p=r.form.get("gender"))?null:p.invalid),e.xp6(4),e.Oqu(e.lcZ(71,74,"translation.role")),e.xp6(4),e.hij("-- ",e.lcZ(75,76,"translation.select")," --"),e.xp6(2),e.Q6J("ngForOf",r.roles),e.xp6(1),e.Q6J("ngIf",null==(d=r.form.get("role"))?null:d.invalid),e.xp6(4),e.Oqu(e.lcZ(82,78,"translation.User_type")),e.xp6(4),e.hij("-- ",e.lcZ(86,80,"translation.select")," --"),e.xp6(2),e.Q6J("ngForOf",r.userTypes),e.xp6(1),e.Q6J("ngIf",null==(_=r.form.get("role"))?null:_.invalid),e.xp6(4),e.Oqu(e.lcZ(93,82,"translation.region")),e.xp6(4),e.hij("-- ",e.lcZ(97,84,"translation.select")," --"),e.xp6(2),e.Q6J("ngForOf",r.regions),e.xp6(1),e.Q6J("ngIf",null==(R=r.form.get("organization"))?null:R.invalid),e.xp6(4),e.Oqu(e.lcZ(104,86,"translation.branch")),e.xp6(4),e.hij("--",e.lcZ(108,88,"translation.branch"),"--"),e.xp6(2),e.Q6J("ngForOf",r.branches),e.xp6(1),e.Q6J("ngIf",null==(z=r.form.get("branch"))?null:z.hasError("required")),e.xp6(5),e.hij(" ",e.lcZ(116,90,"translation.back")," "),e.xp6(2),e.Q6J("disabled",r.form.invalid),e.xp6(1),e.hij(" ",e.lcZ(119,92,"translation.submit")," ")}},dependencies:[v.sg,v.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,T.ey,C.lW,f.a8,f.n5,m.TO,m.KE,m.hX,x.Hw,k.Nt,I.gD,g.xw,g.SQ,g.yH,b.X$]}),o})();const Cr=["actionTemplate"],qr=["statusTemplate"];function Ur(o,s){if(1&o&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Tr(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",18)(1,"mat-icon"),e._uU(2,"more_horiz"),e.qZA()(),e.TgZ(3,"mat-menu",null,19)(5,"button",20),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.viewDetailedRecord(n))}),e.TgZ(6,"mat-icon"),e._uU(7,"edit"),e.qZA(),e._uU(8," Edit "),e.qZA()()}if(2&o){const t=e.MAs(4);e.Q6J("matMenuTriggerFor",t)}}function wr(o,s){if(1&o&&(e.TgZ(0,"span",21),e._uU(1),e.qZA()),2&o){const t=s.$implicit,r=e.oxw();e.Q6J("ngStyle",r.getStatusColor(t.status)),e.xp6(1),e.hij(" ",t.status," ")}}const kr=function(){return[5,10,20,50,100]};let Sr=(()=>{class o{constructor(t,r,i,n,l,c,u,p){this.remoteSrv=t,this.cdr=r,this.encryptionservice=i,this.router=n,this.translate=l,this.dialog=c,this.diag1=u,this.localStorage=p,this.columns=[],this.filters=[],this.selectedFilter="",this.list=[],this.total=0,this.isLoading=!0,this.query={q:"",sort:"",order:"",page:0,per_page:10}}ngAfterViewInit(){this.columns=[{header:"Role Name",field:"name"},{header:"Created Date",field:"createdOn"},{header:"Created By",field:"createdBy"},{header:"Status",field:"status",cellTemplate:this.statusTemplate},{header:this.translate.stream("table_kitchen_sink.actions"),field:"actions",cellTemplate:this.actionTemplate}]}getStatusColor(t){switch(t){case"Active":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Inactive":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}get params(){const t=Object.assign({},this.query);return t.page+=1,t}ngOnInit(){this.getRoles()}getRoles(){const r=this.encryptionservice.encryptData({status:this.selectedFilter,page:this.query.page,size:this.query.per_page,organization:0}),i=r.split(":")[2],n=r.split(":")[1],l=r.split(":")[0];this.remoteSrv.getAdminRoles(l,n).subscribe(c=>{const u=JSON.parse(c),p=this.encryptionservice.decryptData(u?.body,i);this.list=p.data.content,this.total=p.data.total,this.filters=p.statuses,this.isLoading=!1,this.cdr.detectChanges()},c=>{console.error("Error fetching roles:",c),this.isLoading=!1})}viewDetailedRecord(t){var r=t?.id;r&&this.router.navigate(["/usermanagement/manage-admin-role",r])}getNextPage(t){this.query.page=t.pageIndex,this.query.per_page=t.pageSize,this.getRoles()}search(){this.query.page=0,this.getRoles()}onFilterChange(t){this.selectedFilter=t.value,this.getRoles()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(w),e.Y36(e.sBO),e.Y36(A.w),e.Y36(y.F0),e.Y36(b.sK),e.Y36(h.uw),e.Y36(Y.cP),e.Y36(q.n2))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-admin-roles-list"]],viewQuery:function(t,r){if(1&t&&(e.Gf(Cr,7),e.Gf(qr,7)),2&t){let i;e.iGM(i=e.CRH())&&(r.actionTemplate=i.first),e.iGM(i=e.CRH())&&(r.statusTemplate=i.first)}},features:[e._Bn([w])],decls:25,vars:13,consts:[[2,"border","1px solid #ccc","padding","16px"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"col"],[2,"margin","0"],[1,"d-flex","justify-content-between","w-100","flex-wrap"],["fxFlex","33.33%","fxFlex.lt-sm","100%",1,"px-2"],["appearance","outline",2,"width","100%"],["name","selectedFilter",3,"ngModel","ngModelChange","selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["fxFlex","39.34%","fxFlex.lt-sm","100%",1,"d-flex","justify-content-between","align-items-center","px-2"],["fxFlex","27.33%","fxFlex.lt-sm","100%",1,"px-2"],["matPrefix",""],["matInput","","name","q","placeholder","Search",3,"ngModel","ngModelChange"],[3,"data","columns","length","loading","rowStriped","pageOnFront","pageIndex","pageSize","pageSizeOptions","page"],["actionTemplate",""],["statusTemplate",""],[3,"value"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[3,"ngStyle"]],template:function(t,r){1&t&&(e.TgZ(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Admin Roles Management"),e.qZA()()()(),e.TgZ(5,"div",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),e._uU(9,"Select Filter"),e.qZA(),e.TgZ(10,"mat-select",7),e.NdJ("ngModelChange",function(n){return r.selectedFilter=n})("selectionChange",function(n){return r.onFilterChange(n)}),e.TgZ(11,"mat-option",8),e._uU(12,"All Roles"),e.qZA(),e.YNc(13,Ur,2,2,"mat-option",9),e.qZA()()(),e._UZ(14,"div",10),e.TgZ(15,"div",11)(16,"mat-form-field",6)(17,"mat-icon",12),e._uU(18,"search"),e.qZA(),e.TgZ(19,"input",13),e.NdJ("ngModelChange",function(n){return r.query.q=n}),e.qZA()()()(),e.TgZ(20,"mtx-grid",14),e.NdJ("page",function(n){return r.getNextPage(n)}),e.qZA(),e.YNc(21,Tr,9,1,"ng-template",null,15,e.W1O),e.YNc(23,wr,2,2,"ng-template",null,16,e.W1O)),2&t&&(e.xp6(10),e.Q6J("ngModel",r.selectedFilter),e.xp6(3),e.Q6J("ngForOf",r.filters),e.xp6(6),e.Q6J("ngModel",r.query.q),e.xp6(1),e.Q6J("data",r.list)("columns",r.columns)("length",r.total)("loading",r.isLoading)("rowStriped",!0)("pageOnFront",!1)("pageIndex",r.query.page)("pageSize",r.query.per_page)("pageSizeOptions",e.DdM(12,kr)))},dependencies:[v.sg,v.PC,a.Fj,a.JJ,a.On,T.ey,C.lW,f.a8,m.KE,m.hX,m.qo,x.Hw,k.Nt,N.VK,N.OP,N.p6,I.gD,O.CM,g.yH,J.Zl]}),o})();function Nr(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function Fr(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"mat-checkbox",25),e.NdJ("change",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.onCheckboxChange(i))}),e._uU(2),e.qZA()()}if(2&o){const t=s.$implicit,r=s.index,i=e.oxw();e.xp6(1),e.Q6J("value",t.id)("checked",i.permissions.at(r).value),e.xp6(1),e.hij(" ",t.name," ")}}let Rr=(()=>{class o{constructor(t,r,i,n,l,c,u,p,d,_){this.dialog=t,this.roleService=r,this.encryptionService=i,this.route=n,this.fb=l,this.dateAdapter=c,this.translate=u,this.router=p,this.toaster=d,this.localStorage=_,this.selectedPrivilegeIds=[],this.rolesForm=this.fb.group({name:[""],createdBy:[""],status:[!1],createdOn:[""],checkedBy:[""],checkedOn:[""],searchKey:[""],permissions:this.fb.array([])})}ngOnDestroy(){this.translateSubscription.unsubscribe()}ngOnInit(){this.roleId=this.route.snapshot.paramMap.get("id"),this.getRoleDetails(),this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)})}getpermissions(){const t=this.encryptionService.generateAesKey(),r=this.encryptionService.generatebase64Key(t),i=this.encryptionService.encryptWithRSA(r);this.roleService.getpermissions(i).subscribe(n=>{const l=JSON.parse(n),c=this.encryptionService.decryptData(l?.body,r);this.allPermissions=c,this.originalPermissions=c,this.filteredPermissions=c,this.initializePermissions(),this.setExistingPermissions(this.role.permissions)})}initializePermissions(){this.allPermissions.forEach(()=>this.permissions.push(this.fb.control(!1)))}get permissions(){return this.rolesForm.get("permissions")}setExistingPermissions(t){t.forEach(r=>{const i=this.allPermissions.findIndex(n=>n.id===r.id);-1!==i&&(this.permissions.at(i).setValue(!0),this.selectedPrivilegeIds.push(r.id))})}onCheckboxChange(t){const r=this.rolesForm.get("permissions"),i=Number(t.source.value),n=this.allPermissions.findIndex(l=>l.id===i);-1!==n&&(t.source.checked?(r.at(n).setValue(!0),this.selectedPrivilegeIds.push(i)):(r.at(n).setValue(!1),this.selectedPrivilegeIds=this.selectedPrivilegeIds.filter(l=>l!==i)))}returnRole(){this.router.navigateByUrl("/usermanagement/admin-roles")}getRoleDetails(){const t=this.encryptionService.generateAesKey(),r=this.encryptionService.generatebase64Key(t),i=this.encryptionService.encryptWithRSA(r);this.roleService.getRoleById(this.roleId,i).subscribe(n=>{const l=JSON.parse(n);this.role=this.encryptionService.decryptData(l?.body,r),this.role&&(this.getpermissions(),this.rolesForm.patchValue({name:this.role?.name||"",createdBy:this.role?.createdBy||"",createdOn:this.role?.createdOn||"",checkedBy:this.role?.checkedBy||"",checkedOn:this.role?.checkedOn||"",status:"Active"==this.role.status}))},n=>{console.error("Error fetching role details:",n)})}toggleStatus(t){this.rolesForm.get("status")?.setValue(t.checked)}searchPermissions(){const t=this.rolesForm.value.searchKey.trim();this.filteredPermissions=""===t?this.allPermissions:this.originalPermissions.filter(r=>r.name.toLowerCase().includes(t.toLowerCase())),this.filteredPermissions.forEach((r,i)=>{const l=this.selectedPrivilegeIds.includes(r.id);this.permissions.at(i).setValue(l)})}onSubmit(){if(this.rolesForm.valid){const t={id:this.role.id,name:this.rolesForm.value.name,status:this.rolesForm.value.status,userName:this.localStorage.get("user-entity")?.username,organization:this.localStorage.get("user-entity")?.organization?.id,permissions:this.selectedPrivilegeIds},r=this.encryptionService.encryptData(t),i=r.split(":")[0],n=r.split(":")[1],l=r.split(":")[2];this.roleService.updateAdminRole(n,i).subscribe(c=>{const u=JSON.parse(c);if(200==u.code||201==u.code){const p=this.encryptionService.decryptData(u.body,l);p&&(this.toaster.showSuccess(p?.message),this.returnRole())}else this.toaster.showError(u?.body?.message)})}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.uw),e.Y36(w),e.Y36(A.w),e.Y36(y.gz),e.Y36(a.qu),e.Y36(T._A),e.Y36(b.sK),e.Y36(y.F0),e.Y36(F.M),e.Y36(q.n2))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-manage-admin-role-details"]],features:[e._Bn([w])],decls:44,vars:4,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","16px"],[2,"font-size","24px","margin-bottom","4px","font-family","'Inter', sans-serif","color","#304254"],[2,"font-weight","normal","opacity","0.6","margin-top","0","padding","0"],[1,"form-field-full",3,"formGroup"],["fxFlex","50","fxFlex.lt-sm","100"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex","90","fxFlex.lt-sm","100"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","readonly","","placeholder","Role Name","formControlName","name","required","",2,"font-size","16px"],[4,"ngIf"],["matInput","","readonly","","placeholder","Created By","formControlName","createdBy","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Created On","formControlName","createdOn","required","",2,"font-size","16px"],["appearence","outline","formControlName","status",2,"font-size","16px","padding-top","20px","padding-bottom","20px",3,"checked","change"],["fxLayout","row","fxLayoutGap","16px","fxFlex","100","fxFlex.lt-sm","100"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","font-size","18px","height","40px",3,"click"],["mat-raised-button","",2,"background-color","#74C84D","color","white","font-size","18px","height","40px",3,"click"],[2,"width","80%"],["matPrefix",""],["matInput","","formControlName","searchKey","name","searchKey","placeholder","Search ..."],["mat-raised-button","",2,"width","20%","background-color","#b60f20","color","white","font-size","14px",3,"click"],["formArrayName","permissions",2,"overflow","auto","max-height","300px"],[4,"ngFor","ngForOf"],[3,"value","checked","change"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title",3),e._uU(4," Manage Admin Role "),e.qZA(),e.TgZ(5,"h6",4),e._uU(6,"Manage Admin Role Permissions"),e.qZA(),e.TgZ(7,"form",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"mat-form-field",9)(12,"mat-label",10),e._uU(13,"Role Name"),e.qZA(),e._UZ(14,"input",11),e.YNc(15,Nr,3,3,"mat-error",12),e.qZA(),e.TgZ(16,"mat-form-field",9)(17,"mat-label",10),e._uU(18,"Created By"),e.qZA(),e._UZ(19,"input",13),e.qZA(),e.TgZ(20,"mat-form-field",9)(21,"mat-label",10),e._uU(22,"Created On"),e.qZA(),e._UZ(23,"input",14),e.qZA(),e.TgZ(24,"mat-checkbox",15),e.NdJ("change",function(n){return r.toggleStatus(n)}),e._uU(25," Activate/Deactivate "),e.qZA()(),e.TgZ(26,"div",16)(27,"button",17),e.NdJ("click",function(){return r.returnRole()}),e.TgZ(28,"mat-icon"),e._uU(29,"arrow_back"),e.qZA(),e._uU(30," Back "),e.qZA(),e.TgZ(31,"button",18),e.NdJ("click",function(){return r.onSubmit()}),e._uU(32," Submit "),e.qZA()()()(),e.TgZ(33,"div",6)(34,"mat-form-field",19)(35,"mat-label",10),e._uU(36,"Search Permission"),e.qZA(),e.TgZ(37,"mat-icon",20),e._uU(38,"search"),e.qZA(),e._UZ(39,"input",21),e.qZA(),e.TgZ(40,"button",22),e.NdJ("click",function(){return r.searchPermissions()}),e._uU(41,"Search"),e.qZA(),e.TgZ(42,"div",23),e.YNc(43,Fr,3,3,"div",24),e.qZA()()()()()()),2&t){let i,n;e.xp6(7),e.Q6J("formGroup",r.rolesForm),e.xp6(8),e.Q6J("ngIf",null==(i=r.rolesForm.get("name"))?null:i.invalid),e.xp6(9),e.Q6J("checked",null==(n=r.rolesForm.get("status"))?null:n.value),e.xp6(19),e.Q6J("ngForOf",r.filteredPermissions)}},dependencies:[v.sg,v.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,a.CE,C.lW,f.a8,f.n5,D.oG,m.TO,m.KE,m.hX,m.qo,x.Hw,k.Nt,g.xw,g.SQ,g.yH,b.X$]}),o})(),Ir=(()=>{class o{constructor(t,r,i,n,l,c,u,p,d,_){this.userService=t,this.encryptionService=r,this.route=i,this.fb=n,this.dateAdapter=l,this.translate=c,this.router=u,this.toaster=p,this.dialog=d,this.localStorage=_,this.isLoading=!0,this.userForm=this.fb.nonNullable.group({firstName:["",[a.kI.required,a.kI.maxLength(50)]],otherNames:["",[a.kI.required,a.kI.maxLength(100)]],emailAddress:["",[a.kI.required,a.kI.email]],username:["",[a.kI.required,a.kI.maxLength(30)]],phoneNumber:["",[a.kI.required,a.kI.pattern("^[0-9]{10}$")]],gender:["",a.kI.required],userId:[""],createdBy:[""],createdOn:[],approvalStatus:[""],status:[""],checkedBy:[""],checkedOn:[""],modifiedBy:[""],modifiedOn:[""],role:[""],branch:[""],region:[""],userType:[""],country:[""],organization:[""],acctStatus:[!1]})}ngOnDestroy(){this.translateSubscription.unsubscribe()}ngOnInit(){this.userId=this.route.snapshot.paramMap.get("id"),this.getUserProfile(),this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)})}getUserProfile(){const t=this.encryptionService.generateAesKey(),r=this.encryptionService.generatebase64Key(t),i=this.encryptionService.encryptWithRSA(r);this.userService.getUserProfile(this.userId,i).subscribe(n=>{const l=JSON.parse(n);this.profile=this.encryptionService.decryptData(l?.body,r),this.profile&&this.userForm.patchValue({firstName:this.profile?.firstName||"",otherNames:this.profile?.otherNames||"",emailAddress:this.profile?.emailAddress||"",username:this.profile?.username||"",phoneNumber:this.profile?.phoneNumber||"",gender:this.profile?.gender||"",createdBy:this.profile?.createdBy||"",createdOn:this.profile?.createdOn||"",status:this.profile?.status,approvalStatus:this.profile?.changeStatus||"",modifiedBy:this.profile?.modifiedBy||"",modifiedOn:this.profile?.modifiedOn||"",checkedBy:this.profile?.checkedBy||"",checkedOn:this.profile?.checkedOn||"",userId:this.profile?.userId||"",userType:this.profile?.accountType?.name||"",role:this.profile?.roles[0]?.name,country:this.profile?.organization?.country?.name,organization:this.profile?.organization?.name,region:this.profile?.branch?.region?.name,branch:this.profile?.branch?.name,acctStatus:"Active"===this.profile?.status}),this.isLoading=!1},n=>{console.error("Error fetching user profile:",n),this.isLoading=!1})}return(){this.router.navigateByUrl("/usermanagement/country-users-review")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z.K),e.Y36(A.w),e.Y36(y.gz),e.Y36(a.qu),e.Y36(T._A),e.Y36(b.sK),e.Y36(y.F0),e.Y36(F.M),e.Y36(h.uw),e.Y36(q.n2))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-view-country-user-account-details"]],features:[e._Bn([Z.K])],decls:105,vars:1,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","24px","border","2px solid #304254","border-radius","8px"],[2,"font-size","24px","margin-bottom","4px","font-family","'Inter', sans-serif","color","#304254"],[2,"font-weight","normal","opacity","0.6","margin-top","0","padding","0"],[1,"form-field-full",2,"overflow-x","hidden",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","5px grid"],["fxFlex","33.33","fxFlex.lt-sm","100"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","readonly","","placeholder","First Name","formControlName","firstName","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Other Name","formControlName","otherNames","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Phone number","formControlName","phoneNumber","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","User Name","formControlName","username","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Email","formControlName","emailAddress","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Gender","formControlName","gender","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","User Id","formControlName","userId","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Country","formControlName","country","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Organization","formControlName","organization","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Region","formControlName","region","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Branch","formControlName","branch","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","User Account Type","formControlName","userType","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Role","formControlName","role","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Created By","formControlName","createdBy","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Date Created","formControlName","createdOn","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Checked By","formControlName","checkedBy","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Checked On","formControlName","checkedOn","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Account Status","formControlName","status","required","",2,"font-size","16px"],[1,"d-flex","justify-content-between","flex-wrap",2,"margin-top","24px"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","font-size","14px","margin-right","10px",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title",3),e._uU(4," Review User Account Details "),e.qZA(),e.TgZ(5,"h6",4),e._uU(6,"Review User Account Details"),e.qZA(),e.TgZ(7,"mat-card-content")(8,"form",5)(9,"div",6)(10,"div",7)(11,"mat-form-field",8)(12,"mat-label",9),e._uU(13,"First Name"),e.qZA(),e._UZ(14,"input",10),e.qZA()(),e.TgZ(15,"div",7)(16,"mat-form-field",8)(17,"mat-label",9),e._uU(18,"Other Name"),e.qZA(),e._UZ(19,"input",11),e.qZA()(),e.TgZ(20,"div",7)(21,"mat-form-field",8)(22,"mat-label",9),e._uU(23,"Phone Number"),e.qZA(),e._UZ(24,"input",12),e.qZA()(),e.TgZ(25,"div",7)(26,"mat-form-field",8)(27,"mat-label",9),e._uU(28,"User Name"),e.qZA(),e._UZ(29,"input",13),e.qZA()(),e.TgZ(30,"div",7)(31,"mat-form-field",8)(32,"mat-label",9),e._uU(33,"Email"),e.qZA(),e._UZ(34,"input",14),e.qZA()(),e.TgZ(35,"div",7)(36,"mat-form-field",8)(37,"mat-label",9),e._uU(38,"Gender"),e.qZA(),e._UZ(39,"input",15),e.qZA()(),e.TgZ(40,"div",7)(41,"mat-form-field",8)(42,"mat-label",9),e._uU(43,"User Id"),e.qZA(),e._UZ(44,"input",16),e.qZA()(),e.TgZ(45,"div",7)(46,"mat-form-field",8)(47,"mat-label",9),e._uU(48,"Country"),e.qZA(),e._UZ(49,"input",17),e.qZA()(),e.TgZ(50,"div",7)(51,"mat-form-field",8)(52,"mat-label",9),e._uU(53,"Organization"),e.qZA(),e._UZ(54,"input",18),e.qZA()(),e.TgZ(55,"div",7)(56,"mat-form-field",8)(57,"mat-label",9),e._uU(58,"Region"),e.qZA(),e._UZ(59,"input",19),e.qZA()(),e.TgZ(60,"div",7)(61,"mat-form-field",8)(62,"mat-label",9),e._uU(63,"Branch"),e.qZA(),e._UZ(64,"input",20),e.qZA()(),e.TgZ(65,"div",7)(66,"mat-form-field",8)(67,"mat-label",9),e._uU(68,"User Account Type"),e.qZA(),e._UZ(69,"input",21),e.qZA()(),e.TgZ(70,"div",7)(71,"mat-form-field",8)(72,"mat-label",9),e._uU(73,"Role"),e.qZA(),e._UZ(74,"input",22),e.qZA()(),e.TgZ(75,"div",7)(76,"mat-form-field",8)(77,"mat-label",9),e._uU(78,"Created By"),e.qZA(),e._UZ(79,"input",23),e.qZA()(),e.TgZ(80,"div",7)(81,"mat-form-field",8)(82,"mat-label",9),e._uU(83,"Date Created"),e.qZA(),e._UZ(84,"input",24),e.qZA()(),e.TgZ(85,"div",7)(86,"mat-form-field",8)(87,"mat-label",9),e._uU(88,"Checked By"),e.qZA(),e._UZ(89,"input",25),e.qZA()(),e.TgZ(90,"div",7)(91,"mat-form-field",8)(92,"mat-label",9),e._uU(93,"Checked On"),e.qZA(),e._UZ(94,"input",26),e.qZA()(),e.TgZ(95,"div",7)(96,"mat-form-field",8)(97,"mat-label",9),e._uU(98,"Account Status"),e.qZA(),e._UZ(99,"input",27),e.qZA()()(),e.TgZ(100,"div",28)(101,"button",29),e.NdJ("click",function(){return r.return()}),e.TgZ(102,"mat-icon"),e._uU(103,"arrow_back"),e.qZA(),e._uU(104," Back "),e.qZA()()()()()()()),2&t&&(e.xp6(8),e.Q6J("formGroup",r.userForm))},dependencies:[a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,C.lW,f.a8,f.dn,f.n5,m.KE,m.hX,x.Hw,k.Nt,g.xw,g.SQ,g.yH]}),o})();function Or(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}let Mr=(()=>{class o{constructor(t,r,i,n,l,c,u,p){this.data=t,this.dialogRef=r,this.fb=i,this.router=n,this.localStorage=l,this.service=c,this.encryptionService=u,this.toaster=p,this.form=this.fb.group({remarks:["",a.kI.required]})}ngOnInit(){}onReview(){this.dialogRef.close("review"),this.router.navigate(["/usermanagement/review-user-account",this.data?.id])}onClose(){this.dialogRef.close()}onSubmit(){const t={recordId:this.data.id,checkerName:this.localStorage.get("user-entity")?.username,remarks:this.form.value.remarks,approve:!1},r=this.encryptionService.encryptData(t),i=r.split(":")[0],n=r.split(":")[1],l=r.split(":")[2];this.service.approveReject(n,i).subscribe(c=>{const u=JSON.parse(c);if(200==u.code||201==u.code){const p=this.encryptionService.decryptData(u?.body,l);p&&(this.toaster.showSuccess(p?.message),this.dialogRef.close("reject"))}else this.toaster.showError(u?.body?.message)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.WI),e.Y36(h.so),e.Y36(a.qu),e.Y36(y.F0),e.Y36(q.n2),e.Y36(Z.K),e.Y36(A.w),e.Y36(F.M))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-reject-country-user-account"]],features:[e._Bn([Z.K])],decls:32,vars:3,consts:[["mat-dialog-title","",2,"display","flex","justify-content","space-between","align-items","center"],[2,"flex","1","font-size","20px"],["mat-icon-button","","aria-label","Close dialog",2,"margin","0",3,"click"],["mat-dialog-content",""],[1,"form-field-full",3,"formGroup"],["fxFlex","100","fxFlex.lt-sm","100"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","placeholder","Remarks","formControlName","remarks","required","",2,"font-size","16px"],[4,"ngIf"],["mat-dialog-actions",""],["mat-stroked-button","","color","warn",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2,"Reject User Account"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return r.onClose()}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA()()(),e.TgZ(6,"div",3)(7,"p"),e._uU(8,"Are you sure you want to Reject "),e.TgZ(9,"strong"),e._uU(10),e.qZA(),e._uU(11,"? Enter Remarks below and Click "),e.TgZ(12,"strong"),e._uU(13,"Reject"),e.qZA(),e._uU(14," to Approve or "),e.TgZ(15,"strong"),e._uU(16,"Review"),e.qZA(),e._uU(17," to view details. "),e.qZA(),e.TgZ(18,"form",4)(19,"div",5)(20,"div",6)(21,"div",5)(22,"mat-form-field",7)(23,"mat-label",8),e._uU(24,"Remarks"),e.qZA(),e._UZ(25,"textarea",9),e.YNc(26,Or,3,3,"mat-error",10),e.qZA()()()()()(),e.TgZ(27,"div",11)(28,"button",12),e.NdJ("click",function(){return r.onReview()}),e._uU(29,"Review"),e.qZA(),e.TgZ(30,"button",13),e.NdJ("click",function(){return r.onSubmit()}),e._uU(31,"Reject"),e.qZA()()),2&t){let i;e.xp6(10),e.Oqu(r.data.name),e.xp6(8),e.Q6J("formGroup",r.form),e.xp6(8),e.Q6J("ngIf",null==(i=r.form.get("remarks"))?null:i.invalid)}},dependencies:[v.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,C.lW,h.uh,h.xY,h.H8,m.TO,m.KE,m.hX,x.Hw,k.Nt,g.xw,g.SQ,g.yH,b.X$]}),o})(),zr=(()=>{class o{constructor(t,r,i,n,l,c,u){this.data=t,this.dialogRef=r,this.router=i,this.localStorage=n,this.service=l,this.encryptionService=c,this.toaster=u}ngOnInit(){}onReview(){this.dialogRef.close("review"),this.router.navigate(["/usermanagement/review-user-account",this.data?.id])}onApprove(){const t={recordId:this.data.id,checkerName:this.localStorage.get("user-entity")?.username,remarks:"",approve:!0},r=this.encryptionService.encryptData(t),i=r.split(":")[0],n=r.split(":")[1],l=r.split(":")[2];this.service.approveReject(n,i).subscribe(c=>{const u=JSON.parse(c);if(200==u.code||201==u.code){const p=this.encryptionService.decryptData(u?.body,l);p&&(this.toaster.showSuccess(p?.message),this.dialogRef.close("approve"))}else this.toaster.showError(u?.body?.message)})}onClose(){this.dialogRef.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.WI),e.Y36(h.so),e.Y36(y.F0),e.Y36(q.n2),e.Y36(Z.K),e.Y36(A.w),e.Y36(F.M))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-approve-country-user-account"]],features:[e._Bn([Z.K])],decls:23,vars:1,consts:[["mat-dialog-title","",2,"display","flex","justify-content","space-between","align-items","center"],[2,"flex","1","font-size","20px"],["mat-icon-button","","aria-label","Close dialog",2,"margin","0",3,"click"],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-stroked-button","","color","warn",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2,"Approve User Account"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return r.onClose()}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA()()(),e.TgZ(6,"div",3)(7,"p"),e._uU(8,"Are you sure you want to Approve "),e.TgZ(9,"strong"),e._uU(10),e.qZA(),e._uU(11,"? Click "),e.TgZ(12,"strong"),e._uU(13,"Approve"),e.qZA(),e._uU(14," to Approve or "),e.TgZ(15,"strong"),e._uU(16,"Review"),e.qZA(),e._uU(17," to review details. "),e.qZA()(),e.TgZ(18,"div",4)(19,"button",5),e.NdJ("click",function(){return r.onReview()}),e._uU(20,"Review"),e.qZA(),e.TgZ(21,"button",6),e.NdJ("click",function(){return r.onApprove()}),e._uU(22,"Approve"),e.qZA()()),2&t&&(e.xp6(10),e.Oqu(r.data.username))},dependencies:[C.lW,h.uh,h.xY,h.H8,x.Hw]}),o})();const Jr=["actionTemplate"],Dr=["statusTemplate"],Yr=["validityStatusTemplate"];function Lr(o,s){if(1&o&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Pr(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",19)(1,"mat-icon"),e._uU(2,"more_horiz"),e.qZA()(),e.TgZ(3,"mat-menu",null,20)(5,"button",21),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.viewDetailedRecord(n))}),e.TgZ(6,"mat-icon",22),e._uU(7,"visibility"),e.qZA(),e._uU(8," View "),e.qZA(),e.TgZ(9,"button",23),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.openApproveDialog(n))}),e.TgZ(10,"mat-icon",24),e._uU(11,"check_circle"),e.qZA(),e._uU(12," Approve "),e.qZA(),e.TgZ(13,"button",23),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.openRejectDialog(n))}),e.TgZ(14,"mat-icon",25),e._uU(15,"block"),e.qZA(),e._uU(16," Reject "),e.qZA()()}if(2&o){const t=s.$implicit,r=e.MAs(4),i=e.oxw();e.Q6J("matMenuTriggerFor",r),e.xp6(9),e.Q6J("disabled",t.createdBy===i.username||"Approved"===t.validityStatus),e.xp6(4),e.Q6J("disabled",t.createdBy===i.username||"Approved"===t.validityStatus)}}function Br(o,s){if(1&o&&(e.TgZ(0,"span",26),e._uU(1),e.qZA()),2&o){const t=s.$implicit,r=e.oxw();e.Q6J("ngStyle",r.getStatusColor(t.status)),e.xp6(1),e.hij(" ",t.status," ")}}function jr(o,s){if(1&o&&(e.TgZ(0,"span",26),e._uU(1),e.qZA()),2&o){const t=s.$implicit,r=e.oxw();e.Q6J("ngStyle",r.getValidityStatusColor(t.validityStatus)),e.xp6(1),e.hij(" ",t.validityStatus," ")}}const Kr=function(){return[5,10,20,50,100]};let Qr=(()=>{class o{constructor(t,r,i,n,l,c,u,p){this.remoteSrv=t,this.organizationService=r,this.localStorage=i,this.cdr=n,this.encryptionservice=l,this.router=c,this.translate=u,this.dialog=p,this.columns=[],this.list=[],this.selectedRegion=0,this.filters=[],this.selectedFilter="",this.total=0,this.isLoading=!0,this.query={q:"",sort:"",order:"",page:0,per_page:10}}ngAfterViewInit(){this.columns=[{header:this.translate.stream("users_table.first_name"),field:"firstName",width:"auto",resizable:!0},{header:this.translate.stream("users_table.last_name"),field:"otherNames",width:"auto",resizable:!0},{header:this.translate.stream("users_table.phone_number"),field:"phoneNumber",width:"auto",resizable:!0},{header:this.translate.stream("users_table.mail"),field:"emailAddress",width:"auto",resizable:!0},{header:this.translate.stream("accounts.user_type"),field:"accountType.name",width:"auto",resizable:!0},{header:this.translate.stream("users_table.gender"),field:"gender",width:"auto",resizable:!0},{header:this.translate.stream("users_table.user_name"),field:"username",width:"auto",resizable:!0},{header:this.translate.stream("regions_table.actions"),field:"actions",cellTemplate:this.actionTemplate}]}getStatusColor(t){switch(t){case"Active":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Inactive":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}getValidityStatusColor(t){switch(t){case"Pending":return{color:"goldenrod","background-color":"#FFF8E1","border-radius":"12px",padding:"4px 8px"};case"Approved":return{color:"green","background-color":"#E6F8E6","border-radius":"12px",padding:"4px 8px"};case"Disapproved":return{color:"red","background-color":"#FDECEC","border-radius":"12px",padding:"4px 8px"};case"Returned":return{color:"blue","background-color":"#E6F4FD","border-radius":"12px",padding:"4px 8px"};default:return{color:"gray","background-color":"#F0F0F0","border-radius":"12px",padding:"4px 8px"}}}get params(){const t=Object.assign({},this.query);return t.page+=1,t}ngOnInit(){this.getUsers(),this.getRegions()}getRegions(){const t=this.encryptionservice.generateAesKey(),r=this.encryptionservice.generatebase64Key(t),i=this.encryptionservice.encryptWithRSA(r);this.organizationService.allOrganizations(i).subscribe(n=>{const l=JSON.parse(n),c=this.encryptionservice.decryptData(l?.body,r);this.regions=c},n=>{console.error("Error fetching regions:",n)})}onRegionChange(t){this.selectedRegion=t.value,this.getUsers()}getUsers(){const t=this.localStorage.get("user-entity");this.username=t?.username,this.organization=t?.organization?.id;const i=this.encryptionservice.encryptData({status:this.selectedFilter,page:this.query.page,size:this.query.per_page,branch:0,accountType:0,organization:this.organization});this.remoteSrv.getCountryUsersReviewList(i.split(":")[0],i.split(":")[1]).subscribe(n=>{const l=JSON.parse(n),c=this.encryptionservice.decryptData(l?.body,i.split(":")[2]);this.list=c.data.content,this.total=c.data.total,this.filters=c.validityStatuses,this.isLoading=!1,this.cdr.detectChanges()},n=>{console.error("Error fetching user accounts:",n)})}viewDetailedRecord(t){var r=t?.id;r&&this.router.navigate(["/usermanagement/review-user-account",r])}getNextPage(t){this.query.page=t.pageIndex,this.query.per_page=t.pageSize,this.getUsers()}search(){this.query.page=0,this.getUsers()}onFilterChange(t){this.selectedFilter=t.value,"Country"!=this.selectedFilter&&this.getUsers()}openApproveDialog(t){this.dialog.open(zr,{width:"400px",data:t}).afterClosed().subscribe(()=>{this.getUsers()})}openRejectDialog(t){this.dialog.open(Mr,{width:"400px",data:t}).afterClosed().subscribe(()=>{this.getUsers()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z.K),e.Y36(P.w),e.Y36(q.n2),e.Y36(e.sBO),e.Y36(A.w),e.Y36(y.F0),e.Y36(b.sK),e.Y36(h.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-country-users-review-list"]],viewQuery:function(t,r){if(1&t&&(e.Gf(Jr,7),e.Gf(Dr,7),e.Gf(Yr,7)),2&t){let i;e.iGM(i=e.CRH())&&(r.actionTemplate=i.first),e.iGM(i=e.CRH())&&(r.statusTemplate=i.first),e.iGM(i=e.CRH())&&(r.validityStatusTemplate=i.first)}},features:[e._Bn([Z.K,M.K])],decls:29,vars:16,consts:[[2,"border","1px solid #ccc","padding","16px"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"col"],[2,"margin","0"],[1,"d-flex","justify-content-between","w-100","flex-wrap"],["fxFlex","33.33%","fxFlex.lt-sm","100%",1,"px-2"],["appearance","outline",2,"width","100%"],["name","selectedFilter",3,"ngModel","ngModelChange","selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["fxFlex","39.34%","fxFlex.lt-sm","100%",1,"d-flex","justify-content-between","align-items-center","px-2"],["fxFlex","27.33%","fxFlex.lt-sm","100%",1,"px-2"],["matPrefix",""],["matInput","","name","q","placeholder","Search",3,"ngModel","ngModelChange"],[3,"data","columns","length","loading","rowStriped","pageOnFront","pageIndex","pageSize","pageSizeOptions","rowClick","page"],["actionTemplate",""],["statusTemplate",""],["validityStatusTemplate",""],[3,"value"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["color","primary"],["mat-menu-item","",3,"disabled","click"],["color","accent"],["color","warn"],[3,"ngStyle"]],template:function(t,r){1&t&&(e.TgZ(0,"div")(1,"mat-card",0)(2,"div",1)(3,"div",2)(4,"h2",3),e._uU(5),e.ALo(6,"translate"),e.qZA()()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"mat-form-field",6)(10,"mat-label"),e._uU(11,"Status"),e.qZA(),e.TgZ(12,"mat-select",7),e.NdJ("ngModelChange",function(n){return r.selectedFilter=n})("selectionChange",function(n){return r.onFilterChange(n)}),e.TgZ(13,"mat-option",8),e._uU(14,"-- Select --"),e.qZA(),e.YNc(15,Lr,2,2,"mat-option",9),e.qZA()()(),e._UZ(16,"div",10),e.TgZ(17,"div",11)(18,"mat-form-field",6)(19,"mat-icon",12),e._uU(20,"search"),e.qZA(),e.TgZ(21,"input",13),e.NdJ("ngModelChange",function(n){return r.query.q=n}),e.qZA()()()(),e.TgZ(22,"mtx-grid",14),e.NdJ("rowClick",function(n){return r.viewDetailedRecord(n)})("page",function(n){return r.getNextPage(n)}),e.qZA()(),e.YNc(23,Pr,17,3,"ng-template",null,15,e.W1O),e.YNc(25,Br,2,2,"ng-template",null,16,e.W1O),e.YNc(27,jr,2,2,"ng-template",null,17,e.W1O)),2&t&&(e.xp6(5),e.Oqu(e.lcZ(6,13,"accounts.user_approval_tittle")),e.xp6(7),e.Q6J("ngModel",r.selectedFilter),e.xp6(3),e.Q6J("ngForOf",r.filters),e.xp6(6),e.Q6J("ngModel",r.query.q),e.xp6(1),e.Q6J("data",r.list)("columns",r.columns)("length",r.total)("loading",r.isLoading)("rowStriped",!0)("pageOnFront",!1)("pageIndex",r.query.page)("pageSize",r.query.per_page)("pageSizeOptions",e.DdM(15,Kr)))},dependencies:[v.sg,v.PC,a.Fj,a.JJ,a.On,T.ey,C.lW,f.a8,m.KE,m.hX,m.qo,x.Hw,k.Nt,N.VK,N.OP,N.p6,I.gD,O.CM,g.yH,J.Zl,b.X$]}),o})();function Er(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function Gr(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function Hr(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function Wr(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function Vr(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}function $r(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}let Xr=(()=>{class o{constructor(t,r,i,n,l,c,u,p,d,_){this.userService=t,this.encryptionService=r,this.route=i,this.fb=n,this.dateAdapter=l,this.translate=c,this.router=u,this.toaster=p,this.dialog=d,this.localStorage=_,this.isLoading=!0,this.userForm=this.fb.nonNullable.group({firstName:["",[a.kI.required,a.kI.maxLength(50)]],otherNames:["",[a.kI.required,a.kI.maxLength(100)]],emailAddress:["",[a.kI.required,a.kI.email]],username:["",[a.kI.required,a.kI.maxLength(30)]],phoneNumber:["",[a.kI.required,a.kI.pattern("^[0-9]{10}$")]],gender:["",a.kI.required],userId:[""],createdBy:[""],createdOn:[],role:[""],branch:[""],region:[""],status:[""],userType:[""],country:[""],organization:[""],acctStatus:[!1]})}ngOnDestroy(){this.translateSubscription.unsubscribe()}ngOnInit(){this.userId=this.route.snapshot.paramMap.get("id"),this.getUserProfile(),this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)})}getUserProfile(){const t=this.encryptionService.generateAesKey(),r=this.encryptionService.generatebase64Key(t),i=this.encryptionService.encryptWithRSA(r);this.userService.getUserProfile(this.userId,i).subscribe(n=>{const l=JSON.parse(n);this.profile=this.encryptionService.decryptData(l?.body,r),this.profile&&this.userForm.patchValue({firstName:this.profile?.firstName||"",otherNames:this.profile?.otherNames||"",emailAddress:this.profile?.emailAddress||"",username:this.profile?.username||"",phoneNumber:this.profile?.phoneNumber||"",gender:this.profile?.gender||"",createdBy:this.profile?.createdBy||"",createdOn:this.profile?.createdOn||"",userId:this.profile?.userId||"",userType:this.profile?.accountType?.name||"",role:this.profile?.roles[0]?.name,status:this.profile?.status,country:this.profile?.organization?.country?.name,organization:this.profile?.organization?.name,region:this.profile?.branch?.region?.name,branch:this.profile?.branch?.name,acctStatus:"Active"===this.profile?.status}),this.isLoading=!1},n=>{console.error("Error fetching user profile:",n),this.isLoading=!1})}toggleAcctStatus(t){this.userForm.get("acctStatus")?.setValue(t.checked)}update(){var t=this.localStorage.get("user-entity");const i=this.encryptionService.encryptData({firstName:this.userForm.value.firstName,otherNames:this.userForm.value.otherNames,modifiedBy:t?.username,phoneNumber:this.userForm.value.phoneNumber,emailAddress:this.userForm.value.emailAddress,gender:this.userForm.value.gender,userId:this.userForm.value.userId,id:this.profile?.id,acctStatus:this.userForm.value.acctStatus}),n=i.split(":")[0],l=i.split(":")[1],c=i.split(":")[2];this.userService.adminUpdateCountryUserDetails(l,n).subscribe(u=>{const p=JSON.parse(u);if(200==p.code||201==p.code){const d=this.encryptionService.decryptData(p.body,c);d&&(this.toaster.showSuccess(d?.message),this.return())}else this.toaster.showError(p?.body?.message)})}return(){this.router.navigateByUrl("/usermanagement/country-users")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z.K),e.Y36(A.w),e.Y36(y.gz),e.Y36(a.qu),e.Y36(T._A),e.Y36(b.sK),e.Y36(y.F0),e.Y36(F.M),e.Y36(h.uw),e.Y36(q.n2))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-manage-country-user-account-details"]],features:[e._Bn([Z.K])],decls:108,vars:8,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","24px","border","2px solid #304254","border-radius","8px"],[2,"font-size","24px","margin-bottom","4px","font-family","'Inter', sans-serif","color","#304254"],[2,"font-weight","normal","opacity","0.6","margin-top","0","padding","0"],[1,"form-field-full",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex","33.33","fxFlex.lt-sm","100"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","placeholder","First Name","formControlName","firstName","required","",2,"font-size","16px"],[4,"ngIf"],["matInput","","placeholder","Other Name","formControlName","otherNames","required","",2,"font-size","16px"],["matInput","","placeholder","Phone number","formControlName","phoneNumber","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","User Name","formControlName","username","required","",2,"font-size","16px"],["matInput","","placeholder","Email","formControlName","emailAddress","required","",2,"font-size","16px"],["required","","formControlName","gender",2,"font-size","16px"],["value","Male"],["value","Female"],["readonly","","matInput","","placeholder","User Id","formControlName","userId","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Created By","formControlName","createdBy","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Date Created","formControlName","createdOn","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Country","formControlName","country","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Organization","formControlName","organization","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Region","formControlName","region","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Branch","formControlName","branch","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","User Account Type","formControlName","userType","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Role","formControlName","role","required","",2,"font-size","16px"],["appearence","outline","formControlName","acctStatus",2,"font-size","16px","padding-top","20px","padding-bottom","20px",3,"checked","change"],[1,"d-flex","justify-content-between","flex-wrap",2,"margin-top","24px"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","font-size","14px","margin-right","10px",3,"click"],["mat-raised-button","",2,"background-color","#74C84D","color","white","font-size","14px","margin-right","10px",3,"click"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title",3),e._uU(4," Activate/Deactivate User Account "),e.qZA(),e.TgZ(5,"h6",4),e._uU(6,"Edit and Manage User Account"),e.qZA(),e.TgZ(7,"form",5)(8,"div",6)(9,"div",7)(10,"mat-form-field",8)(11,"mat-label",9),e._uU(12,"First Name"),e.qZA(),e._UZ(13,"input",10),e.YNc(14,Er,3,3,"mat-error",11),e.qZA()(),e.TgZ(15,"div",7)(16,"mat-form-field",8)(17,"mat-label",9),e._uU(18,"Other Name"),e.qZA(),e._UZ(19,"input",12),e.YNc(20,Gr,3,3,"mat-error",11),e.qZA()(),e.TgZ(21,"div",7)(22,"mat-form-field",8)(23,"mat-label",9),e._uU(24,"Phone Number"),e.qZA(),e._UZ(25,"input",13),e.YNc(26,Hr,3,3,"mat-error",11),e.qZA()(),e.TgZ(27,"div",7)(28,"mat-form-field",8)(29,"mat-label",9),e._uU(30,"User Name"),e.qZA(),e._UZ(31,"input",14),e.YNc(32,Wr,3,3,"mat-error",11),e.qZA()(),e.TgZ(33,"div",7)(34,"mat-form-field",8)(35,"mat-label",9),e._uU(36,"Email"),e.qZA(),e._UZ(37,"input",15),e.YNc(38,Vr,3,3,"mat-error",11),e.qZA()(),e.TgZ(39,"div",7)(40,"mat-form-field",8)(41,"mat-label",9),e._uU(42,"Gender"),e.qZA(),e.TgZ(43,"mat-select",16)(44,"mat-option"),e._uU(45,"-- Select --"),e.qZA(),e.TgZ(46,"mat-option",17),e._uU(47,"Male"),e.qZA(),e.TgZ(48,"mat-option",18),e._uU(49,"Female"),e.qZA()(),e.YNc(50,$r,3,3,"mat-error",11),e.qZA()(),e.TgZ(51,"div",7)(52,"mat-form-field",8)(53,"mat-label",9),e._uU(54,"User Id"),e.qZA(),e._UZ(55,"input",19),e.qZA()(),e.TgZ(56,"div",7)(57,"mat-form-field",8)(58,"mat-label",9),e._uU(59,"Created By"),e.qZA(),e._UZ(60,"input",20),e.qZA()(),e.TgZ(61,"div",7)(62,"mat-form-field",8)(63,"mat-label",9),e._uU(64,"Date Created"),e.qZA(),e._UZ(65,"input",21),e.qZA()(),e.TgZ(66,"div",7)(67,"mat-form-field",8)(68,"mat-label",9),e._uU(69,"Country"),e.qZA(),e._UZ(70,"input",22),e.qZA()(),e.TgZ(71,"div",7)(72,"mat-form-field",8)(73,"mat-label",9),e._uU(74,"Organization"),e.qZA(),e._UZ(75,"input",23),e.qZA()(),e.TgZ(76,"div",7)(77,"mat-form-field",8)(78,"mat-label",9),e._uU(79,"Region"),e.qZA(),e._UZ(80,"input",24),e.qZA()(),e.TgZ(81,"div",7)(82,"mat-form-field",8)(83,"mat-label",9),e._uU(84,"Branch"),e.qZA(),e._UZ(85,"input",25),e.qZA()(),e.TgZ(86,"div",7)(87,"mat-form-field",8)(88,"mat-label",9),e._uU(89,"User Account Type"),e.qZA(),e._UZ(90,"input",26),e.qZA()(),e.TgZ(91,"div",7)(92,"mat-form-field",8)(93,"mat-label",9),e._uU(94,"Role"),e.qZA(),e._UZ(95,"input",27),e.qZA()(),e.TgZ(96,"div",7)(97,"mat-checkbox",28),e.NdJ("change",function(n){return r.toggleAcctStatus(n)}),e._uU(98," Activate/Deactivate "),e.qZA()()(),e.TgZ(99,"div",29)(100,"button",30),e.NdJ("click",function(){return r.return()}),e.TgZ(101,"mat-icon"),e._uU(102,"arrow_back"),e.qZA(),e._uU(103," Back "),e.qZA(),e.TgZ(104,"button",31),e.NdJ("click",function(){return r.update()}),e.TgZ(105,"mat-icon"),e._uU(106,"edit"),e.qZA(),e._uU(107," Update "),e.qZA()()()()()()),2&t){let i,n,l,c,u,p,d;e.xp6(7),e.Q6J("formGroup",r.userForm),e.xp6(7),e.Q6J("ngIf",null==(i=r.userForm.get("firstName"))?null:i.invalid),e.xp6(6),e.Q6J("ngIf",null==(n=r.userForm.get("otherNames"))?null:n.invalid),e.xp6(6),e.Q6J("ngIf",null==(l=r.userForm.get("phoneNumber"))?null:l.invalid),e.xp6(6),e.Q6J("ngIf",null==(c=r.userForm.get("username"))?null:c.invalid),e.xp6(6),e.Q6J("ngIf",null==(u=r.userForm.get("emailAddress"))?null:u.invalid),e.xp6(12),e.Q6J("ngIf",null==(p=r.userForm.get("gender"))?null:p.invalid),e.xp6(47),e.Q6J("checked",null==(d=r.userForm.get("acctStatus"))?null:d.value)}},dependencies:[v.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,T.ey,C.lW,f.a8,f.n5,D.oG,m.TO,m.KE,m.hX,x.Hw,k.Nt,I.gD,g.xw,g.SQ,g.yH,b.X$]}),o})();function eo(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"validations.required")," "))}let to=(()=>{class o{constructor(t,r,i,n,l,c,u,p){this.data=t,this.dialogRef=r,this.fb=i,this.router=n,this.localStorage=l,this.service=c,this.encryptionService=u,this.toaster=p,this.form=this.fb.group({remarks:["",a.kI.required]})}ngOnInit(){}onReview(){this.dialogRef.close("review"),this.router.navigate(["/usermanagement/review-user-account-modifications",this.data?.id])}onClose(){this.dialogRef.close()}onSubmit(){const t={recordId:this.data.id,checkerName:this.localStorage.get("user-entity")?.username,remarks:this.form.value.remarks,approve:!1},r=this.encryptionService.encryptData(t),i=r.split(":")[0],n=r.split(":")[1],l=r.split(":")[2];this.service.approveRejectUserAccountModification(n,i).subscribe(c=>{const u=JSON.parse(c);if(200==u.code||201==u.code){const p=this.encryptionService.decryptData(u?.body,l);p&&(this.toaster.showSuccess(p?.message),this.dialogRef.close("reject"))}else this.toaster.showError(u?.body?.message)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.WI),e.Y36(h.so),e.Y36(a.qu),e.Y36(y.F0),e.Y36(q.n2),e.Y36(Z.K),e.Y36(A.w),e.Y36(F.M))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-reject-user-account-modifications"]],features:[e._Bn([Z.K])],decls:32,vars:3,consts:[["mat-dialog-title","",2,"display","flex","justify-content","space-between","align-items","center"],[2,"flex","1","font-size","20px"],["mat-icon-button","","aria-label","Close dialog",2,"margin","0",3,"click"],["mat-dialog-content",""],[1,"form-field-full",3,"formGroup"],["fxFlex","100","fxFlex.lt-sm","100"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","placeholder","Remarks","formControlName","remarks","required","",2,"font-size","16px"],[4,"ngIf"],["mat-dialog-actions",""],["mat-stroked-button","","color","warn",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2,"Reject User Account Modifications"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return r.onClose()}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA()()(),e.TgZ(6,"div",3)(7,"p"),e._uU(8,"Are you sure you want to Reject "),e.TgZ(9,"strong"),e._uU(10),e.qZA(),e._uU(11,"? Enter Remarks below and Click "),e.TgZ(12,"strong"),e._uU(13,"Reject"),e.qZA(),e._uU(14," to Approve or "),e.TgZ(15,"strong"),e._uU(16,"Review"),e.qZA(),e._uU(17," to view details. "),e.qZA(),e.TgZ(18,"form",4)(19,"div",5)(20,"div",6)(21,"div",5)(22,"mat-form-field",7)(23,"mat-label",8),e._uU(24,"Remarks"),e.qZA(),e._UZ(25,"textarea",9),e.YNc(26,eo,3,3,"mat-error",10),e.qZA()()()()()(),e.TgZ(27,"div",11)(28,"button",12),e.NdJ("click",function(){return r.onReview()}),e._uU(29,"Review"),e.qZA(),e.TgZ(30,"button",13),e.NdJ("click",function(){return r.onSubmit()}),e._uU(31,"Reject"),e.qZA()()),2&t){let i;e.xp6(10),e.Oqu(r.data.username),e.xp6(8),e.Q6J("formGroup",r.form),e.xp6(8),e.Q6J("ngIf",null==(i=r.form.get("remarks"))?null:i.invalid)}},dependencies:[v.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,C.lW,h.uh,h.xY,h.H8,m.TO,m.KE,m.hX,x.Hw,k.Nt,g.xw,g.SQ,g.yH,b.X$]}),o})(),ro=(()=>{class o{constructor(t,r,i,n,l,c,u){this.data=t,this.dialogRef=r,this.router=i,this.localStorage=n,this.service=l,this.encryptionService=c,this.toaster=u}ngOnInit(){}onReview(){this.dialogRef.close("review"),this.router.navigate(["/usermanagement/review-user-account-modifications",this.data?.id])}onApprove(){const t={recordId:this.data.id,checkerName:this.localStorage.get("user-entity")?.username,remarks:"",approve:!0},r=this.encryptionService.encryptData(t),i=r.split(":")[0],n=r.split(":")[1],l=r.split(":")[2];this.service.approveRejectUserAccountModification(n,i).subscribe(c=>{const u=JSON.parse(c);if(200==u.code||201==u.code){const p=this.encryptionService.decryptData(u?.body,l);p&&(this.toaster.showSuccess(p?.message),this.dialogRef.close("approve"))}else this.toaster.showError(u?.body?.message)})}onClose(){this.dialogRef.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.WI),e.Y36(h.so),e.Y36(y.F0),e.Y36(q.n2),e.Y36(Z.K),e.Y36(A.w),e.Y36(F.M))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-approve-user-account-modifications"]],features:[e._Bn([Z.K])],decls:23,vars:1,consts:[["mat-dialog-title","",2,"display","flex","justify-content","space-between","align-items","center"],[2,"flex","1","font-size","20px"],["mat-icon-button","","aria-label","Close dialog",2,"margin","0",3,"click"],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-stroked-button","","color","warn",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2,"Approve User Account Modifications"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return r.onClose()}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA()()(),e.TgZ(6,"div",3)(7,"p"),e._uU(8,"Are you sure you want to Approve "),e.TgZ(9,"strong"),e._uU(10),e.qZA(),e._uU(11,"? Click "),e.TgZ(12,"strong"),e._uU(13,"Approve"),e.qZA(),e._uU(14," to Approve or "),e.TgZ(15,"strong"),e._uU(16,"Review"),e.qZA(),e._uU(17," to review details. "),e.qZA()(),e.TgZ(18,"div",4)(19,"button",5),e.NdJ("click",function(){return r.onReview()}),e._uU(20,"Review"),e.qZA(),e.TgZ(21,"button",6),e.NdJ("click",function(){return r.onApprove()}),e._uU(22,"Approve"),e.qZA()()),2&t&&(e.xp6(10),e.Oqu(r.data.username))},dependencies:[C.lW,h.uh,h.xY,h.H8,x.Hw]}),o})();function oo(o,s){if(1&o&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}const io=function(){return[5,10,20,50,100]};let no=(()=>{class o{constructor(t,r,i,n,l,c,u,p){this.remoteSrv=t,this.organizationService=r,this.localStorage=i,this.cdr=n,this.encryptionservice=l,this.router=c,this.translate=u,this.dialog=p,this.columns=[{header:"First Name",field:"firstName"},{header:"Last Name",field:"otherNames"},{header:"Phone Nuber",field:"phoneNumber"},{header:"Email",field:"emailAddress"},{header:"Gender",field:"gender"},{header:"User Name",field:"username"},{header:"Modification Status",field:"changeStatus"},{header:this.translate.stream("table_kitchen_sink.actions"),field:"actions",width:"auto",pinned:"right",type:"button",buttons:[{type:"icon",icon:"visibility",color:"primary",tooltip:this.translate.stream("table_kitchen_sink.view_details"),click:d=>this.viewDetailedRecord(d)},{type:"icon",color:"accent",icon:"check_circle",tooltip:this.translate.stream("table_kitchen_sink.approve"),click:d=>this.openApproveDialog(d),disabled:d=>d.modifiedBy==this.username||"Approved"==d.changeStatus},{type:"icon",icon:"cancel",color:"warn",tooltip:this.translate.stream("table_kitchen_sink.reject"),click:d=>this.openRejectDialog(d),disabled:d=>d.modifiedBy==this.username||"Approved"==d.changeStatus}]}],this.list=[],this.selectedRegion=0,this.filters=[],this.selectedFilter="",this.total=0,this.isLoading=!0,this.query={q:"",sort:"",order:"",page:0,per_page:10}}get params(){const t=Object.assign({},this.query);return t.page+=1,t}ngOnInit(){this.getUsers(),this.getRegions()}getRegions(){const t=this.encryptionservice.generateAesKey(),r=this.encryptionservice.generatebase64Key(t),i=this.encryptionservice.encryptWithRSA(r);this.organizationService.allOrganizations(i).subscribe(n=>{const l=JSON.parse(n),c=this.encryptionservice.decryptData(l?.body,r);this.regions=c},n=>{console.error("Error fetching regions:",n)})}onRegionChange(t){this.selectedRegion=t.value,this.getUsers()}getUsers(){const t=this.localStorage.get("user-entity");this.username=t?.username,this.organization=t?.organization?.id;const i=this.encryptionservice.encryptData({status:this.selectedFilter,page:this.query.page,size:this.query.per_page,branch:0,accountType:0,organization:this.organization});this.remoteSrv.getCountryUsersModificationsReviewList(i.split(":")[0],i.split(":")[1]).subscribe(n=>{const l=JSON.parse(n),c=this.encryptionservice.decryptData(l?.body,i.split(":")[2]);this.list=c.data.content,this.total=c.data.total,this.filters=c.changeStatuses,this.isLoading=!1,this.cdr.detectChanges()},n=>{console.error("Error fetching user accounts:",n)})}viewDetailedRecord(t){var r=t?.id;r&&this.router.navigate(["/usermanagement/review-user-account-modifications",r])}getNextPage(t){this.query.page=t.pageIndex,this.query.per_page=t.pageSize,this.getUsers()}search(){this.query.page=0,this.getUsers()}onFilterChange(t){this.selectedFilter=t.value,"Country"!=this.selectedFilter&&this.getUsers()}openApproveDialog(t){this.dialog.open(ro,{width:"400px",data:t}).afterClosed().subscribe(()=>{this.getUsers()})}openRejectDialog(t){this.dialog.open(to,{width:"400px",data:t}).afterClosed().subscribe(()=>{this.getUsers()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z.K),e.Y36(P.w),e.Y36(q.n2),e.Y36(e.sBO),e.Y36(A.w),e.Y36(y.F0),e.Y36(b.sK),e.Y36(h.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-country-users-modifications-review-list"]],features:[e._Bn([Z.K,M.K])],decls:22,vars:13,consts:[[2,"border","1px solid #ccc","padding","16px"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"col"],[2,"margin","0"],[1,"d-flex","justify-content-between","w-100","flex-wrap"],["fxFlex","33.33%","fxFlex.lt-sm","100%",1,"px-2"],["appearance","outline",2,"width","100%"],["name","selectedFilter",3,"ngModel","ngModelChange","selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["fxFlex","39.34%","fxFlex.lt-sm","100%",1,"d-flex","justify-content-between","align-items-center","px-2"],["fxFlex","27.33%","fxFlex.lt-sm","100%",1,"px-2"],["matPrefix",""],["matInput","","name","q","placeholder","Search",3,"ngModel","ngModelChange"],[3,"data","columns","length","loading","rowStriped","pageOnFront","pageIndex","pageSize","pageSizeOptions","rowClick","page"],[3,"value"]],template:function(t,r){1&t&&(e.TgZ(0,"div")(1,"mat-card",0)(2,"div",1)(3,"div",2)(4,"h2",3),e._uU(5,"User Accounts Modifications Approval"),e.qZA()()()(),e.TgZ(6,"div",4)(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),e._uU(10,"Status"),e.qZA(),e.TgZ(11,"mat-select",7),e.NdJ("ngModelChange",function(n){return r.selectedFilter=n})("selectionChange",function(n){return r.onFilterChange(n)}),e.TgZ(12,"mat-option",8),e._uU(13,"-- Select --"),e.qZA(),e.YNc(14,oo,2,2,"mat-option",9),e.qZA()()(),e._UZ(15,"div",10),e.TgZ(16,"div",11)(17,"mat-form-field",6)(18,"mat-icon",12),e._uU(19,"search"),e.qZA(),e.TgZ(20,"input",13),e.NdJ("ngModelChange",function(n){return r.query.q=n}),e.qZA()()()(),e.TgZ(21,"mtx-grid",14),e.NdJ("rowClick",function(n){return r.viewDetailedRecord(n)})("page",function(n){return r.getNextPage(n)}),e.qZA()()),2&t&&(e.xp6(11),e.Q6J("ngModel",r.selectedFilter),e.xp6(3),e.Q6J("ngForOf",r.filters),e.xp6(6),e.Q6J("ngModel",r.query.q),e.xp6(1),e.Q6J("data",r.list)("columns",r.columns)("length",r.total)("loading",r.isLoading)("rowStriped",!0)("pageOnFront",!1)("pageIndex",r.query.page)("pageSize",r.query.per_page)("pageSizeOptions",e.DdM(12,io)))},dependencies:[v.sg,a.Fj,a.JJ,a.On,T.ey,f.a8,m.KE,m.hX,m.qo,x.Hw,k.Nt,I.gD,O.CM,g.yH]}),o})(),ao=(()=>{class o{constructor(t,r,i,n,l,c,u){this.userService=t,this.encryptionService=r,this.route=i,this.fb=n,this.dateAdapter=l,this.translate=c,this.router=u,this.isLoading=!0,this.userForm=this.fb.nonNullable.group({firstName:["",[a.kI.required,a.kI.maxLength(50)]],otherNames:["",[a.kI.required,a.kI.maxLength(100)]],emailAddress:["",[a.kI.required,a.kI.email]],username:["",[a.kI.required,a.kI.maxLength(30)]],phoneNumber:["",[a.kI.required,a.kI.pattern("^[0-9]{10}$")]],gender:["",a.kI.required],userId:[""],createdBy:[""],createdOn:[],approvalStatus:[""],status:[""],checkedBy:[""],checkedOn:[""],modifiedBy:[""],modifiedOn:[""],role:[""],branch:[""],region:[""],userType:[""],country:[""],organization:[""],acctStatus:[!1]}),this.oldUserForm=this.fb.nonNullable.group({firstName:["",[a.kI.required,a.kI.maxLength(50)]],otherNames:["",[a.kI.required,a.kI.maxLength(100)]],emailAddress:["",[a.kI.required,a.kI.email]],username:["",[a.kI.required,a.kI.maxLength(30)]],phoneNumber:["",[a.kI.required,a.kI.pattern("^[0-9]{10}$")]],gender:["",a.kI.required],userId:[""],createdBy:[""],createdOn:[],approvalStatus:[""],status:[""],checkedBy:[""],checkedOn:[""],modifiedBy:[""],modifiedOn:[""],role:[""],branch:[""],region:[""],userType:[""],country:[""],organization:[""],acctStatus:[!1]})}ngOnDestroy(){this.translateSubscription.unsubscribe()}ngOnInit(){this.userId=this.route.snapshot.paramMap.get("id"),this.getUserProfile(),this.translateSubscription=this.translate.onLangChange.subscribe(t=>{this.dateAdapter.setLocale(t.lang)})}getUserProfile(){const t=this.encryptionService.generateAesKey(),r=this.encryptionService.generatebase64Key(t),i=this.encryptionService.encryptWithRSA(r);this.userService.getUserProfile(this.userId,i).subscribe(n=>{const l=JSON.parse(n);this.profile=this.encryptionService.decryptData(l?.body,r),this.profile&&(this.newProfile=JSON.parse(this.profile?.changedValues),this.oldUserForm.patchValue({firstName:this.profile?.firstName||"",otherNames:this.profile?.otherNames||"",emailAddress:this.profile?.emailAddress||"",username:this.profile?.username||"",phoneNumber:this.profile?.phoneNumber||"",gender:this.profile?.gender||"",createdBy:this.profile?.createdBy||"",createdOn:this.profile?.createdOn||"",status:this.profile?.status,approvalStatus:this.profile?.changeStatus||"",modifiedBy:this.profile?.modifiedBy||"",modifiedOn:this.profile?.modifiedOn||"",checkedBy:this.profile?.checkedBy||"",checkedOn:this.profile?.checkedOn||"",userId:this.profile?.userId||"",userType:this.profile?.accountType?.name||"",role:this.profile?.roles[0]?.name,country:this.profile?.organization?.country?.name,organization:this.profile?.organization?.name,region:this.profile?.branch?.region?.name,branch:this.profile?.branch?.name,acctStatus:"Active"===this.profile?.status}),this.userForm.patchValue({firstName:this.newProfile?.firstName||"",otherNames:this.newProfile?.otherNames||"",emailAddress:this.newProfile?.emailAddress||"",username:this.newProfile?.username||"",phoneNumber:this.newProfile?.phoneNumber||"",gender:this.newProfile?.gender||"",createdBy:this.newProfile?.createdBy||"",createdOn:this.newProfile?.createdOn||"",status:this.newProfile?.status,approvalStatus:this.newProfile?.changeStatus||"",modifiedBy:this.newProfile?.modifiedBy||"",modifiedOn:this.newProfile?.modifiedOn||"",checkedBy:this.newProfile?.checkedBy||"",checkedOn:this.newProfile?.checkedOn||"",userId:this.newProfile?.userId||"",userType:this.newProfile?.accountType?.name||"",role:this.newProfile?.roles[0]?.name,country:this.newProfile?.organization?.country?.name,organization:this.newProfile?.organization?.name,region:this.newProfile?.branch?.region?.name,branch:this.newProfile?.branch?.name,acctStatus:"Active"===this.newProfile?.status})),this.isLoading=!1},n=>{console.error("Error fetching user profile:",n),this.isLoading=!1})}return(){this.router.navigateByUrl("/usermanagement/country-users-modifications-review")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z.K),e.Y36(A.w),e.Y36(y.gz),e.Y36(a.qu),e.Y36(T._A),e.Y36(b.sK),e.Y36(y.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-view-user-account-modified-details"]],features:[e._Bn([Z.K])],decls:210,vars:2,consts:[[2,"display","flex","align-items","flex-start","height","100vh","width","100%","overflow-x","hidden"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","16px","overflow-x","hidden"],["label","New User Account Details"],[2,"font-size","24px","margin-bottom","4px","margin-top","5px","font-family","'Inter', sans-serif","color","#304254"],[2,"font-weight","normal","opacity","0.6","margin-top","0","padding","0"],[1,"form-field-full",2,"overflow-x","hidden",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","5px grid"],["fxFlex","33.33","fxFlex.lt-sm","100"],["appearance","outline",2,"width","100%"],[2,"font-size","16px"],["matInput","","readonly","","placeholder","First Name","formControlName","firstName","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Other Name","formControlName","otherNames","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Phone number","formControlName","phoneNumber","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","User Name","formControlName","username","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Email","formControlName","emailAddress","required","",2,"font-size","16px"],["matInput","","readonly","","placeholder","Gender","formControlName","gender","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","User Id","formControlName","userId","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Country","formControlName","country","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Organization","formControlName","organization","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Region","formControlName","region","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Branch","formControlName","branch","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","User Account Type","formControlName","userType","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Role","formControlName","role","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Created By","formControlName","createdBy","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Date Created","formControlName","createdOn","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Modified By","formControlName","modifiedBy","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Modified On","formControlName","modifiedOn","required","",2,"font-size","16px"],["readonly","","matInput","","placeholder","Account Status","formControlName","status","required","",2,"font-size","16px"],[1,"d-flex","justify-content-between","flex-wrap",2,"margin-top","24px"],["mat-raised-button","",2,"background-color","#3d3d3d","color","white","font-size","14px","margin-right","10px",3,"click"],["label","Old User Account Details"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-tab-group")(4,"mat-tab",3)(5,"mat-card-title",4),e._uU(6," User Account Details After Modification "),e.qZA(),e.TgZ(7,"h6",5),e._uU(8," Review User Account Modification Details "),e.qZA(),e.TgZ(9,"mat-card-content")(10,"form",6)(11,"div",7)(12,"div",8)(13,"mat-form-field",9)(14,"mat-label",10),e._uU(15,"First Name"),e.qZA(),e._UZ(16,"input",11),e.qZA()(),e.TgZ(17,"div",8)(18,"mat-form-field",9)(19,"mat-label",10),e._uU(20,"Other Name"),e.qZA(),e._UZ(21,"input",12),e.qZA()(),e.TgZ(22,"div",8)(23,"mat-form-field",9)(24,"mat-label",10),e._uU(25,"Phone Number"),e.qZA(),e._UZ(26,"input",13),e.qZA()(),e.TgZ(27,"div",8)(28,"mat-form-field",9)(29,"mat-label",10),e._uU(30,"User Name"),e.qZA(),e._UZ(31,"input",14),e.qZA()(),e.TgZ(32,"div",8)(33,"mat-form-field",9)(34,"mat-label",10),e._uU(35,"Email"),e.qZA(),e._UZ(36,"input",15),e.qZA()(),e.TgZ(37,"div",8)(38,"mat-form-field",9)(39,"mat-label",10),e._uU(40,"Gender"),e.qZA(),e._UZ(41,"input",16),e.qZA()(),e.TgZ(42,"div",8)(43,"mat-form-field",9)(44,"mat-label",10),e._uU(45,"User Id"),e.qZA(),e._UZ(46,"input",17),e.qZA()(),e.TgZ(47,"div",8)(48,"mat-form-field",9)(49,"mat-label",10),e._uU(50,"Country"),e.qZA(),e._UZ(51,"input",18),e.qZA()(),e.TgZ(52,"div",8)(53,"mat-form-field",9)(54,"mat-label",10),e._uU(55,"Organization"),e.qZA(),e._UZ(56,"input",19),e.qZA()(),e.TgZ(57,"div",8)(58,"mat-form-field",9)(59,"mat-label",10),e._uU(60,"Region"),e.qZA(),e._UZ(61,"input",20),e.qZA()(),e.TgZ(62,"div",8)(63,"mat-form-field",9)(64,"mat-label",10),e._uU(65,"Branch"),e.qZA(),e._UZ(66,"input",21),e.qZA()(),e.TgZ(67,"div",8)(68,"mat-form-field",9)(69,"mat-label",10),e._uU(70,"User Account Type"),e.qZA(),e._UZ(71,"input",22),e.qZA()(),e.TgZ(72,"div",8)(73,"mat-form-field",9)(74,"mat-label",10),e._uU(75,"Role"),e.qZA(),e._UZ(76,"input",23),e.qZA()(),e.TgZ(77,"div",8)(78,"mat-form-field",9)(79,"mat-label",10),e._uU(80,"Created By"),e.qZA(),e._UZ(81,"input",24),e.qZA()(),e.TgZ(82,"div",8)(83,"mat-form-field",9)(84,"mat-label",10),e._uU(85,"Date Created"),e.qZA(),e._UZ(86,"input",25),e.qZA()(),e.TgZ(87,"div",8)(88,"mat-form-field",9)(89,"mat-label",10),e._uU(90,"Modified By"),e.qZA(),e._UZ(91,"input",26),e.qZA()(),e.TgZ(92,"div",8)(93,"mat-form-field",9)(94,"mat-label",10),e._uU(95,"Modified On"),e.qZA(),e._UZ(96,"input",27),e.qZA()(),e.TgZ(97,"div",8)(98,"mat-form-field",9)(99,"mat-label",10),e._uU(100,"Account Status"),e.qZA(),e._UZ(101,"input",28),e.qZA()()(),e.TgZ(102,"div",29)(103,"button",30),e.NdJ("click",function(){return r.return()}),e.TgZ(104,"mat-icon"),e._uU(105,"arrow_back"),e.qZA(),e._uU(106," Back "),e.qZA()()()()(),e.TgZ(107,"mat-tab",31)(108,"mat-card-title",4),e._uU(109," User Account Details Before Modification "),e.qZA(),e.TgZ(110,"h6",5),e._uU(111," Review User Account Modification Details "),e.qZA(),e.TgZ(112,"mat-card-content")(113,"form",6)(114,"div",7)(115,"div",8)(116,"mat-form-field",9)(117,"mat-label",10),e._uU(118,"First Name"),e.qZA(),e._UZ(119,"input",11),e.qZA()(),e.TgZ(120,"div",8)(121,"mat-form-field",9)(122,"mat-label",10),e._uU(123,"Other Name"),e.qZA(),e._UZ(124,"input",12),e.qZA()(),e.TgZ(125,"div",8)(126,"mat-form-field",9)(127,"mat-label",10),e._uU(128,"Phone Number"),e.qZA(),e._UZ(129,"input",13),e.qZA()(),e.TgZ(130,"div",8)(131,"mat-form-field",9)(132,"mat-label",10),e._uU(133,"User Name"),e.qZA(),e._UZ(134,"input",14),e.qZA()(),e.TgZ(135,"div",8)(136,"mat-form-field",9)(137,"mat-label",10),e._uU(138,"Email"),e.qZA(),e._UZ(139,"input",15),e.qZA()(),e.TgZ(140,"div",8)(141,"mat-form-field",9)(142,"mat-label",10),e._uU(143,"Gender"),e.qZA(),e._UZ(144,"input",16),e.qZA()(),e.TgZ(145,"div",8)(146,"mat-form-field",9)(147,"mat-label",10),e._uU(148,"User Id"),e.qZA(),e._UZ(149,"input",17),e.qZA()(),e.TgZ(150,"div",8)(151,"mat-form-field",9)(152,"mat-label",10),e._uU(153,"Country"),e.qZA(),e._UZ(154,"input",18),e.qZA()(),e.TgZ(155,"div",8)(156,"mat-form-field",9)(157,"mat-label",10),e._uU(158,"Organization"),e.qZA(),e._UZ(159,"input",19),e.qZA()(),e.TgZ(160,"div",8)(161,"mat-form-field",9)(162,"mat-label",10),e._uU(163,"Region"),e.qZA(),e._UZ(164,"input",20),e.qZA()(),e.TgZ(165,"div",8)(166,"mat-form-field",9)(167,"mat-label",10),e._uU(168,"Branch"),e.qZA(),e._UZ(169,"input",21),e.qZA()(),e.TgZ(170,"div",8)(171,"mat-form-field",9)(172,"mat-label",10),e._uU(173,"User Account Type"),e.qZA(),e._UZ(174,"input",22),e.qZA()(),e.TgZ(175,"div",8)(176,"mat-form-field",9)(177,"mat-label",10),e._uU(178,"Role"),e.qZA(),e._UZ(179,"input",23),e.qZA()(),e.TgZ(180,"div",8)(181,"mat-form-field",9)(182,"mat-label",10),e._uU(183,"Created By"),e.qZA(),e._UZ(184,"input",24),e.qZA()(),e.TgZ(185,"div",8)(186,"mat-form-field",9)(187,"mat-label",10),e._uU(188,"Date Created"),e.qZA(),e._UZ(189,"input",25),e.qZA()(),e.TgZ(190,"div",8)(191,"mat-form-field",9)(192,"mat-label",10),e._uU(193,"Modified By"),e.qZA(),e._UZ(194,"input",26),e.qZA()(),e.TgZ(195,"div",8)(196,"mat-form-field",9)(197,"mat-label",10),e._uU(198,"Modified On"),e.qZA(),e._UZ(199,"input",27),e.qZA()(),e.TgZ(200,"div",8)(201,"mat-form-field",9)(202,"mat-label",10),e._uU(203,"Account Status"),e.qZA(),e._UZ(204,"input",28),e.qZA()()(),e.TgZ(205,"div",29)(206,"button",30),e.NdJ("click",function(){return r.return()}),e.TgZ(207,"mat-icon"),e._uU(208,"arrow_back"),e.qZA(),e._uU(209," Back "),e.qZA()()()()()()()()()),2&t&&(e.xp6(10),e.Q6J("formGroup",r.userForm),e.xp6(103),e.Q6J("formGroup",r.oldUserForm))},dependencies:[a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,C.lW,f.a8,f.dn,f.n5,m.KE,m.hX,x.Hw,k.Nt,B.SP,B.uX,g.xw,g.SQ,g.yH]}),o})(),so=(()=>{class o{constructor(t,r,i,n,l,c){this.data=t,this.dialogRef=r,this.localStorage=i,this.service=n,this.encryptionService=l,this.toaster=c}ngOnInit(){}onApprove(){const t={username:this.data.username,adminName:this.localStorage.get("user-entity")?.username},r=this.encryptionService.encryptData(t),i=r.split(":")[0],n=r.split(":")[1],l=r.split(":")[2];this.service.adminResetUserPassword(n,i).subscribe(c=>{const u=JSON.parse(c);if(200==u.code||201==u.code){const p=this.encryptionService.decryptData(u?.body,l);p&&(this.toaster.showSuccess(p?.message),this.dialogRef.close("approve"))}else this.toaster.showError(u?.body?.message)})}onClose(){this.dialogRef.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.WI),e.Y36(h.so),e.Y36(q.n2),e.Y36(Z.K),e.Y36(A.w),e.Y36(F.M))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-admin-change-user-password"]],features:[e._Bn([Z.K])],decls:15,vars:1,consts:[["mat-dialog-title","",2,"display","flex","justify-content","space-between","align-items","center"],[2,"flex","1","font-size","20px"],["mat-icon-button","","aria-label","Close dialog",2,"margin","0",3,"click"],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-raised-button","","color","warn",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2,"Reset User Password"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return r.onClose()}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA()()(),e.TgZ(6,"div",3)(7,"p"),e._uU(8,"Are you sure you want to Reset "),e.TgZ(9,"strong"),e._uU(10),e.qZA(),e._uU(11," Password? "),e.qZA()(),e.TgZ(12,"div",4)(13,"button",5),e.NdJ("click",function(){return r.onApprove()}),e._uU(14,"Reset Password"),e.qZA()()),2&t&&(e.xp6(10),e.Oqu(r.data.username))},dependencies:[C.lW,h.uh,h.xY,h.H8,x.Hw]}),o})();const lo=["actionTemplate"];function co(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",6)(1,"mat-icon"),e._uU(2,"more_horiz"),e.qZA()(),e.TgZ(3,"mat-menu",null,7)(5,"button",8),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.openDialog(n))}),e.TgZ(6,"mat-icon"),e._uU(7,"setting"),e.qZA(),e._uU(8," Reset "),e.qZA()()}if(2&o){const t=e.MAs(4);e.Q6J("matMenuTriggerFor",t)}}const uo=function(){return[5,10,20,50,100]};let po=(()=>{class o{constructor(t,r,i,n,l,c,u,p){this.remoteSrv=t,this.cdr=r,this.encryptionservice=i,this.router=n,this.translate=l,this.dialog=c,this.diag1=u,this.localStorage=p,this.columns=[],this.list=[],this.total=0,this.isLoading=!0,this.query={q:"",sort:"",order:"",page:0,per_page:10}}ngAfterViewInit(){this.columns=[{header:"Received From",field:"username"},{header:"Received On",field:"dateSent"},{header:this.translate.stream("table_kitchen_sink.actions"),field:"actions",cellTemplate:this.actionTemplate}]}get params(){const t=Object.assign({},this.query);return t.page+=1,t}ngOnInit(){this.getPasswordResets()}getPasswordResets(){const t=this.localStorage.get("user-entity"),i=this.encryptionservice.encryptData({status:"",page:this.query.page,size:this.query.per_page,username:t?.username}),n=i.split(":")[2],l=i.split(":")[1],c=i.split(":")[0];this.remoteSrv.getPasswordRequests(c,l).subscribe(u=>{const p=JSON.parse(u),d=this.encryptionservice.decryptData(p?.body,n);this.list=d.data.content,this.total=d.data.total,this.isLoading=!1,this.cdr.detectChanges()},u=>{console.error("Error fetching roles:",u),this.isLoading=!1})}openDialog(t){this.dialog.open(so,{width:"400px",data:t}).afterClosed().subscribe(()=>{this.getPasswordResets()})}getNextPage(t){this.query.page=t.pageIndex,this.query.per_page=t.pageSize,this.getPasswordResets()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z.K),e.Y36(e.sBO),e.Y36(A.w),e.Y36(y.F0),e.Y36(b.sK),e.Y36(h.uw),e.Y36(Y.cP),e.Y36(q.n2))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-user-password-change-requests"]],viewQuery:function(t,r){if(1&t&&e.Gf(lo,7),2&t){let i;e.iGM(i=e.CRH())&&(r.actionTemplate=i.first)}},features:[e._Bn([Z.K])],decls:8,vars:10,consts:[[2,"border","1px solid #ccc","padding","16px"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"col"],[2,"margin","0"],[3,"data","columns","length","loading","rowStriped","pageOnFront","pageIndex","pageSize","pageSizeOptions","page"],["actionTemplate",""],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Password Change Requests"),e.qZA()()()(),e.TgZ(5,"mtx-grid",4),e.NdJ("page",function(n){return r.getNextPage(n)}),e.qZA(),e.YNc(6,co,9,1,"ng-template",null,5,e.W1O)),2&t&&(e.xp6(5),e.Q6J("data",r.list)("columns",r.columns)("length",r.total)("loading",r.isLoading)("rowStriped",!0)("pageOnFront",!1)("pageIndex",r.query.page)("pageSize",r.query.per_page)("pageSizeOptions",e.DdM(9,uo)))},dependencies:[C.lW,f.a8,x.Hw,N.VK,N.OP,N.p6,O.CM]}),o})();function mo(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.downloadProcessingResults())}),e._uU(1," Download Results "),e.qZA()}}let se=(()=>{class o{constructor(t,r,i,n){this.usersService=t,this.toaster=r,this.localStorage=i,this.router=n,this.showDownload=!1}ngOnInit(){this.username=this.localStorage.get("user-entity")?.username}onFileSelected(t){this.selectedFile=t.target.files[0]}downloadTemplate(){this.usersService.downloadUserUploadTemplate("admin_user_account_upload_template.csv").subscribe(t=>{const r=new Blob([t],{type:"text/csv"}),i=window.URL.createObjectURL(r),n=document.createElement("a");n.href=i,n.download="admin_user_account_upload_template.csv",n.click(),window.URL.revokeObjectURL(i)})}downloadProcessingResults(){this.usersService.downloadProcessingResults(this.processingResultsFile).subscribe(t=>{const r=new Blob([t],{type:"text/csv"}),i=window.URL.createObjectURL(r),n=document.createElement("a");n.href=i,n.download=this.processingResultsFile,n.click(),window.URL.revokeObjectURL(i)})}uploadFile(){const t=new FormData;t.append("file",this.selectedFile),this.usersService.bulkUploadCountryAdmins(t,this.username).subscribe(r=>{this.processingResultsFile=r?.filename,this.showDownload=!0,this.toaster.showSuccess(r?.status+" | "+r?.message)},r=>{this.toaster.showError("Error uploading file | "+r)})}goBack(){window.history.back()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z.K),e.Y36(F.M),e.Y36(q.n2),e.Y36(y.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-country-admins-bulk-upload"]],features:[e._Bn([Z.K])],decls:37,vars:2,consts:[[2,"margin-bottom","5px","margin-left","5px"],["mat-raised-button","","color","primary",3,"click"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","24px","border","2px solid #304254","border-radius","8px"],[2,"font-size","24px","margin-bottom","4px","color","#304254"],[2,"font-weight","normal","opacity","0.6","margin-top","0","padding","0"],["fxLayout","row wrap","fxLayoutGap","16px grid",1,"form-field-full"],["fxFlex","70","fxFlex.lt-sm","100"],["fxFlex","30","fxFlex.lt-sm","100"],["type","file","accept",".csv",1,"form-control","me-2",2,"display","flex","background-color","#c0aaa8","color","#74C84D","width","100%","margin-bottom","7px","padding-left","10px","padding-top","10px","padding-bottom","10px","border-radius","4px","border","2px solid #74C84D","font-size","16px","border","none",3,"change"],["mat-raised-button","",2,"display","flex","background-color","#c0aaa8","color","#74C84D","width","100%","padding-top","10px","padding-bottom","10px","margin-top","7px","border-radius","4px","border","2px solid #74C84D","font-size","16px","border","none",3,"click"],[1,"d-flex","justify-content-between","flex-wrap",2,"margin-top","24px"],["mat-raised-button","",2,"background-color","#74C84D","color","white",3,"disabled","click"],["mat-raised-button","","color","primary","style","color:white;margin-left: 5px;",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",2,"color","white","margin-left","5px",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return r.goBack()}),e.TgZ(2,"mat-icon"),e._uU(3,"arrow_back"),e.qZA()()(),e.TgZ(4,"div")(5,"div",2)(6,"mat-card",3)(7,"mat-card-title",4),e._uU(8," Import Administrators "),e.qZA(),e.TgZ(9,"h6",5),e._uU(10,"Import Country Admin Users"),e.qZA(),e.TgZ(11,"div",6)(12,"div",7)(13,"h3"),e._uU(14,"Upload Your Data File"),e.qZA(),e.TgZ(15,"p"),e._uU(16,"Use the Upload File button to upload your prepared admin user accounts data."),e.qZA(),e.TgZ(17,"h3"),e._uU(18,"Download a Sample File"),e.qZA(),e.TgZ(19,"p"),e._uU(20,"If you need a template, click Download Sample Sheet to guide you in formatting your data correctly."),e.qZA(),e.TgZ(21,"h3"),e._uU(22,"Processing Report"),e.qZA(),e.TgZ(23,"p"),e._uU(24,"After Processing, a Download Result Sheet button will appear. Use it to download the processing results."),e.qZA()(),e.TgZ(25,"div",8)(26,"input",9),e.NdJ("change",function(n){return r.onFileSelected(n)}),e.qZA(),e.TgZ(27,"button",10),e.NdJ("click",function(){return r.downloadTemplate()}),e.TgZ(28,"mat-icon"),e._uU(29," cloud_download "),e.qZA(),e._uU(30," Download Template "),e.qZA()()(),e.TgZ(31,"div",11)(32,"button",12),e.NdJ("click",function(){return r.uploadFile()}),e.TgZ(33,"mat-icon"),e._uU(34," cloud_circle "),e.qZA(),e._uU(35," Save & Submit"),e.qZA(),e.YNc(36,mo,2,0,"button",13),e.qZA()()()()),2&t&&(e.xp6(32),e.Q6J("disabled",!r.selectedFile),e.xp6(4),e.Q6J("ngIf",r.showDownload))},dependencies:[v.O5,C.lW,f.a8,f.n5,x.Hw,g.xw,g.SQ,g.yH]}),o})();function go(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.downloadProcessingResults())}),e._uU(1," Download Results "),e.qZA()}}function ho(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.downloadProcessingResults())}),e._uU(1," Download Results "),e.qZA()}}const fo=[{path:"superadminusers",component:G},{path:"create-user",component:K},{path:"bulk-create-superadmin",component:(()=>{class o{constructor(t,r,i,n){this.usersService=t,this.toaster=r,this.localStorage=i,this.router=n,this.showDownload=!1}ngOnInit(){this.username=this.localStorage.get("user-entity")?.username}onFileSelected(t){this.selectedFile=t.target.files[0]}downloadTemplate(){this.usersService.downloadUserUploadTemplate("super_admin_user_account_upload_template.csv").subscribe(t=>{const r=new Blob([t],{type:"text/csv"}),i=window.URL.createObjectURL(r),n=document.createElement("a");n.href=i,n.download="super_admin_user_account_upload_template.csv",n.click(),window.URL.revokeObjectURL(i)})}downloadProcessingResults(){this.usersService.downloadProcessingResults(this.processingResultsFile).subscribe(t=>{const r=new Blob([t],{type:"text/csv"}),i=window.URL.createObjectURL(r),n=document.createElement("a");n.href=i,n.download=this.processingResultsFile,n.click(),window.URL.revokeObjectURL(i)})}uploadFile(){const t=new FormData;t.append("file",this.selectedFile),this.usersService.bulkUploadSuperAdmins(t,this.username).subscribe(r=>{this.processingResultsFile=r?.filename,this.showDownload=!0,this.toaster.showSuccess(r?.status+" | "+r?.message)},r=>{this.toaster.showError("Error uploading file | "+r)})}goBack(){window.history.back()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z.K),e.Y36(F.M),e.Y36(q.n2),e.Y36(y.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-superadmins-upload"]],features:[e._Bn([Z.K])],decls:37,vars:2,consts:[[2,"margin-bottom","5px","margin-left","5px"],["mat-raised-button","","color","primary",3,"click"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","24px","border","2px solid #304254","border-radius","8px"],[2,"font-size","24px","margin-bottom","4px","color","#304254"],[2,"font-weight","normal","opacity","0.6","margin-top","0","padding","0"],["fxLayout","row wrap","fxLayoutGap","16px grid",1,"form-field-full"],["fxFlex","70","fxFlex.lt-sm","100"],["fxFlex","30","fxFlex.lt-sm","100"],["type","file","accept",".csv",1,"form-control","me-2",2,"display","flex","background-color","#c0aaa8","color","#74C84D","width","100%","margin-bottom","7px","padding-left","10px","padding-top","10px","padding-bottom","10px","border-radius","4px","border","2px solid #74C84D","font-size","16px","border","none",3,"change"],["mat-raised-button","",2,"display","flex","background-color","#c0aaa8","color","#74C84D","width","100%","padding-top","10px","padding-bottom","10px","margin-top","7px","border-radius","4px","border","2px solid #74C84D","font-size","16px","border","none",3,"click"],[1,"d-flex","justify-content-between","flex-wrap",2,"margin-top","24px"],["mat-raised-button","",2,"background-color","#74C84D","color","white",3,"disabled","click"],["mat-raised-button","","color","primary","style","color:white;margin-left: 5px;",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",2,"color","white","margin-left","5px",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return r.goBack()}),e.TgZ(2,"mat-icon"),e._uU(3,"arrow_back"),e.qZA()()(),e.TgZ(4,"div")(5,"div",2)(6,"mat-card",3)(7,"mat-card-title",4),e._uU(8," Import Super Administrators "),e.qZA(),e.TgZ(9,"h6",5),e._uU(10,"Import Super Admin Users"),e.qZA(),e.TgZ(11,"div",6)(12,"div",7)(13,"h3"),e._uU(14,"Upload Your Data File"),e.qZA(),e.TgZ(15,"p"),e._uU(16,"Use the Upload File button to upload your prepared super admin user accounts data."),e.qZA(),e.TgZ(17,"h3"),e._uU(18,"Download a Sample File"),e.qZA(),e.TgZ(19,"p"),e._uU(20,"If you need a template, click Download Sample Sheet to guide you in formatting your data correctly."),e.qZA(),e.TgZ(21,"h3"),e._uU(22,"Processing Report"),e.qZA(),e.TgZ(23,"p"),e._uU(24,"After Processing, a Download Result Sheet button will appear. Use it to download the processing results."),e.qZA()(),e.TgZ(25,"div",8)(26,"input",9),e.NdJ("change",function(n){return r.onFileSelected(n)}),e.qZA(),e.TgZ(27,"button",10),e.NdJ("click",function(){return r.downloadTemplate()}),e.TgZ(28,"mat-icon"),e._uU(29," cloud_download "),e.qZA(),e._uU(30," Download Template "),e.qZA()()(),e.TgZ(31,"div",11)(32,"button",12),e.NdJ("click",function(){return r.uploadFile()}),e.TgZ(33,"mat-icon"),e._uU(34," cloud_circle "),e.qZA(),e._uU(35," Save & Submit"),e.qZA(),e.YNc(36,go,2,0,"button",13),e.qZA()()()()),2&t&&(e.xp6(32),e.Q6J("disabled",!r.selectedFile),e.xp6(4),e.Q6J("ngIf",r.showDownload))},dependencies:[v.O5,C.lW,f.a8,f.n5,x.Hw,g.xw,g.SQ,g.yH]}),o})()},{path:"create-superadmin-user",component:K},{path:"edituser",component:X},{path:"roles",component:H},{path:"admin-roles",component:Sr},{path:"manage-admin-role/:id",component:Rr},{path:"create-role",component:W},{path:"permissions",component:te},{path:"manage-account/:id",component:re},{path:"manage-role/:id",component:oe},{path:"adminusers",component:ie},{path:"create-country-admin",component:ne},{path:"country-admin-bulk",component:se},{path:"manage-admin/:id",component:ae},{path:"country-users",component:lr},{path:"country-users-review",component:Qr},{path:"country-users-modifications-review",component:no},{path:"create-user-account",component:Ar},{path:"bulk-create-user-account",component:(()=>{class o{constructor(t,r,i,n){this.usersService=t,this.toaster=r,this.localStorage=i,this.router=n,this.showDownload=!1}ngOnInit(){this.username=this.localStorage.get("user-entity")?.username}onFileSelected(t){this.selectedFile=t.target.files[0]}downloadTemplate(){this.usersService.downloadUserUploadTemplate("user_account_upload_template.csv").subscribe(t=>{const r=new Blob([t],{type:"text/csv"}),i=window.URL.createObjectURL(r),n=document.createElement("a");n.href=i,n.download="user_account_upload_template.csv",n.click(),window.URL.revokeObjectURL(i)})}downloadProcessingResults(){this.usersService.downloadProcessingResults(this.processingResultsFile).subscribe(t=>{const r=new Blob([t],{type:"text/csv"}),i=window.URL.createObjectURL(r),n=document.createElement("a");n.href=i,n.download=this.processingResultsFile,n.click(),window.URL.revokeObjectURL(i)})}uploadFile(){const t=new FormData;t.append("file",this.selectedFile),this.usersService.bulkUploadCountryUsersAdmins(t,this.username).subscribe(r=>{this.processingResultsFile=r?.filename,this.showDownload=!0,this.toaster.showSuccess(r?.status+" | "+r?.message)},r=>{this.toaster.showError("Error uploading file | "+r)})}goBack(){window.history.back()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z.K),e.Y36(F.M),e.Y36(q.n2),e.Y36(y.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-bulk-create-country-user-accounts"]],features:[e._Bn([Z.K])],decls:37,vars:2,consts:[[2,"margin-bottom","5px","margin-left","5px"],["mat-raised-button","","color","primary",3,"click"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"mat-elevation-z4","m-auto",2,"padding","24px","border","2px solid #304254","border-radius","8px"],[2,"font-size","24px","margin-bottom","4px","color","#304254"],[2,"font-weight","normal","opacity","0.6","margin-top","0","padding","0"],["fxLayout","row wrap","fxLayoutGap","16px grid",1,"form-field-full"],["fxFlex","70","fxFlex.lt-sm","100"],["fxFlex","30","fxFlex.lt-sm","100"],["type","file","accept",".csv",1,"form-control","me-2",2,"display","flex","background-color","#c0aaa8","color","#74C84D","width","100%","margin-bottom","7px","padding-left","10px","padding-top","10px","padding-bottom","10px","border-radius","4px","border","2px solid #74C84D","font-size","16px","border","none",3,"change"],["mat-raised-button","",2,"display","flex","background-color","#c0aaa8","color","#74C84D","width","100%","padding-top","10px","padding-bottom","10px","margin-top","7px","border-radius","4px","border","2px solid #74C84D","font-size","16px","border","none",3,"click"],[1,"d-flex","justify-content-between","flex-wrap",2,"margin-top","24px"],["mat-raised-button","",2,"background-color","#74C84D","color","white",3,"disabled","click"],["mat-raised-button","","color","primary","style","color:white;margin-left: 5px;",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",2,"color","white","margin-left","5px",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return r.goBack()}),e.TgZ(2,"mat-icon"),e._uU(3,"arrow_back"),e.qZA()()(),e.TgZ(4,"div")(5,"div",2)(6,"mat-card",3)(7,"mat-card-title",4),e._uU(8," Import User Accounts "),e.qZA(),e.TgZ(9,"h6",5),e._uU(10,"Import Country Users"),e.qZA(),e.TgZ(11,"div",6)(12,"div",7)(13,"h3"),e._uU(14,"Upload Your Data File"),e.qZA(),e.TgZ(15,"p"),e._uU(16,"Use the Upload File button to upload your prepared user accounts data."),e.qZA(),e.TgZ(17,"h3"),e._uU(18,"Download a Sample File"),e.qZA(),e.TgZ(19,"p"),e._uU(20,"If you need a template, click Download Sample Sheet to guide you in formatting your data correctly."),e.qZA(),e.TgZ(21,"h3"),e._uU(22,"Processing Report"),e.qZA(),e.TgZ(23,"p"),e._uU(24,"After Processing, a Download Result Sheet button will appear. Use it to download the processing results."),e.qZA()(),e.TgZ(25,"div",8)(26,"input",9),e.NdJ("change",function(n){return r.onFileSelected(n)}),e.qZA(),e.TgZ(27,"button",10),e.NdJ("click",function(){return r.downloadTemplate()}),e.TgZ(28,"mat-icon"),e._uU(29," cloud_download "),e.qZA(),e._uU(30," Download Template "),e.qZA()()(),e.TgZ(31,"div",11)(32,"button",12),e.NdJ("click",function(){return r.uploadFile()}),e.TgZ(33,"mat-icon"),e._uU(34," cloud_circle "),e.qZA(),e._uU(35," Save & Submit"),e.qZA(),e.YNc(36,ho,2,0,"button",13),e.qZA()()()()),2&t&&(e.xp6(32),e.Q6J("disabled",!r.selectedFile),e.xp6(4),e.Q6J("ngIf",r.showDownload))},dependencies:[v.O5,C.lW,f.a8,f.n5,x.Hw,g.xw,g.SQ,g.yH]}),o})()},{path:"manage-user-account/:id",component:Xr},{path:"review-user-account/:id",component:Ir},{path:"review-user-account-modifications/:id",component:ao},{path:"roles-review",component:Yt},{path:"roles-modifications-review",component:Vt},{path:"review-role/:id",component:Pt},{path:"view-role-modifications/:id",component:tr},{path:"password-changes",component:po}];let _o=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[y.Bz.forChild(fo),y.Bz]}),o})(),yo=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[Z.K],imports:[q.m8,_o]}),o})()}}]);